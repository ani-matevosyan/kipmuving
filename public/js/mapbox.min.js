!function t(f,c,h){function g(i,k){if(!c[i]){if(!f[i]){var e="function"==typeof require&&require;if(!k&&e){return e(i,!0)}if(d){return d(i,!0)}throw new Error("Cannot find module '"+i+"'")}var j=c[i]={exports:{}};f[i][0].call(j.exports,function(l){var a=f[i][1][l];return g(a?a:l)},j,j.exports,t,f,c,h)}return c[i].exports}for(var d="function"==typeof require&&require,b=0;b<h.length;b++){g(h[b])}return g}({1:[function(a){a("./leaflet"),a("./mapbox")},{"./leaflet":2,"./mapbox":3}],2:[function(a){window.L=a("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":6}],3:[function(a,b){window.L.Icon.Default.imagePath="//api.tiles.mapbox.com/mapbox.js/v"+a("./package.json").version+"/images",L.mapbox=b.exports={VERSION:a("./package.json").version,geocoder:a("./src/geocoder"),marker:a("./src/marker"),simplestyle:a("./src/simplestyle"),tileLayer:a("./src/tile_layer"),infoControl:a("./src/info_control"),shareControl:a("./src/share_control"),legendControl:a("./src/legend_control"),geocoderControl:a("./src/geocoder_control"),gridControl:a("./src/grid_control"),gridLayer:a("./src/grid_layer"),featureLayer:a("./src/feature_layer"),map:a("./src/map"),config:a("./src/config"),sanitize:a("sanitize-caja"),template:a("mustache").to_html},L.mapbox.markerLayer=L.mapbox.featureLayer},{"./package.json":10,"./src/config":11,"./src/feature_layer":12,"./src/geocoder":13,"./src/geocoder_control":14,"./src/grid_control":16,"./src/grid_layer":17,"./src/info_control":18,"./src/legend_control":19,"./src/map":21,"./src/marker":22,"./src/share_control":24,"./src/simplestyle":25,"./src/tile_layer":26,mustache:7,"sanitize-caja":8}],4:[function(b,c){function a(p,k,j){function g(e){return e>=200&&300>e||304===e}function f(){void 0===d.status||g(d.status)?k.call(d,null,d):k.call(d,d,null)}var q=!1;if("undefined"==typeof window.XMLHttpRequest){return k(Error("Browser not supported"))}if("undefined"==typeof j){var m=p.match(/^\s*https?:\/\/[^\/]*/);j=m&&m[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var d;if(!j||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest){d=new window.XMLHttpRequest}else{d=new window.XDomainRequest;var h=k;k=function(){if(q){h.apply(this,arguments)}else{var i=this,l=arguments;setTimeout(function(){h.apply(i,l)},0)}}}return"onload" in d?d.onload=f:d.onreadystatechange=function(){4===d.readyState&&f()},d.onerror=function(e){k.call(this,e||!0,null),k=function(){}},d.onprogress=function(){},d.ontimeout=function(e){k.call(this,e,null),k=function(){}},d.onabort=function(e){k.call(this,e,null),k=function(){}},d.open("GET",p,!0),d.send(null),q=!0,d}"undefined"!=typeof c&&(c.exports=a)},{}],5:[function(b,c,a){!function(af){function ar(v){if(ar[v]!==ag){return ar[v]}var m;if("bug-string-char-index"==v){m="a"!="a"[0]}else{if("json"==v){m=ar("json-stringify")&&ar("json-parse")}else{var h,g='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==v){var e=ao.stringify,k="function"==typeof e&&ae;if(k){(h=function(){return 1}).toJSON=h;try{k="0"===e(0)&&"0"===e(new Number)&&'""'==e(new String)&&e(aw)===ag&&e(ag)===ag&&e()===ag&&"1"===e(h)&&"[1]"==e([h])&&"[null]"==e([ag])&&"null"==e(null)&&"[null,null,null]"==e([ag,aw,null])&&e({a:[h,!0,!1,null,"\x00\b\n\f\r	"]})==g&&"1"===e(null,h)&&"[\n 1,\n 2\n]"==e([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==e(new Date(-8640000000000000))&&'"+275760-09-13T00:00:00.000Z"'==e(new Date(8640000000000000))&&'"-000001-01-01T00:00:00.000Z"'==e(new Date(-62198755200000))&&'"1969-12-31T23:59:59.999Z"'==e(new Date(-1))}catch(u){k=!1}}m=k}if("json-parse"==v){var f=ao.parse;if("function"==typeof f){try{if(0===f("0")&&!f(!1)){h=f(g);var s=5==h.a.length&&1===h.a[0];if(s){try{s=!f('"	"')}catch(u){}if(s){try{s=1!==f("01")}catch(u){}}if(s){try{s=1!==f("1.")}catch(u){}}}}}catch(u){s=!1}}m=s}}}return ar[v]=!!m}var ak,aj,ag,aw={}.toString,ah="function"==typeof define&&define.amd,am="object"==typeof JSON&&JSON,ao="object"==typeof a&&a&&!a.nodeType&&a;ao&&am?(ao.stringify=am.stringify,ao.parse=am.parse):ao=af.JSON=am||{};var ae=new Date(-3509827334573292);try{ae=-109252==ae.getUTCFullYear()&&0===ae.getUTCMonth()&&1===ae.getUTCDate()&&10==ae.getUTCHours()&&37==ae.getUTCMinutes()&&6==ae.getUTCSeconds()&&708==ae.getUTCMilliseconds()}catch(au){}if(!ar("json")){var ai="[object Function]",at="[object Date]",al="[object Number]",aq="[object String]",ax="[object Array]",ap="[object Boolean]",ad=ar("bug-string-char-index");if(!ae){var aa=Math.floor,K=[0,31,59,90,120,151,181,212,243,273,304,334],av=function(d,f){return K[f]+365*(d-1970)+aa((d-1969+(f=+(f>1)))/4)-aa((d-1901+f)/100)+aa((d-1601+f)/400)}}(ak={}.hasOwnProperty)||(ak=function(f){var g,d={};return(d.__proto__=null,d.__proto__={toString:1},d).toString!=aw?ak=function(k){var l=this.__proto__,h=k in (this.__proto__=null,this);return this.__proto__=l,h}:(g=d.constructor,ak=function(h){var e=(this.constructor||g).prototype;return h in this&&!(h in e&&this[h]===e[h])}),d=null,ak.call(this,f)});var G={"boolean":1,number:1,string:1,undefined:1},j=function(f,g){var d=typeof f[g];return"object"==d?!!f[g]:!G[d]};if(aj=function(g,m){var f,h,k,d=0;(f=function(){this.valueOf=0}).prototype.valueOf=0,h=new f;for(k in h){ak.call(h,k)&&d++}return f=h=null,d?aj=2==d?function(n,r){var l,u={},p=aw.call(n)==ai;for(l in n){p&&"prototype"==l||ak.call(u,l)||!(u[l]=1)||!ak.call(n,l)||r(l)}}:function(n,r){var l,u,p=aw.call(n)==ai;for(l in n){p&&"prototype"==l||!ak.call(n,l)||(u="constructor"===l)||r(l)}(u||ak.call(n,l="constructor"))&&r(l)}:(h=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],aj=function(s,v){var p,w,u=aw.call(s)==ai,n=!u&&"function"!=typeof s.constructor&&j(s,"hasOwnProperty")?s.hasOwnProperty:ak;for(p in s){u&&"prototype"==p||!n.call(s,p)||v(p)}for(w=h.length;p=h[--w];n.call(s,p)&&v(p)){}}),aj(g,m)},!ar("json-stringify")){var Q={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},ab="000000",ac=function(d,f){return(ab+(f||0)).slice(-d)},W="\\u00",J=function(g){var k,f='"',m=0,l=g.length,h=l>10&&ad;for(h&&(k=g.split(""));l>m;m++){var d=g.charCodeAt(m);switch(d){case 8:case 9:case 10:case 12:case 13:case 34:case 92:f+=Q[d];break;default:if(32>d){f+=W+ac(2,d.toString(16));break}f+=h?k[m]:ad?g.charAt(m):g[m]}}return f+'"'},V=function(az,aI,aG,aB,aE,aH,M){var aJ,aD,D,s,n,f,ay,B,aA,g,aF,aC,d,o,y,m;try{aJ=aI[az]}catch(w){}if("object"==typeof aJ&&aJ){if(aD=aw.call(aJ),aD!=at||ak.call(aJ,"toJSON")){"function"==typeof aJ.toJSON&&(aD!=al&&aD!=aq&&aD!=ax||ak.call(aJ,"toJSON"))&&(aJ=aJ.toJSON(az))}else{if(aJ>-1/0&&1/0>aJ){if(av){for(n=aa(aJ/86400000),D=aa(n/365.2425)+1970-1;av(D+1,0)<=n;D++){}for(s=aa((n-av(D,0))/30.42);av(D,s+1)<=n;s++){}n=1+n-av(D,s),f=(aJ%86400000+86400000)%86400000,ay=aa(f/3600000)%24,B=aa(f/60000)%60,aA=aa(f/1000)%60,g=f%1000}else{D=aJ.getUTCFullYear(),s=aJ.getUTCMonth(),n=aJ.getUTCDate(),ay=aJ.getUTCHours(),B=aJ.getUTCMinutes(),aA=aJ.getUTCSeconds(),g=aJ.getUTCMilliseconds()}aJ=(0>=D||D>=10000?(0>D?"-":"+")+ac(6,0>D?-D:D):ac(4,D))+"-"+ac(2,s+1)+"-"+ac(2,n)+"T"+ac(2,ay)+":"+ac(2,B)+":"+ac(2,aA)+"."+ac(3,g)+"Z"}else{aJ=null}}}if(aG&&(aJ=aG.call(aI,az,aJ)),null===aJ){return"null"}if(aD=aw.call(aJ),aD==ap){return""+aJ}if(aD==al){return aJ>-1/0&&1/0>aJ?""+aJ:"null"}if(aD==aq){return J(""+aJ)}if("object"==typeof aJ){for(o=M.length;o--;){if(M[o]===aJ){throw TypeError()}}if(M.push(aJ),aF=[],y=aH,aH+=aE,aD==ax){for(d=0,o=aJ.length;o>d;d++){aC=V(d,aJ,aG,aB,aE,aH,M),aF.push(aC===ag?"null":aC)}m=aF.length?aE?"[\n"+aH+aF.join(",\n"+aH)+"\n"+y+"]":"["+aF.join(",")+"]":"[]"}else{aj(aB||aJ,function(h){var k=V(h,aJ,aG,aB,aE,aH,M);k!==ag&&aF.push(J(h)+":"+(aE?" ":"")+k)}),m=aF.length?aE?"{\n"+aH+aF.join(",\n"+aH)+"\n"+y+"}":"{"+aF.join(",")+"}":"{}"}return M.pop(),m}};ao.stringify=function(x,v,m){var g,f,y,d;if("function"==typeof v||"object"==typeof v&&v){if((d=aw.call(v))==ai){f=v}else{if(d==ax){y={};for(var k,p=0,w=v.length;w>p;k=v[p++],d=aw.call(k),(d==aq||d==al)&&(y[k]=1)){}}}}if(m){if((d=aw.call(m))==al){if((m-=m%1)>0){for(g="",m>10&&(m=10);g.length<m;g+=" "){}}}else{d==aq&&(g=m.length<=10?m:m.slice(0,10))}}return V("",(k={},k[""]=x,k),f,y,g,"",[])}}if(!ar("json-parse")){var q,an,Y=String.fromCharCode,i={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},H=function(){throw q=an=null,SyntaxError()},N=function(){for(var g,k,f,m,l,h=an,d=h.length;d>q;){switch(l=h.charCodeAt(q)){case 9:case 10:case 13:case 32:q++;break;case 123:case 125:case 91:case 93:case 58:case 44:return g=ad?h.charAt(q):h[q],q++,g;case 34:for(g="@",q++;d>q;){if(l=h.charCodeAt(q),32>l){H()}else{if(92==l){switch(l=h.charCodeAt(++q)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:g+=i[l],q++;break;case 117:for(k=++q,f=q+4;f>q;q++){l=h.charCodeAt(q),l>=48&&57>=l||l>=97&&102>=l||l>=65&&70>=l||H()}g+=Y("0x"+h.slice(k,q));break;default:H()}}else{if(34==l){break}for(l=h.charCodeAt(q),k=q;l>=32&&92!=l&&34!=l;){l=h.charCodeAt(++q)}g+=h.slice(k,q)}}}if(34==h.charCodeAt(q)){return q++,g}H();default:if(k=q,45==l&&(m=!0,l=h.charCodeAt(++q)),l>=48&&57>=l){for(48==l&&(l=h.charCodeAt(q+1),l>=48&&57>=l)&&H(),m=!1;d>q&&(l=h.charCodeAt(q),l>=48&&57>=l);q++){}if(46==h.charCodeAt(q)){for(f=++q;d>f&&(l=h.charCodeAt(f),l>=48&&57>=l);f++){}f==q&&H(),q=f}if(l=h.charCodeAt(q),101==l||69==l){for(l=h.charCodeAt(++q),(43==l||45==l)&&q++,f=q;d>f&&(l=h.charCodeAt(f),l>=48&&57>=l);f++){}f==q&&H(),q=f}return +h.slice(k,q)}if(m&&H(),"true"==h.slice(q,q+4)){return q+=4,!0}if("false"==h.slice(q,q+5)){return q+=5,!1}if("null"==h.slice(q,q+4)){return q+=4,null}H()}}return"$"},F=function(f){var g,d;if("$"==f&&H(),"string"==typeof f){if("@"==(ad?f.charAt(0):f[0])){return f.slice(1)}if("["==f){for(g=[];f=N(),"]"!=f;d||(d=!0)){d&&(","==f?(f=N(),"]"==f&&H()):H()),","==f&&H(),g.push(F(f))}return g}if("{"==f){for(g={};f=N(),"}"!=f;d||(d=!0)){d&&(","==f?(f=N(),"}"==f&&H()):H()),(","==f||"string"!=typeof f||"@"!=(ad?f.charAt(0):f[0])||":"!=N())&&H(),g[f.slice(1)]=F(N())}return g}H()}return f},Z=function(f,g,d){var h=X(f,g,d);h===ag?delete f[g]:f[g]=h},X=function(f,h,d){var k,g=f[h];if("object"==typeof g&&g){if(aw.call(g)==ax){for(k=g.length;k--;){Z(g,k,d)}}else{aj(g,function(e){Z(g,e,d)})}}return d.call(f,h,g)};ao.parse=function(f,g){var d,h;return q=0,an=""+f,d=F(N()),"$"!=N()&&H(),q=an=null,g&&aw.call(g)==ai?X((h={},h[""]=d,h),"",g):d}}}ah&&define(function(){return ao})}(this)},{}],6:[function(a,b){!function(e,d,j){var h=e.L,f={};f.version="0.7.2","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return e.L=h,this},e.L=f,f.Util={extend:function(l){var p,k,r,q,m=Array.prototype.slice.call(arguments,1);for(k=0,r=m.length;r>k;k++){q=m[k]||{};for(p in q){q.hasOwnProperty(p)&&(l[p]=q[p])}}return l},bind:function(l,m){var k=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return l.apply(m,k||arguments)}},stamp:function(){var i=0,k="_leaflet_id";return function(l){return l[k]=l[k]||++i,l[k]}}(),invokeEach:function(l,m,k){var q,p;if("object"==typeof l){p=Array.prototype.slice.call(arguments,3);for(q in l){m.apply(k,[q,l[q]].concat(p))}return !0}return !1},limitExecByInterval:function(l,p,k){var r,q;return function m(){var i=arguments;return r?(q=!0,void 0):(r=!0,setTimeout(function(){r=!1,q&&(m.apply(k,i),q=!1)},p),l.apply(k,i),void 0)}},falseFn:function(){return !1},formatNum:function(l,m){var k=Math.pow(10,m||5);return Math.round(l*k)/k},trim:function(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")},splitWords:function(i){return f.Util.trim(i).split(/\s+/)},setOptions:function(i,k){return i.options=f.extend({},i.options,k),i.options},getParamString:function(l,m,k){var q=[];for(var p in l){q.push(encodeURIComponent(k?p.toUpperCase():p)+"="+encodeURIComponent(l[p]))}return(m&&-1!==m.indexOf("?")?"&":"?")+q.join("&")},template:function(i,k){return i.replace(/\{ *([\w_]+) *\}/g,function(m,l){var n=k[l];if(n===j){throw new Error("No value provided for variable "+m)}return"function"==typeof n&&(n=n(k)),n})},isArray:Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function m(s){var r,v,u=["webkit","moz","o","ms"];for(r=0;r<u.length&&!v;r++){v=e[u[r]+s]}return v}function l(r){var n=+new Date,s=Math.max(0,16-(n-q));return q=n+s,e.setTimeout(r,s)}var q=0,p=e.requestAnimationFrame||m("RequestAnimationFrame")||l,k=e.cancelAnimationFrame||m("CancelAnimationFrame")||m("CancelRequestAnimationFrame")||function(i){e.clearTimeout(i)};f.Util.requestAnimFrame=function(s,u,i,o){return s=f.bind(s,u),i&&p===l?(s(),void 0):p.call(e,s,o)},f.Util.cancelAnimFrame=function(i){i&&k.call(e,i)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(m){var p=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},l=function(){};l.prototype=this.prototype;var r=new l;r.constructor=p,p.prototype=r;for(var q in this){this.hasOwnProperty(q)&&"prototype"!==q&&(p[q]=this[q])}m.statics&&(f.extend(p,m.statics),delete m.statics),m.includes&&(f.Util.extend.apply(null,[r].concat(m.includes)),delete m.includes),m.options&&r.options&&(m.options=f.extend({},r.options,m.options)),f.extend(r,m),r._initHooks=[];var k=this;return p.__super__=k.prototype,r.callInitHooks=function(){if(!this._initHooksCalled){k.prototype.callInitHooks&&k.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var i=0,n=r._initHooks.length;n>i;i++){r._initHooks[i].call(this)}}},p},f.Class.include=function(i){f.extend(this.prototype,i)},f.Class.mergeOptions=function(i){f.extend(this.prototype.options,i)},f.Class.addInitHook=function(l){var m=Array.prototype.slice.call(arguments,1),k="function"==typeof l?l:function(){this[l].apply(this,m)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k)};var c="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(C,y,w){if(f.Util.invokeEach(C,this.addEventListener,this,y,w)){return this}var s,q,k,v,x,B,A,m=this[c]=this[c]||{},z=w&&w!==this&&f.stamp(w);for(C=f.Util.splitWords(C),s=0,q=C.length;q>s;s++){k={action:y,context:w||this},v=C[s],z?(x=v+"_idx",B=x+"_len",A=m[x]=m[x]||{},A[z]||(A[z]=[],m[B]=(m[B]||0)+1),A[z].push(k)):(m[v]=m[v]||[],m[v].push(k))}return this},hasEventListeners:function(i){var k=this[c];return !!k&&(i in k&&k[i].length>0||i+"_idx" in k&&k[i+"_idx_len"]>0)},removeEventListener:function(F,B,y){if(!this[c]){return this}if(!F){return this.clearAllEventListeners()}if(f.Util.invokeEach(F,this.removeEventListener,this,B,y)){return this}var v,s,k,x,z,E,D,q,C,w=this[c],A=y&&y!==this&&f.stamp(y);for(F=f.Util.splitWords(F),v=0,s=F.length;s>v;v++){if(k=F[v],E=k+"_idx",D=E+"_len",q=w[E],B){if(x=A&&q?q[A]:w[k]){for(z=x.length-1;z>=0;z--){x[z].action!==B||y&&x[z].context!==y||(C=x.splice(z,1),C[0].action=f.Util.falseFn)}y&&q&&0===x.length&&(delete q[A],w[D]--)}}else{delete w[k],delete w[E],delete w[D]}}return this},clearAllEventListeners:function(){return delete this[c],this},fireEvent:function(y,w){if(!this.hasEventListeners(y)){return this}var s,p,m,k,q,v=f.Util.extend({},w,{type:y,target:this}),x=this[c];if(x[y]){for(s=x[y].slice(),p=0,m=s.length;m>p;p++){s[p].action.call(s[p].context,v)}}k=x[y+"_idx"];for(q in k){if(s=k[q].slice()){for(p=0,m=s.length;m>p;p++){s[p].action.call(s[p].context,v)}}}return this},addOneTimeEventListener:function(l,m,k){if(f.Util.invokeEach(l,this.addOneTimeEventListener,this,m,k)){return this}var o=f.bind(function(){this.removeEventListener(l,m,k).removeEventListener(l,o,k)},this);return this.addEventListener(l,m,k).addEventListener(l,o,k)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var G="ActiveXObject" in e,A=G&&!d.addEventListener,K=navigator.userAgent.toLowerCase(),x=-1!==K.indexOf("webkit"),C=-1!==K.indexOf("chrome"),D=-1!==K.indexOf("phantom"),w=-1!==K.indexOf("android"),I=-1!==K.search("android [23]"),z=-1!==K.indexOf("gecko"),H=typeof orientation!=j+"",B=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints&&!e.PointerEvent,F=e.PointerEvent&&e.navigator.pointerEnabled&&e.navigator.maxTouchPoints||B,M="devicePixelRatio" in e&&e.devicePixelRatio>1||"matchMedia" in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,E=d.documentElement,s=G&&"transition" in E.style,q="WebKitCSSMatrix" in e&&"m11" in new e.WebKitCSSMatrix&&!I,n="MozPerspective" in E.style,J="OTransition" in E.style,k=!e.L_DISABLE_3D&&(s||q||n||J)&&!D,i=!e.L_NO_TOUCH&&!D&&function(){var l="ontouchstart";if(F||l in E){return !0}var m=d.createElement("div"),o=!1;return m.setAttribute?(m.setAttribute(l,"return;"),"function"==typeof m[l]&&(o=!0),m.removeAttribute(l),m=null,o):!1}();f.Browser={ie:G,ielt9:A,webkit:x,gecko:z&&!x&&!e.opera&&!G,android:w,android23:I,chrome:C,ie3d:s,webkit3d:q,gecko3d:n,opera3d:J,any3d:k,mobile:H,mobileWebkit:H&&x,mobileWebkit3d:H&&q,mobileOpera:H&&e.opera,touch:i,msPointer:B,pointer:F,retina:M}}(),f.Point=function(l,m,k){this.x=k?Math.round(l):l,this.y=k?Math.round(m):m},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(i){return this.clone()._add(f.point(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(f.point(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(l){l=f.point(l);var m=l.x-this.x,k=l.y-this.y;return Math.sqrt(m*m+k*k)},equals:function(i){return i=f.point(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=f.point(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(l,m,k){return l instanceof f.Point?l:f.Util.isArray(l)?new f.Point(l[0],l[1]):l===j||null===l?l:new f.Point(l,m,k)},f.Bounds=function(l,m){if(l){for(var k=m?[l,m]:l,q=0,p=k.length;p>q;q++){this.extend(k[q])}}},f.Bounds.prototype={extend:function(i){return i=f.point(i),this.min||this.max?(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=i.clone(),this.max=i.clone()),this},getCenter:function(i){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var m,k;return l="number"==typeof l[0]||l instanceof f.Point?f.point(l):f.bounds(l),l instanceof f.Bounds?(m=l.min,k=l.max):m=k=l,m.x>=this.min.x&&k.x<=this.max.x&&m.y>=this.min.y&&k.y<=this.max.y},intersects:function(m){m=f.bounds(m);var q=this.min,l=this.max,u=m.min,s=m.max,k=s.x>=q.x&&u.x<=l.x,p=s.y>=q.y&&u.y<=l.y;return k&&p},isValid:function(){return !(!this.min||!this.max)}},f.bounds=function(i,k){return !i||i instanceof f.Bounds?i:new f.Bounds(i,k)},f.Transformation=function(l,m,k,o){this._a=l,this._b=m,this._c=k,this._d=o},f.Transformation.prototype={transform:function(i,k){return this._transform(i.clone(),k)},_transform:function(i,k){return k=k||1,i.x=k*(this._a*i.x+this._b),i.y=k*(this._c*i.y+this._d),i},untransform:function(i,k){return k=k||1,new f.Point((i.x/k-this._b)/this._a,(i.y/k-this._d)/this._c)}},f.DomUtil={get:function(i){return"string"==typeof i?d.getElementById(i):i},getStyle:function(i,k){var m=i.style[k];if(!m&&i.currentStyle&&(m=i.currentStyle[k]),(!m||"auto"===m)&&d.defaultView){var l=d.defaultView.getComputedStyle(i,null);m=l?l[k]:null}return"auto"===m?null:m},getViewportOffset:function(y){var s,m=0,k=0,w=y,i=d.body,p=d.documentElement;do{if(m+=w.offsetTop||0,k+=w.offsetLeft||0,m+=parseInt(f.DomUtil.getStyle(w,"borderTopWidth"),10)||0,k+=parseInt(f.DomUtil.getStyle(w,"borderLeftWidth"),10)||0,s=f.DomUtil.getStyle(w,"position"),w.offsetParent===i&&"absolute"===s){break}if("fixed"===s){m+=i.scrollTop||p.scrollTop||0,k+=i.scrollLeft||p.scrollLeft||0;break}if("relative"===s&&!w.offsetLeft){var q=f.DomUtil.getStyle(w,"width"),x=f.DomUtil.getStyle(w,"max-width"),v=w.getBoundingClientRect();("none"!==q||"none"!==x)&&(k+=v.left+w.clientLeft),m+=v.top+(i.scrollTop||p.scrollTop||0);break}w=w.offsetParent}while(w);w=y;do{if(w===i){break}m-=w.scrollTop||0,k-=w.scrollLeft||0,w=w.parentNode}while(w);return new f.Point(k,m)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(d.body,"direction")),f.DomUtil._docIsLtr},create:function(i,k,m){var l=d.createElement(i);return l.className=k,m&&m.appendChild(l),l},hasClass:function(l,m){if(l.classList!==j){return l.classList.contains(m)}var k=f.DomUtil._getClass(l);return k.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(k)},addClass:function(m,p){if(m.classList!==j){for(var l=f.Util.splitWords(p),q=0,k=l.length;k>q;q++){m.classList.add(l[q])}}else{if(!f.DomUtil.hasClass(m,p)){var n=f.DomUtil._getClass(m);f.DomUtil._setClass(m,(n?n+" ":"")+p)}}},removeClass:function(i,k){i.classList!==j?i.classList.remove(k):f.DomUtil._setClass(i,f.Util.trim((" "+f.DomUtil._getClass(i)+" ").replace(" "+k+" "," ")))},_setClass:function(i,k){i.className.baseVal===j?i.className=k:i.className.baseVal=k},_getClass:function(i){return i.className.baseVal===j?i.className:i.className.baseVal},setOpacity:function(l,m){if("opacity" in l.style){l.style.opacity=m}else{if("filter" in l.style){var k=!1,q="DXImageTransform.Microsoft.Alpha";try{k=l.filters.item(q)}catch(p){if(1===m){return}}m=Math.round(100*m),k?(k.Enabled=100!==m,k.Opacity=m):l.style.filter+=" progid:"+q+"(opacity="+m+")"}}},testProp:function(i){for(var k=d.documentElement.style,l=0;l<i.length;l++){if(i[l] in k){return i[l]}}return !1},getTranslateString:function(l){var m=f.Browser.webkit3d,k="translate"+(m?"3d":"")+"(",o=(m?",0":"")+")";return k+l.x+"px,"+l.y+"px"+o},getScaleString:function(l,m){var k=f.DomUtil.getTranslateString(m.add(m.multiplyBy(-1*l))),o=" scale("+l+") ";return k+o},setPosition:function(l,m,k){l._leaflet_pos=m,!k&&f.Browser.any3d?l.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(m):(l.style.left=m.x+"px",l.style.top=m.y+"px")},getPosition:function(i){return i._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart" in d){f.extend(f.DomUtil,{disableTextSelection:function(){f.DomEvent.on(e,"selectstart",f.DomEvent.preventDefault)},enableTextSelection:function(){f.DomEvent.off(e,"selectstart",f.DomEvent.preventDefault)}})}else{var i=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(i){var k=d.documentElement.style;this._userSelect=k[i],k[i]="none"}},enableTextSelection:function(){i&&(d.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}f.extend(f.DomUtil,{disableImageDrag:function(){f.DomEvent.on(e,"dragstart",f.DomEvent.preventDefault)},enableImageDrag:function(){f.DomEvent.off(e,"dragstart",f.DomEvent.preventDefault)}})}(),f.LatLng=function(l,m,k){if(l=parseFloat(l),m=parseFloat(m),isNaN(l)||isNaN(m)){throw new Error("Invalid LatLng object: ("+l+", "+m+")")}this.lat=l,this.lng=m,k!==j&&(this.alt=parseFloat(k))},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(i){if(!i){return !1}i=f.latLng(i);var k=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return k<=f.LatLng.MAX_MARGIN},toString:function(i){return"LatLng("+f.Util.formatNum(this.lat,i)+", "+f.Util.formatNum(this.lng,i)+")"},distanceTo:function(z){z=f.latLng(z);var w=6378137,s=f.LatLng.DEG_TO_RAD,p=(z.lat-this.lat)*s,m=(z.lng-this.lng)*s,x=this.lat*s,k=z.lat*s,q=Math.sin(p/2),v=Math.sin(m/2),y=q*q+v*v*Math.cos(x)*Math.cos(k);return 2*w*Math.atan2(Math.sqrt(y),Math.sqrt(1-y))},wrap:function(l,m){var k=this.lng;return l=l||-180,m=m||180,k=(k+m)%(m-l)+(l>k||k===m?m:l),new f.LatLng(this.lat,k)}},f.latLng=function(i,k){return i instanceof f.LatLng?i:f.Util.isArray(i)?"number"==typeof i[0]||"string"==typeof i[0]?new f.LatLng(i[0],i[1],i[2]):null:i===j||null===i?i:"object"==typeof i&&"lat" in i?new f.LatLng(i.lat,"lng" in i?i.lng:i.lon):k===j?null:new f.LatLng(i,k)},f.LatLngBounds=function(l,m){if(l){for(var k=m?[l,m]:l,q=0,p=k.length;p>q;q++){this.extend(k[q])}}},f.LatLngBounds.prototype={extend:function(i){if(!i){return this}var k=f.latLng(i);return i=null!==k?k:f.latLngBounds(i),i instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(i.lat,this._southWest.lat),this._southWest.lng=Math.min(i.lng,this._southWest.lng),this._northEast.lat=Math.max(i.lat,this._northEast.lat),this._northEast.lng=Math.max(i.lng,this._northEast.lng)):(this._southWest=new f.LatLng(i.lat,i.lng),this._northEast=new f.LatLng(i.lat,i.lng)):i instanceof f.LatLngBounds&&(this.extend(i._southWest),this.extend(i._northEast)),this},pad:function(l){var m=this._southWest,k=this._northEast,q=Math.abs(m.lat-k.lat)*l,p=Math.abs(m.lng-k.lng)*l;return new f.LatLngBounds(new f.LatLng(m.lat-q,m.lng-p),new f.LatLng(k.lat+q,k.lng+p))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){l="number"==typeof l[0]||l instanceof f.LatLng?f.latLng(l):f.latLngBounds(l);var m,k,q=this._southWest,p=this._northEast;return l instanceof f.LatLngBounds?(m=l.getSouthWest(),k=l.getNorthEast()):m=k=l,m.lat>=q.lat&&k.lat<=p.lat&&m.lng>=q.lng&&k.lng<=p.lng},intersects:function(m){m=f.latLngBounds(m);var q=this._southWest,l=this._northEast,u=m.getSouthWest(),s=m.getNorthEast(),k=s.lat>=q.lat&&u.lat<=l.lat,p=s.lng>=q.lng&&u.lng<=l.lng;return k&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i){return i?(i=f.latLngBounds(i),this._southWest.equals(i.getSouthWest())&&this._northEast.equals(i.getNorthEast())):!1},isValid:function(){return !(!this._southWest||!this._northEast)}},f.latLngBounds=function(i,k){return !i||i instanceof f.LatLngBounds?i:new f.LatLngBounds(i,k)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(m){var p=f.LatLng.DEG_TO_RAD,l=this.MAX_LATITUDE,r=Math.max(Math.min(l,m.lat),-l),q=m.lng*p,k=r*p;return k=Math.log(Math.tan(Math.PI/4+k/2)),new f.Point(q,k)},unproject:function(l){var m=f.LatLng.RAD_TO_DEG,k=l.x*m,o=(2*Math.atan(Math.exp(l.y))-Math.PI/2)*m;return new f.LatLng(o,k)}},f.Projection.LonLat={project:function(i){return new f.Point(i.lng,i.lat)},unproject:function(i){return new f.LatLng(i.y,i.x)}},f.CRS={latLngToPoint:function(l,m){var k=this.projection.project(l),o=this.scale(m);return this.transformation._transform(k,o)},pointToLatLng:function(l,m){var k=this.scale(m),o=this.transformation.untransform(l,k);return this.projection.unproject(o)},project:function(i){return this.projection.project(i)},scale:function(i){return 256*Math.pow(2,i)},getSize:function(i){var k=this.scale(i);return f.point(k,k)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(i){return Math.pow(2,i)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(l){var m=this.projection.project(l),k=6378137;return m.multiplyBy(k)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,0.5,-1/360,0.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(i,k){k=f.setOptions(this,k),this._initContainer(i),this._initLayout(),this._onResize=f.bind(this._onResize,this),this._initEvents(),k.maxBounds&&this.setMaxBounds(k.maxBounds),k.center&&k.zoom!==j&&this.setView(f.latLng(k.center),k.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(k.layers)},setView:function(i,k){return k=k===j?this.getZoom():k,this._resetView(f.latLng(i),this._limitZoom(k)),this},setZoom:function(i,k){return this._loaded?this.setView(this.getCenter(),i,{zoom:k}):(this._zoom=this._limitZoom(i),this)},zoomIn:function(i,k){return this.setZoom(this._zoom+(i||1),k)},zoomOut:function(i,k){return this.setZoom(this._zoom-(i||1),k)},setZoomAround:function(q,u,p){var w=this.getZoomScale(u),v=this.getSize().divideBy(2),m=q instanceof f.Point?q:this.latLngToContainerPoint(q),s=m.subtract(v).multiplyBy(1-1/w),k=this.containerPointToLatLng(v.add(s));return this.setView(k,u,{zoom:p})},fitBounds:function(x,v){v=v||{},x=x.getBounds?x.getBounds():f.latLngBounds(x);var s=f.point(v.paddingTopLeft||v.padding||[0,0]),p=f.point(v.paddingBottomRight||v.padding||[0,0]),m=this.getBoundsZoom(x,!1,s.add(p)),w=p.subtract(s).divideBy(2),k=this.project(x.getSouthWest(),m),q=this.project(x.getNorthEast(),m),u=this.unproject(k.add(q).divideBy(2).add(w),m);return m=v&&v.maxZoom?Math.min(v.maxZoom,m):m,this.setView(u,m,v)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,k){return this.setView(i,this._zoom,{pan:k})},panBy:function(i){return this.fire("movestart"),this._rawPanBy(f.point(i)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(i){return i=f.latLngBounds(i),this.options.maxBounds=i,i?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(l,m){var k=this.getCenter(),o=this._limitCenter(k,this._zoom,l);return k.equals(o)?this:this.panTo(o,m)},addLayer:function(i){var k=f.stamp(i);return this._layers[k]?this:(this._layers[k]=i,!i.options||isNaN(i.options.maxZoom)&&isNaN(i.options.minZoom)||(this._zoomBoundLayers[k]=i,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&i instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,i.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(i),this)},removeLayer:function(i){var k=f.stamp(i);return this._layers[k]?(this._loaded&&i.onRemove(this),delete this._layers[k],this._loaded&&this.fire("layerremove",{layer:i}),this._zoomBoundLayers[k]&&(delete this._zoomBoundLayers[k],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&i instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,i.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(i){return i?f.stamp(i) in this._layers:!1},eachLayer:function(l,m){for(var k in this._layers){l.call(m,this._layers[k])}return this},invalidateSize:function(m){if(!this._loaded){return this}m=f.extend({animate:!1,pan:!0},m===!0?{animate:!0}:m);var p=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var l=this.getSize(),r=p.divideBy(2).round(),q=l.divideBy(2).round(),k=r.subtract(q);return k.x||k.y?(m.animate&&m.pan?this.panBy(k):(m.pan&&this._rawPanBy(k),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:l})):this},addHandler:function(l,m){if(!m){return this}var k=this[l]=new m(this);return this._handlers.push(k),this.options[l]&&k.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(i){this._container._leaflet=j}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),m=this.unproject(l.getBottomLeft()),k=this.unproject(l.getTopRight());return new f.LatLngBounds(m,k)},getMinZoom:function(){return this.options.minZoom===j?this._layersMinZoom===j?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===j?this._layersMaxZoom===j?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(z,w,s){z=f.latLngBounds(z);var p,m=this.getMinZoom()-(w?1:0),x=this.getMaxZoom(),k=this.getSize(),q=z.getNorthWest(),v=z.getSouthEast(),y=!0;s=f.point(s||[0,0]);do{m++,p=this.project(v,m).subtract(this.project(q,m)).add(s),y=w?p.x<k.x||p.y<k.y:k.contains(p)}while(y&&x>=m);return y&&w?null:w?m:m-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var i=this._getTopLeftPoint();return new f.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i){var k=this.options.crs;return k.scale(i)/k.scale(this._zoom)},getScaleZoom:function(i){return this._zoom+Math.log(i)/Math.LN2},project:function(i,k){return k=k===j?this._zoom:k,this.options.crs.latLngToPoint(f.latLng(i),k)},unproject:function(i,k){return k=k===j?this._zoom:k,this.options.crs.pointToLatLng(f.point(i),k)},layerPointToLatLng:function(i){var k=f.point(i).add(this.getPixelOrigin());return this.unproject(k)},latLngToLayerPoint:function(i){var k=this.project(f.latLng(i))._round();return k._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(i){return f.point(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return f.point(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var k=this.containerPointToLayerPoint(f.point(i));return this.layerPointToLatLng(k)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(i)))},mouseEventToContainerPoint:function(i){return f.DomEvent.getMousePosition(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var k=this._container=f.DomUtil.get(i);if(!k){throw new Error("Map container not found.")}if(k._leaflet){throw new Error("Map container is already initialized.")}k._leaflet=!0},_initLayout:function(){var i=this._container;f.DomUtil.addClass(i,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(f.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var k=f.DomUtil.getStyle(i,"position");"absolute"!==k&&"relative"!==k&&"fixed"!==k&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._mapPane=i.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=i.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),i.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),i.shadowPane=this._createPane("leaflet-shadow-pane"),i.overlayPane=this._createPane("leaflet-overlay-pane"),i.markerPane=this._createPane("leaflet-marker-pane"),i.popupPane=this._createPane("leaflet-popup-pane");var k=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(i.markerPane,k),f.DomUtil.addClass(i.shadowPane,k),f.DomUtil.addClass(i.popupPane,k))},_createPane:function(i,k){return f.DomUtil.create("div",i,k||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(l){l=l?f.Util.isArray(l)?l:[l]:[];for(var m=0,k=l.length;k>m;m++){this.addLayer(l[m])}},_resetView:function(m,p,l,r){var q=this._zoom!==p;r||(this.fire("movestart"),q&&this.fire("zoomstart")),this._zoom=p,this._initialCenter=m,this._initialTopLeftPoint=this._getNewTopLeftPoint(m),l?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var k=!this._loaded;this._loaded=!0,k&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!l}),this.fire("move"),(q||r)&&this.fire("zoomend"),this.fire("moveend",{hard:!l})},_rawPanBy:function(i){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var l,n=1/0,k=-1/0,p=this._getZoomSpan();for(l in this._zoomBoundLayers){var m=this._zoomBoundLayers[l];isNaN(m.options.minZoom)||(n=Math.min(n,m.options.minZoom)),isNaN(m.options.maxZoom)||(k=Math.max(k,m.options.maxZoom))}l===j?this._layersMaxZoom=this._layersMinZoom=j:(this._layersMaxZoom=k,this._layersMinZoom=n),p!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(l){if(f.DomEvent){l=l||"on",f.DomEvent[l](this._container,"click",this._onMouseClick,this);var k,p,m=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(k=0,p=m.length;p>k;k++){f.DomEvent[l](this._container,m[k],this._fireMouseEvent,this)}this.options.trackResize&&f.DomEvent[l](e,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(i){!this._loaded||!i._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||f.DomEvent._skipped(i)||(this.fire("preclick"),this._fireMouseEvent(i))},_fireMouseEvent:function(l){if(this._loaded&&!f.DomEvent._skipped(l)){var m=l.type;if(m="mouseenter"===m?"mouseover":"mouseleave"===m?"mouseout":m,this.hasEventListeners(m)){"contextmenu"===m&&f.DomEvent.preventDefault(l);var k=this.mouseEventToContainerPoint(l),q=this.containerPointToLayerPoint(k),p=this.layerPointToLatLng(q);this.fire(m,{latlng:p,layerPoint:q,containerPoint:k,originalEvent:l})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var i=0,k=this._handlers.length;k>i;i++){this._handlers[i].disable()}},whenReady:function(i,k){return this._loaded?i.call(k||this,this):this.on("load",i,k),this},_layerAdd:function(i){i.onAdd(this),this.fire("layeradd",{layer:i})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(l,m){var k=this.getSize()._divideBy(2);return this.project(l,m)._subtract(k)._round()},_latLngToNewLayerPoint:function(l,m,k){var o=this._getNewTopLeftPoint(k,m).add(this._getMapPanePos());return this.project(l,m)._subtract(o)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,q,l){if(!l){return m}var u=this.project(m,q),s=this.getSize().divideBy(2),k=new f.Bounds(u.subtract(s),u.add(s)),p=this._getBoundsOffset(k,l,q);return this.unproject(u.add(p),q)},_limitOffset:function(l,m){if(!m){return l}var k=this.getPixelBounds(),o=new f.Bounds(k.min.add(l),k.max.add(l));return l.add(this._getBoundsOffset(o,m))},_getBoundsOffset:function(m,q,l){var u=this.project(q.getNorthWest(),l).subtract(m.min),s=this.project(q.getSouthEast(),l).subtract(m.max),k=this._rebound(u.x,-s.x),p=this._rebound(u.y,-s.y);return new f.Point(k,p)},_rebound:function(i,k){return i+k>0?Math.round(i-k)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(k))},_limitZoom:function(l){var m=this.getMinZoom(),k=this.getMaxZoom();return Math.max(m,Math.min(k,l))}}),f.map=function(i,k){return new f.Map(i,k)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(C){var y=f.LatLng.DEG_TO_RAD,w=this.MAX_LATITUDE,s=Math.max(Math.min(w,C.lat),-w),q=this.R_MAJOR,A=this.R_MINOR,k=C.lng*y*q,v=s*y,x=A/q,B=Math.sqrt(1-x*x),z=B*Math.sin(v);z=Math.pow((1-z)/(1+z),0.5*B);var m=Math.tan(0.5*(0.5*Math.PI-v))/z;return v=-q*Math.log(m),new f.Point(k,v)},unproject:function(F){for(var A,y=f.LatLng.RAD_TO_DEG,v=this.R_MAJOR,s=this.R_MINOR,D=F.x*y/v,k=s/v,x=Math.sqrt(1-k*k),z=Math.exp(-F.y/v),E=Math.PI/2-2*Math.atan(z),C=15,q=1e-7,B=C,w=0.1;Math.abs(w)>q&&--B>0;){A=x*Math.sin(E),w=Math.PI/2-2*Math.atan(z*Math.pow((1-A)/(1+A),0.5*x))-E,E+=w}return new f.LatLng(E*y,D)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var l=f.Projection.Mercator,m=l.R_MAJOR,k=0.5/(Math.PI*m);return new f.Transformation(k,0.5,-k,0.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(l,m){m=f.setOptions(this,m),m.detectRetina&&f.Browser.retina&&m.maxZoom>0&&(m.tileSize=Math.floor(m.tileSize/2),m.zoomOffset++,m.minZoom>0&&m.minZoom--,this.options.maxZoom--),m.bounds&&(m.bounds=f.latLngBounds(m.bounds)),this._url=l;var k=this.options.subdomains;"string"==typeof k&&(this.options.subdomains=k.split(""))},onAdd:function(i){this._map=i,this._animated=i._zoomAnimated,this._initContainer(),i.on({viewreset:this._reset,moveend:this._update},this),this._animated&&i.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),i.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(i){return i.addLayer(this),this},onRemove:function(i){this._container.parentNode.removeChild(this._container),i.off({viewreset:this._reset,moveend:this._update},this),this._animated&&i.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||i.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var i=this._map._panes.tilePane;return this._container&&(i.appendChild(this._container),this._setAutoZIndex(i,Math.max)),this},bringToBack:function(){var i=this._map._panes.tilePane;return this._container&&(i.insertBefore(this._container,i.firstChild),this._setAutoZIndex(i,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},setUrl:function(i,k){return this._url=i,k||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==j&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m,q){var l,u,r,p=m.children,k=-q(1/0,-1/0);for(u=0,r=p.length;r>u;u++){p[u]!==this._container&&(l=parseInt(p[u].style.zIndex,10),isNaN(l)||(k=q(k,l)))}this.options.zIndex=this._container.style.zIndex=(isFinite(k)?k:0)+q(1,-1)},_updateOpacity:function(){var i,k=this._tiles;if(f.Browser.ielt9){for(i in k){f.DomUtil.setOpacity(k[i],this.options.opacity)}}else{f.DomUtil.setOpacity(this._container,this.options.opacity)}},_initContainer:function(){var i=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var k="leaflet-tile-container";this._bgBuffer=f.DomUtil.create("div",k,this._container),this._tileContainer=f.DomUtil.create("div",k,this._container)}else{this._tileContainer=this._container}i.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(i){for(var k in this._tiles){this.fire("tileunload",{tile:this._tiles[k]})}this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&i&&i.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var l=this._map,m=l.getZoom()+this.options.zoomOffset,k=this.options.maxNativeZoom,o=this.options.tileSize;return k&&m>k&&(o=Math.round(l.getZoomScale(m)/l.getZoomScale(k)*o)),o},_update:function(){if(this._map){var l=this._map,m=l.getPixelBounds(),k=l.getZoom(),q=this._getTileSize();if(!(k>this.options.maxZoom||k<this.options.minZoom)){var p=f.bounds(m.min.divideBy(q)._floor(),m.max.divideBy(q)._floor());this._addTilesFromCenterOut(p),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(p)}}},_addTilesFromCenterOut:function(m){var s,v,u,k=[],q=m.getCenter();for(s=m.min.y;s<=m.max.y;s++){for(v=m.min.x;v<=m.max.x;v++){u=new f.Point(v,s),this._tileShouldBeLoaded(u)&&k.push(u)}}var i=k.length;if(0!==i){k.sort(function(l,n){return l.distanceTo(q)-n.distanceTo(q)});var p=d.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,v=0;i>v;v++){this._addTile(k[v],p)}this._tileContainer.appendChild(p)}},_tileShouldBeLoaded:function(m){if(m.x+":"+m.y in this._tiles){return !1}var u=this.options;if(!u.continuousWorld){var l=this._getWrapTileNum();if(u.noWrap&&(m.x<0||m.x>=l.x)||m.y<0||m.y>=l.y){return !1}}if(u.bounds){var w=u.tileSize,v=m.multiplyBy(w),p=v.add([w,w]),k=this._map.unproject(v),q=this._map.unproject(p);if(u.continuousWorld||u.noWrap||(k=k.wrap(),q=q.wrap()),!u.bounds.intersects([k,q])){return !1}}return !0},_removeOtherTiles:function(l){var m,k,q,p;for(p in this._tiles){m=p.split(":"),k=parseInt(m[0],10),q=parseInt(m[1],10),(k<l.min.x||k>l.max.x||q<l.min.y||q>l.max.y)&&this._removeTile(p)}},_removeTile:function(i){var k=this._tiles[i];this.fire("tileunload",{tile:k,url:k.src}),this.options.reuseTiles?(f.DomUtil.removeClass(k,"leaflet-tile-loaded"),this._unusedTiles.push(k)):k.parentNode===this._tileContainer&&this._tileContainer.removeChild(k),f.Browser.android||(k.onload=null,k.src=f.Util.emptyImageUrl),delete this._tiles[i]},_addTile:function(l,m){var k=this._getTilePos(l),o=this._getTile();f.DomUtil.setPosition(o,k,f.Browser.chrome),this._tiles[l.x+":"+l.y]=o,this._loadTile(o,l),o.parentNode!==this._tileContainer&&m.appendChild(o)},_getZoomForUrl:function(){var i=this.options,k=this._map.getZoom();return i.zoomReverse&&(k=i.maxZoom-k),k+=i.zoomOffset,i.maxNativeZoom?Math.min(k,i.maxNativeZoom):k},_getTilePos:function(l){var m=this._map.getPixelOrigin(),k=this._getTileSize();return l.multiplyBy(k).subtract(m)},getTileUrl:function(i){return f.Util.template(this._url,f.extend({s:this._getSubdomain(i),z:i.z,x:i.x,y:i.y},this.options))},_getWrapTileNum:function(){var i=this._map.options.crs,k=i.getSize(this._map.getZoom());return k.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(i){var k=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(i.x=(i.x%k.x+k.x)%k.x),this.options.tms&&(i.y=k.y-i.y-1),i.z=this._getZoomForUrl()},_getSubdomain:function(i){var k=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[k]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var i=this._unusedTiles.pop();return this._resetTile(i),i}return this._createTile()},_resetTile:function(){},_createTile:function(){var i=f.DomUtil.create("img","leaflet-tile");return i.style.width=i.style.height=this._getTileSize()+"px",i.galleryimg="no",i.onselectstart=i.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==j&&f.DomUtil.setOpacity(i,this.options.opacity),f.Browser.mobileWebkit3d&&(i.style.WebkitBackfaceVisibility="hidden"),i},_loadTile:function(i,k){i._layer=this,i.onload=this._tileOnLoad,i.onerror=this._tileOnError,this._adjustTilePoint(k),i.src=this.getTileUrl(k),this.fire("tileloadstart",{tile:i,url:i.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&f.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var i=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),i.fire("tileload",{tile:this,url:this.src})),i._tileLoaded()},_tileOnError:function(){var i=this._layer;i.fire("tileerror",{tile:this,url:this.src});var k=i.options.errorTileUrl;k&&(this.src=k),i._tileLoaded()}}),f.tileLayer=function(i,k){return new f.TileLayer(i,k)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(l,m){this._url=l;var k=f.extend({},this.defaultWmsParams),q=m.tileSize||this.options.tileSize;k.width=k.height=m.detectRetina&&f.Browser.retina?2*q:q;for(var p in m){this.options.hasOwnProperty(p)||"crs"===p||(k[p]=m[p])}this.wmsParams=k,f.setOptions(this,m)},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var k=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[k]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,i)},getTileUrl:function(x){var v=this._map,s=this.options.tileSize,p=x.multiplyBy(s),m=p.add([s,s]),w=this._crs.project(v.unproject(p,x.z)),k=this._crs.project(v.unproject(m,x.z)),q=this._wmsVersion>=1.3&&this._crs===f.CRS.EPSG4326?[k.y,w.x,w.y,k.x].join(","):[w.x,k.y,k.x,w.y].join(","),u=f.Util.template(this._url,{s:this._getSubdomain(x)});return u+f.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+q},setParams:function(i,k){return f.extend(this.wmsParams,i),k||this.redraw(),this}}),f.tileLayer.wms=function(i,k){return new f.TileLayer.WMS(i,k)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(i){f.setOptions(this,i)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var i in this._tiles){this._redrawTile(this._tiles[i])}return this},_redrawTile:function(i){this.drawTile(i,i._tilePoint,this._map._zoom)},_createTile:function(){var i=f.DomUtil.create("canvas","leaflet-tile");return i.width=i.height=this.options.tileSize,i.onselectstart=i.onmousemove=f.Util.falseFn,i},_loadTile:function(i,k){i._layer=this,i._tilePoint=k,this._redrawTile(i),this.options.async||this.tileDrawn(i)},drawTile:function(){},tileDrawn:function(i){this._tileOnLoad.call(i)}}),f.tileLayer.canvas=function(i){return new f.TileLayer.Canvas(i)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(l,m,k){this._url=l,this._bounds=f.latLngBounds(m),f.setOptions(this,k)},onAdd:function(i){this._map=i,this._image||this._initImage(),i._panes.overlayPane.appendChild(this._image),i.on("viewreset",this._reset,this),i.options.zoomAnimation&&f.Browser.any3d&&i.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(i){i.getPanes().overlayPane.removeChild(this._image),i.off("viewreset",this._reset,this),i.options.zoomAnimation&&i.off("zoomanim",this._animateZoom,this)},addTo:function(i){return i.addLayer(this),this},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var i=this._map._panes.overlayPane;return this._image&&i.insertBefore(this._image,i.firstChild),this},setUrl:function(i){this._url=i,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(x){var v=this._map,s=this._image,p=v.getZoomScale(x.zoom),m=this._bounds.getNorthWest(),w=this._bounds.getSouthEast(),k=v._latLngToNewLayerPoint(m,x.zoom,x.center),q=v._latLngToNewLayerPoint(w,x.zoom,x.center)._subtract(k),u=k._add(q._multiplyBy(0.5*(1-1/p)));s.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(u)+" scale("+p+") "},_reset:function(){var l=this._image,m=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),k=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(m);f.DomUtil.setPosition(l,m),l.style.width=k.x+"px",l.style.height=k.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(l,m,k){return new f.ImageOverlay(l,m,k)},f.Icon=f.Class.extend({options:{className:""},initialize:function(i){f.setOptions(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(l,m){var k=this._getIconUrl(l);if(!k){if("icon"===l){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var o;return o=m&&"IMG"===m.tagName?this._createImg(k,m):this._createImg(k),this._setIconStyles(o,l),o},_setIconStyles:function(l,m){var k,q=this.options,p=f.point(q[m+"Size"]);k="shadow"===m?f.point(q.shadowAnchor||q.iconAnchor):f.point(q.iconAnchor),!k&&p&&(k=p.divideBy(2,!0)),l.className="leaflet-marker-"+m+" "+q.className,k&&(l.style.marginLeft=-k.x+"px",l.style.marginTop=-k.y+"px"),p&&(l.style.width=p.x+"px",l.style.height=p.y+"px")},_createImg:function(i,k){return k=k||d.createElement("img"),k.src=i,k},_getIconUrl:function(i){return f.Browser.retina&&this.options[i+"RetinaUrl"]?this.options[i+"RetinaUrl"]:this.options[i+"Url"]}}),f.icon=function(i){return new f.Icon(i)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(l){var m=l+"Url";if(this.options[m]){return this.options[m]}f.Browser.retina&&"icon"===l&&(l+="-2x");var k=f.Icon.Default.imagePath;if(!k){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return k+"/marker-"+l+".png"}}),f.Icon.Default.imagePath=function(){var k,p,u,q,l,i=d.getElementsByTagName("script"),m=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(k=0,p=i.length;p>k;k++){if(u=i[k].src,q=u.match(m)){return l=u.split(m)[0],(l?l+"/":"")+"images"}}}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(i,k){f.setOptions(this,k),this._latlng=f.latLng(i)},onAdd:function(i){this._map=i,i.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),i.options.zoomAnimation&&i.options.markerZoomAnimation&&i.on("zoomanim",this._animateZoom,this)},addTo:function(i){return i.addLayer(this),this},onRemove:function(i){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),i.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=f.latLng(i),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update(),this},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var x=this.options,v=this._map,s=v.options.zoomAnimation&&v.options.markerZoomAnimation,p=s?"leaflet-zoom-animated":"leaflet-zoom-hide",m=x.icon.createIcon(this._icon),w=!1;m!==this._icon&&(this._icon&&this._removeIcon(),w=!0,x.title&&(m.title=x.title),x.alt&&(m.alt=x.alt)),f.DomUtil.addClass(m,p),x.keyboard&&(m.tabIndex="0"),this._icon=m,this._initInteraction(),x.riseOnHover&&f.DomEvent.on(m,"mouseover",this._bringToFront,this).on(m,"mouseout",this._resetZIndex,this);var k=x.icon.createShadow(this._shadow),q=!1;k!==this._shadow&&(this._removeShadow(),q=!0),k&&f.DomUtil.addClass(k,p),this._shadow=k,x.opacity<1&&this._updateOpacity();var u=this._map._panes;w&&u.markerPane.appendChild(this._icon),k&&q&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(i){f.DomUtil.setPosition(this._icon,i),this._shadow&&f.DomUtil.setPosition(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon.style.zIndex=this._zIndex+i},_animateZoom:function(i){var k=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(k)},_initInteraction:function(){if(this.options.clickable){var l=this._icon,m=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(l,"leaflet-clickable"),f.DomEvent.on(l,"click",this._onMouseClick,this),f.DomEvent.on(l,"keypress",this._onKeyPress,this);for(var k=0;k<m.length;k++){f.DomEvent.on(l,m[k],this._fireMouseEvent,this)}f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(i){var k=this.dragging&&this.dragging.moved();(this.hasEventListeners(i.type)||k)&&f.DomEvent.stopPropagation(i),k||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(i.type,{originalEvent:i,latlng:this._latlng})},_onKeyPress:function(i){13===i.keyCode&&this.fire("click",{originalEvent:i,latlng:this._latlng})},_fireMouseEvent:function(i){this.fire(i.type,{originalEvent:i,latlng:this._latlng}),"contextmenu"===i.type&&this.hasEventListeners(i.type)&&f.DomEvent.preventDefault(i),"mousedown"!==i.type?f.DomEvent.stopPropagation(i):f.DomEvent.preventDefault(i)},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(i,k){return new f.Marker(i,k)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(i){var k=i&&"DIV"===i.tagName?i:d.createElement("div"),l=this.options;return k.innerHTML=l.html!==!1?l.html:"",l.bgPos&&(k.style.backgroundPosition=-l.bgPos.x+"px "+-l.bgPos.y+"px"),this._setIconStyles(k,"icon"),k},createShadow:function(){return null}}),f.divIcon=function(i){return new f.DivIcon(i)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(i,k){f.setOptions(this,i),this._source=k,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(i){this._map=i,this._container||this._initLayout();var k=i.options.fadeAnimation;k&&f.DomUtil.setOpacity(this._container,0),i._panes.popupPane.appendChild(this._container),i.on(this._getEvents(),this),this.update(),k&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),i.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(i){return i.addLayer(this),this},openOn:function(i){return i.openPopup(this),this},onRemove:function(i){i._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),i.off(this._getEvents(),this),i.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),i.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=f.latLng(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var i={viewreset:this._updatePosition};return this._animated&&(i.zoomanim=this._zoomAnimation),("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this._close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var l,m="leaflet-popup",k=m+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),q=this._container=f.DomUtil.create("div",k);this.options.closeButton&&(l=this._closeButton=f.DomUtil.create("a",m+"-close-button",q),l.href="#close",l.innerHTML="&#215;",f.DomEvent.disableClickPropagation(l),f.DomEvent.on(l,"click",this._onCloseButtonClick,this));var p=this._wrapper=f.DomUtil.create("div",m+"-content-wrapper",q);f.DomEvent.disableClickPropagation(p),this._contentNode=f.DomUtil.create("div",m+"-content",p),f.DomEvent.disableScrollPropagation(this._contentNode),f.DomEvent.on(p,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",m+"-tip-container",q),this._tip=f.DomUtil.create("div",m+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content){this._contentNode.innerHTML=this._content}else{for(;this._contentNode.hasChildNodes();){this._contentNode.removeChild(this._contentNode.firstChild)}this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var m=this._contentNode,p=m.style;p.width="",p.whiteSpace="nowrap";var l=m.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),p.width=l+1+"px",p.whiteSpace="",p.height="";var r=m.offsetHeight,q=this.options.maxHeight,k="leaflet-popup-scrolled";q&&r>q?(p.height=q+"px",f.DomUtil.addClass(m,k)):f.DomUtil.removeClass(m,k),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),m=this._animated,k=f.point(this.options.offset);m&&f.DomUtil.setPosition(this._container,l),this._containerBottom=-k.y-(m?0:l.y),this._containerLeft=-Math.round(this._containerWidth/2)+k.x+(m?0:l.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(i){var k=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);f.DomUtil.setPosition(this._container,k)},_adjustPan:function(){if(this.options.autoPan){var A=this._map,w=this._container.offsetHeight,s=this._containerWidth,p=new f.Point(this._containerLeft,-w-this._containerBottom);this._animated&&p._add(f.DomUtil.getPosition(this._container));var m=A.layerPointToContainerPoint(p),y=f.point(this.options.autoPanPadding),k=f.point(this.options.autoPanPaddingTopLeft||y),q=f.point(this.options.autoPanPaddingBottomRight||y),v=A.getSize(),z=0,x=0;m.x+s+q.x>v.x&&(z=m.x+s-v.x+q.x),m.x-z-k.x<0&&(z=m.x-k.x),m.y+w+q.y>v.y&&(x=m.y+w-v.y+q.y),m.y-x-k.y<0&&(x=m.y-k.y),(z||x)&&A.fire("autopanstart").panBy([z,x])}},_onCloseButtonClick:function(i){this._close(),f.DomEvent.stop(i)}}),f.popup=function(i,k){return new f.Popup(i,k)},f.Map.include({openPopup:function(l,m,k){if(this.closePopup(),!(l instanceof f.Popup)){var o=l;l=new f.Popup(k).setLatLng(m).setContent(o)}return l._isOpen=!0,this._popup=l,this.addLayer(l)},closePopup:function(i){return i&&i!==this._popup||(i=this._popup,this._popup=null),i&&(this.removeLayer(i),i._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(l,m){var k=f.point(this.options.icon.options.popupAnchor||[0,0]);return k=k.add(f.Popup.prototype.options.offset),m&&m.offset&&(k=k.add(m.offset)),m=f.extend({offset:k},m),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),l instanceof f.Popup?(f.setOptions(l,m),this._popup=l):this._popup=new f.Popup(m,this).setContent(l),this},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(i){this._popup.setLatLng(i.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(l){this._layers={};var m,k;if(l){for(m=0,k=l.length;k>m;m++){this.addLayer(l[m])}}},addLayer:function(i){var k=this.getLayerId(i);return this._layers[k]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var k=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[k]&&this._map.removeLayer(this._layers[k]),delete this._layers[k],this},hasLayer:function(i){return i?i in this._layers||this.getLayerId(i) in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(l){var m,k,o=Array.prototype.slice.call(arguments,1);for(m in this._layers){k=this._layers[m],k[l]&&k[l].apply(k,o)}return this},onAdd:function(i){this._map=i,this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i),this._map=null},addTo:function(i){return i.addLayer(this),this},eachLayer:function(l,m){for(var k in this._layers){l.call(m,this._layers[k])}return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];for(var k in this._layers){i.push(this._layers[k])}return i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return f.stamp(i)}}),f.layerGroup=function(i){return new f.LayerGroup(i)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(i){return this.hasLayer(i)?this:("on" in i&&i.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,i),this._popupContent&&i.bindPopup&&i.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,i),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:i})):this},bindPopup:function(i,k){return this._popupContent=i,this._popupOptions=k,this.invoke("bindPopup",i,k)},openPopup:function(i){for(var k in this._layers){this._layers[k].openPopup(i);break}return this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new f.LatLngBounds;return this.eachLayer(function(k){i.extend(k instanceof f.Marker?k.getLatLng():k.getBounds())}),i},_propagateEvent:function(i){i=f.extend({layer:i.target,target:this},i),this.fire(i.type,i)}}),f.featureGroup=function(i){return new f.FeatureGroup(i)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:function(){var l=f.Browser.mobile?1280:2000,k=(l/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(0.5,k))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:0.5,fill:!1,fillColor:null,fillOpacity:0.2,clickable:!0},initialize:function(i){f.setOptions(this,i)},onAdd:function(i){this._map=i,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),i.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(i){return i.addLayer(this),this},onRemove:function(i){i._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),i.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(i){return f.setOptions(this,i),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var l=f.Path.CLIP_PADDING,m=this.getSize(),k=f.DomUtil.getPosition(this._mapPane),q=k.multiplyBy(-1)._subtract(m.multiplyBy(l)._round()),p=q.add(m.multiplyBy(1+2*l)._round());this._pathViewport=new f.Bounds(q,p)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!d.createElementNS||!d.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var i=this._map._pathRoot,k=this._container;return k&&i.lastChild!==k&&i.appendChild(k),this},bringToBack:function(){var l=this._map._pathRoot,m=this._container,k=l.firstChild;return m&&k!==m&&l.insertBefore(m,k),this},getPathString:function(){},_createElement:function(i){return d.createElementNS(f.Path.SVG_NS,i)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&f.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var i=this.getPathString();i||(i="M0 0"),this._path.setAttribute("d",i)},_initEvents:function(){if(this.options.clickable){(f.Browser.svg||!f.Browser.vml)&&f.DomUtil.addClass(this._path,"leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var i=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],k=0;k<i.length;k++){f.DomEvent.on(this._container,i[k],this._fireMouseEvent,this)}}},_onMouseClick:function(i){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(i)},_fireMouseEvent:function(l){if(this.hasEventListeners(l.type)){var m=this._map,k=m.mouseEventToContainerPoint(l),q=m.containerPointToLayerPoint(k),p=m.layerPointToLatLng(q);this.fire(l.type,{latlng:p,layerPoint:q,containerPoint:k,originalEvent:l}),"contextmenu"===l.type&&f.DomEvent.preventDefault(l),"mousemove"!==l.type&&f.DomEvent.stopPropagation(l)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):f.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(l){var m=this.getZoomScale(l.zoom),k=this._getCenterOffset(l.center)._multiplyBy(-m)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(k)+" scale("+m+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var m=this._pathViewport,q=m.min,l=m.max,u=l.x-q.x,s=l.y-q.y,k=this._pathRoot,p=this._panes.overlayPane;f.Browser.mobileWebkit&&p.removeChild(k),f.DomUtil.setPosition(k,q),k.setAttribute("width",u),k.setAttribute("height",s),k.setAttribute("viewBox",[q.x,q.y,u,s].join(" ")),f.Browser.mobileWebkit&&p.appendChild(k)}}}),f.Path.include({bindPopup:function(i,k){return i instanceof f.Popup?this._popup=i:((!this._popup||k)&&(this._popup=new f.Popup(k,this)),this._popup.setContent(i)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(i){return this._popup&&(i=i||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:i})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(i){this._popup.setLatLng(i.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var i=d.createElement("div");i.innerHTML='<v:shape adj="1"/>';var k=i.firstChild;return k.style.behavior="url(#default#VML)",k&&"object"==typeof k.adj}catch(l){return !1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:0.02},_createElement:function(){try{return d.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(k){return d.createElement("<lvml:"+k+' class="lvml">')}}catch(i){return function(k){return d.createElement("<"+k+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var i=this._container=this._createElement("shape");f.DomUtil.addClass(i,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&f.DomUtil.addClass(i,"leaflet-clickable"),i.coordsize="1 1",this._path=this._createElement("path"),i.appendChild(this._path),this._map._pathRoot.appendChild(i)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var l=this._stroke,m=this._fill,k=this.options,o=this._container;o.stroked=k.stroke,o.filled=k.fill,k.stroke?(l||(l=this._stroke=this._createElement("stroke"),l.endcap="round",o.appendChild(l)),l.weight=k.weight+"px",l.color=k.color,l.opacity=k.opacity,l.dashStyle=k.dashArray?f.Util.isArray(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):"",k.lineCap&&(l.endcap=k.lineCap.replace("butt","flat")),k.lineJoin&&(l.joinstyle=k.lineJoin)):l&&(o.removeChild(l),this._stroke=null),k.fill?(m||(m=this._fill=this._createElement("fill"),o.appendChild(m)),m.color=k.fillColor||k.color,m.opacity=k.fillOpacity):m&&(o.removeChild(m),this._fill=null)},_updatePath:function(){var i=this._container.style;i.display="none",this._path.v=this.getPathString()+" ",i.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var i=this._pathRoot=d.createElement("div");i.className="leaflet-vml-container",this._panes.overlayPane.appendChild(i),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return !!d.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!e.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(i){return f.setOptions(this,i),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(i){i.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var i=this.options;i.stroke&&(this._ctx.lineWidth=i.weight,this._ctx.strokeStyle=i.color),i.fill&&(this._ctx.fillStyle=i.fillColor||i.color)},_drawPath:function(){var m,p,l,r,q,k;for(this._ctx.beginPath(),m=0,l=this._parts.length;l>m;m++){for(p=0,r=this._parts[m].length;r>p;p++){q=this._parts[m][p],k=(0===p?"move":"line")+"To",this._ctx[k](q.x,q.y)}this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return !this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var i=this._ctx,k=this.options;this._drawPath(),i.save(),this._updateStyle(),k.fill&&(i.globalAlpha=k.fillOpacity,i.fill()),k.stroke&&(i.globalAlpha=k.opacity,i.stroke()),i.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(i){this._containsPoint(i.layerPoint)&&this.fire("click",i)},_onMouseMove:function(i){this._map&&!this._map._animatingZoom&&(this._containsPoint(i.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",i)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",i)))}}),f.Map.include(f.Path.SVG&&!e.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var i,k=this._pathRoot;k||(k=this._pathRoot=d.createElement("canvas"),k.style.position="absolute",i=this._canvasCtx=k.getContext("2d"),i.lineCap="round",i.lineJoin="round",this._panes.overlayPane.appendChild(k),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var l=this._pathViewport,m=l.min,k=l.max.subtract(m),o=this._pathRoot;f.DomUtil.setPosition(o,m),o.width=k.x,o.height=k.y,o.getContext("2d").translate(-m.x,-m.y)}}}),f.LineUtil={simplify:function(l,m){if(!m||!l.length){return l.slice()}var k=m*m;return l=this._reducePoints(l,k),l=this._simplifyDP(l,k)},pointToSegmentDistance:function(l,m,k){return Math.sqrt(this._sqClosestPointOnSegment(l,m,k,!0))},closestPointOnSegment:function(l,m,k){return this._sqClosestPointOnSegment(l,m,k)},_simplifyDP:function(m,q){var l=m.length,u=typeof Uint8Array!=j+""?Uint8Array:Array,n=new u(l);n[0]=n[l-1]=1,this._simplifyDPStep(m,n,q,0,l-1);var k,p=[];for(k=0;l>k;k++){n[k]&&p.push(m[k])}return p},_simplifyDPStep:function(x,v,u,p,m){var y,w,k,q=0;for(w=p+1;m-1>=w;w++){k=this._sqClosestPointOnSegment(x[w],x[p],x[m],!0),k>q&&(y=w,q=k)}q>u&&(v[y]=1,this._simplifyDPStep(x,v,u,p,y),this._simplifyDPStep(x,v,u,y,m))},_reducePoints:function(l,p){for(var k=[l[0]],r=1,q=0,m=l.length;m>r;r++){this._sqDist(l[r],l[q])>p&&(k.push(l[r]),q=r)}return m-1>q&&k.push(l[m-1]),k},clipSegment:function(x,v,u,p){var m,y,w,k=p?this._lastCode:this._getBitCode(x,u),q=this._getBitCode(v,u);for(this._lastCode=q;;){if(!(k|q)){return[x,v]}if(k&q){return !1}m=k||q,y=this._getEdgeIntersection(x,v,m,u),w=this._getBitCode(y,u),m===k?(x=y,k=w):(v=y,q=w)}},_getEdgeIntersection:function(q,u,p,w){var v=u.x-q.x,m=u.y-q.y,s=w.min,k=w.max;return 8&p?new f.Point(q.x+v*(k.y-q.y)/m,k.y):4&p?new f.Point(q.x+v*(s.y-q.y)/m,s.y):2&p?new f.Point(k.x,q.y+m*(k.x-q.x)/v):1&p?new f.Point(s.x,q.y+m*(s.x-q.x)/v):void 0},_getBitCode:function(l,m){var k=0;return l.x<m.min.x?k|=1:l.x>m.max.x&&(k|=2),l.y<m.min.y?k|=4:l.y>m.max.y&&(k|=8),k},_sqDist:function(l,m){var k=m.x-l.x,o=m.y-l.y;return k*k+o*o},_sqClosestPointOnSegment:function(z,w,s,p){var m,x=w.x,k=w.y,q=s.x-x,v=s.y-k,y=q*q+v*v;return y>0&&(m=((z.x-x)*q+(z.y-k)*v)/y,m>1?(x=s.x,k=s.y):m>0&&(x+=q*m,k+=v*m)),q=z.x-x,v=z.y-k,p?q*q+v*v:new f.Point(x,k)}},f.Polyline=f.Path.extend({initialize:function(i,k){f.Path.prototype.initialize.call(this,k),this._latlngs=this._convertLatLngs(i)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var i=0,k=this._latlngs.length;k>i;i++){this._originalPoints[i]=this._map.latLngToLayerPoint(this._latlngs[i])}},getPathString:function(){for(var l=0,m=this._parts.length,k="";m>l;l++){k+=this._getPathPartStr(this._parts[l])}return k},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._latlngs=this._convertLatLngs(i),this.redraw()},addLatLng:function(i){return this._latlngs.push(f.latLng(i)),this.redraw()},spliceLatLngs:function(){var i=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),i},closestLayerPoint:function(C){for(var y,w,s=1/0,q=this._parts,A=null,k=0,v=q.length;v>k;k++){for(var x=q[k],B=1,z=x.length;z>B;B++){y=x[B-1],w=x[B];var m=f.LineUtil._sqClosestPointOnSegment(C,y,w,!0);s>m&&(s=m,A=f.LineUtil._sqClosestPointOnSegment(C,y,w))}}return A&&(A.distance=Math.sqrt(s)),A},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(l,m){var k,q,p=m?l:[];for(k=0,q=l.length;q>k;k++){if(f.Util.isArray(l[k])&&"number"!=typeof l[k][0]){return}p[k]=f.latLng(l[k])}return p},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(m){for(var p,l=f.Path.VML,r=0,q=m.length,k="";q>r;r++){p=m[r],l&&p._round(),k+=(r?"L":"M")+p.x+" "+p.y}return k},_clipPoints:function(){var q,u,p,w=this._originalPoints,v=w.length;if(this.options.noClip){return this._parts=[w],void 0}this._parts=[];var m=this._parts,s=this._map._pathViewport,k=f.LineUtil;for(q=0,u=0;v-1>q;q++){p=k.clipSegment(w[q],w[q+1],s,q),p&&(m[u]=m[u]||[],m[u].push(p[0]),(p[1]!==w[q+1]||q===v-2)&&(m[u].push(p[1]),u++))}},_simplifyPoints:function(){for(var l=this._parts,m=f.LineUtil,k=0,o=l.length;o>k;k++){l[k]=m.simplify(l[k],this.options.smoothFactor)}},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(i,k){return new f.Polyline(i,k)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(D,y){var w,s,q,B,k,v,x,C,A,m=[1,4,2,8],z=f.LineUtil;for(s=0,x=D.length;x>s;s++){D[s]._code=z._getBitCode(D[s],y)}for(B=0;4>B;B++){for(C=m[B],w=[],s=0,x=D.length,q=x-1;x>s;q=s++){k=D[s],v=D[q],k._code&C?v._code&C||(A=z._getEdgeIntersection(v,k,C,y),A._code=z._getBitCode(A,y),w.push(A)):(v._code&C&&(A=z._getEdgeIntersection(v,k,C,y),A._code=z._getBitCode(A,y),w.push(A)),w.push(k))}D=w}return D},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(i,k){f.Polyline.prototype.initialize.call(this,i,k),this._initWithHoles(i)},_initWithHoles:function(l){var m,k,o;if(l&&f.Util.isArray(l[0])&&"number"!=typeof l[0][0]){for(this._latlngs=this._convertLatLngs(l[0]),this._holes=l.slice(1),m=0,k=this._holes.length;k>m;m++){o=this._holes[m]=this._convertLatLngs(this._holes[m]),o[0].equals(o[o.length-1])&&o.pop()}}l=this._latlngs,l.length>=2&&l[0].equals(l[l.length-1])&&l.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var l,m,k,o;for(l=0,k=this._holes.length;k>l;l++){for(this._holePoints[l]=[],m=0,o=this._holes[l].length;o>m;m++){this._holePoints[l][m]=this._map.latLngToLayerPoint(this._holes[l][m])}}}},setLatLngs:function(i){return i&&f.Util.isArray(i[0])&&"number"!=typeof i[0][0]?(this._initWithHoles(i),this.redraw()):f.Polyline.prototype.setLatLngs.call(this,i)},_clipPoints:function(){var l=this._originalPoints,m=[];if(this._parts=[l].concat(this._holePoints),!this.options.noClip){for(var k=0,q=this._parts.length;q>k;k++){var p=f.PolyUtil.clipPolygon(this._parts[k],this._map._pathViewport);p.length&&m.push(p)}this._parts=m}},_getPathPartStr:function(i){var k=f.Polyline.prototype._getPathPartStr.call(this,i);return k+(f.Browser.svg?"z":"x")}}),f.polygon=function(i,k){return new f.Polygon(i,k)},function(){function i(k){return f.FeatureGroup.extend({initialize:function(l,m){this._layers={},this._options=m,this.setLatLngs(l)},setLatLngs:function(m){var l=0,o=m.length;for(this.eachLayer(function(n){o>l?n.setLatLngs(m[l++]):this.removeLayer(n)},this);o>l;){this.addLayer(new k(m[l++],this._options))}return this},getLatLngs:function(){var l=[];return this.eachLayer(function(m){l.push(m.getLatLngs())}),l}})}f.MultiPolyline=i(f.Polyline),f.MultiPolygon=i(f.Polygon),f.multiPolyline=function(k,l){return new f.MultiPolyline(k,l)},f.multiPolygon=function(k,l){return new f.MultiPolygon(k,l)}}(),f.Rectangle=f.Polygon.extend({initialize:function(i,k){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(i),k)},setBounds:function(i){this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=f.latLngBounds(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}}),f.rectangle=function(i,k){return new f.Rectangle(i,k)},f.Circle=f.Path.extend({initialize:function(l,m,k){f.Path.prototype.initialize.call(this,k),this._latlng=f.latLng(l),this._mRadius=m},options:{fill:!0},setLatLng:function(i){return this._latlng=f.latLng(i),this.redraw()},setRadius:function(i){return this._mRadius=i,this.redraw()},projectLatlngs:function(){var l=this._getLngRadius(),m=this._latlng,k=this._map.latLngToLayerPoint([m.lat,m.lng-l]);this._point=this._map.latLngToLayerPoint(m),this._radius=Math.max(this._point.x-k.x,1)},getBounds:function(){var l=this._getLngRadius(),m=this._mRadius/40075017*360,k=this._latlng;return new f.LatLngBounds([k.lat-m,k.lng-l],[k.lat+m,k.lng+l])},getLatLng:function(){return this._latlng},getPathString:function(){var i=this._point,k=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+i.x+","+(i.y-k)+"A"+k+","+k+",0,1,1,"+(i.x-0.1)+","+(i.y-k)+" z":(i._round(),k=Math.round(k),"AL "+i.x+","+i.y+" "+k+","+k+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map){return !1}var l=this._map._pathViewport,m=this._radius,k=this._point;return k.x-m>l.max.x||k.y-m>l.max.y||k.x+m<l.min.x||k.y+m<l.min.y}}),f.circle=function(l,m,k){return new f.Circle(l,m,k)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(i,k){f.Circle.prototype.initialize.call(this,i,null,k),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(i){return f.Circle.prototype.setLatLng.call(this,i),this._popup&&this._popup._isOpen&&this._popup.setLatLng(i),this},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius}}),f.circleMarker=function(i,k){return new f.CircleMarker(i,k)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(z,w){var s,p,m,x,k,q,v,y=this.options.weight/2;for(f.Browser.touch&&(y+=10),s=0,x=this._parts.length;x>s;s++){for(v=this._parts[s],p=0,k=v.length,m=k-1;k>p;m=p++){if((w||0!==p)&&(q=f.LineUtil.pointToSegmentDistance(z,v[m],v[p]),y>=q)){return !0}}}return !1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(z){var w,s,p,m,x,k,q,v,y=!1;if(f.Polyline.prototype._containsPoint.call(this,z,!0)){return !0}for(m=0,q=this._parts.length;q>m;m++){for(w=this._parts[m],x=0,v=w.length,k=v-1;v>x;k=x++){s=w[x],p=w[k],s.y>z.y!=p.y>z.y&&z.x<(p.x-s.x)*(z.y-s.y)/(p.y-s.y)+s.x&&(y=!y)}}return y}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var i=this._point;this._ctx.beginPath(),this._ctx.arc(i.x,i.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(l){var m=this._point,k=this.options.stroke?this.options.weight/2:0;return l.distanceTo(m)<=this._radius+k}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(i,k){f.setOptions(this,k),this._layers={},i&&this.addData(i)},addData:function(m){var q,l,u,s=f.Util.isArray(m)?m:m.features;if(s){for(q=0,l=s.length;l>q;q++){u=s[q],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(s[q])}return this}var k=this.options;if(!k.filter||k.filter(m)){var p=f.GeoJSON.geometryToLayer(m,k.pointToLayer,k.coordsToLatLng,k);return p.feature=f.GeoJSON.asFeature(m),p.defaultOptions=p.options,this.resetStyle(p),k.onEachFeature&&k.onEachFeature(m,p),this.addLayer(p)}},resetStyle:function(i){var k=this.options.style;k&&(f.Util.extend(i.options,i.defaultOptions),this._setLayerStyle(i,k))},setStyle:function(i){this.eachLayer(function(k){this._setLayerStyle(k,i)},this)},_setLayerStyle:function(i,k){"function"==typeof k&&(k=k(i.feature)),i.setStyle&&i.setStyle(k)}}),f.extend(f.GeoJSON,{geometryToLayer:function(A,w,s,p){var m,y,k,q,v="Feature"===A.type?A.geometry:A,z=v.coordinates,x=[];switch(s=s||this.coordsToLatLng,v.type){case"Point":return m=s(z),w?w(A,m):new f.Marker(m);case"MultiPoint":for(k=0,q=z.length;q>k;k++){m=s(z[k]),x.push(w?w(A,m):new f.Marker(m))}return new f.FeatureGroup(x);case"LineString":return y=this.coordsToLatLngs(z,0,s),new f.Polyline(y,p);case"Polygon":if(2===z.length&&!z[1].length){throw new Error("Invalid GeoJSON object.")}return y=this.coordsToLatLngs(z,1,s),new f.Polygon(y,p);case"MultiLineString":return y=this.coordsToLatLngs(z,1,s),new f.MultiPolyline(y,p);case"MultiPolygon":return y=this.coordsToLatLngs(z,2,s),new f.MultiPolygon(y,p);case"GeometryCollection":for(k=0,q=v.geometries.length;q>k;k++){x.push(this.geometryToLayer({geometry:v.geometries[k],type:"Feature",properties:A.properties},w,s,p))}return new f.FeatureGroup(x);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(i){return new f.LatLng(i[1],i[0],i[2])},coordsToLatLngs:function(m,q,l){var u,r,p,k=[];for(r=0,p=m.length;p>r;r++){u=q?this.coordsToLatLngs(m[r],q-1,l):(l||this.coordsToLatLng)(m[r]),k.push(u)}return k},latLngToCoords:function(i){var k=[i.lng,i.lat];return i.alt!==j&&k.push(i.alt),k},latLngsToCoords:function(l){for(var m=[],k=0,o=l.length;o>k;k++){m.push(f.GeoJSON.latLngToCoords(l[k]))}return m},getFeature:function(i,k){return i.feature?f.extend({},i.feature,{geometry:k}):f.GeoJSON.asFeature(k)},asFeature:function(i){return"Feature"===i.type?i:{type:"Feature",properties:{},geometry:i}}});var g={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(g),f.Circle.include(g),f.CircleMarker.include(g),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var l,m,k,o=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(o[0].push(o[0][0]),this._holes){for(l=0,m=this._holes.length;m>l;l++){k=f.GeoJSON.latLngsToCoords(this._holes[l]),k.push(k[0]),o.push(k)}}return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:o})}}),function(){function i(k){return function(){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:k,coordinates:l})}}f.MultiPolyline.include({toGeoJSON:i("MultiLineString")}),f.MultiPolygon.include({toGeoJSON:i("MultiPolygon")}),f.LayerGroup.include({toGeoJSON:function(){var l,k=this.feature&&this.feature.geometry,p=[];if(k&&"MultiPoint"===k.type){return i("MultiPoint").call(this)}var m=k&&"GeometryCollection"===k.type;return this.eachLayer(function(n){n.toGeoJSON&&(l=n.toGeoJSON(),p.push(m?l.geometry:f.GeoJSON.asFeature(l)))}),m?f.GeoJSON.getFeature(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}})}(),f.geoJson=function(i,k){return new f.GeoJSON(i,k)},f.DomEvent={addListener:function(x,v,s,p){var m,w,k,q=f.stamp(s),u="_leaflet_"+v+q;return x[u]?this:(m=function(i){return s.call(p||x,i||f.DomEvent._getEvent())},f.Browser.pointer&&0===v.indexOf("touch")?this.addPointerListener(x,v,m,q):(f.Browser.touch&&"dblclick"===v&&this.addDoubleTapListener&&this.addDoubleTapListener(x,m,q),"addEventListener" in x?"mousewheel"===v?(x.addEventListener("DOMMouseScroll",m,!1),x.addEventListener(v,m,!1)):"mouseenter"===v||"mouseleave"===v?(w=m,k="mouseenter"===v?"mouseover":"mouseout",m=function(i){return f.DomEvent._checkMouse(x,i)?w(i):void 0},x.addEventListener(k,m,!1)):"click"===v&&f.Browser.android?(w=m,m=function(i){return f.DomEvent._filterClick(i,w)},x.addEventListener(v,m,!1)):x.addEventListener(v,m,!1):"attachEvent" in x&&x.attachEvent("on"+v,m),x[u]=m,this))},removeListener:function(m,p,l){var r=f.stamp(l),q="_leaflet_"+p+r,k=m[q];return k?(f.Browser.pointer&&0===p.indexOf("touch")?this.removePointerListener(m,p,r):f.Browser.touch&&"dblclick"===p&&this.removeDoubleTapListener?this.removeDoubleTapListener(m,r):"removeEventListener" in m?"mousewheel"===p?(m.removeEventListener("DOMMouseScroll",k,!1),m.removeEventListener(p,k,!1)):"mouseenter"===p||"mouseleave"===p?m.removeEventListener("mouseenter"===p?"mouseover":"mouseout",k,!1):m.removeEventListener(p,k,!1):"detachEvent" in m&&m.detachEvent("on"+p,k),m[q]=null,this):this},stopPropagation:function(i){return i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,f.DomEvent._skipped(i),this},disableScrollPropagation:function(i){var k=f.DomEvent.stopPropagation;return f.DomEvent.on(i,"mousewheel",k).on(i,"MozMousePixelScroll",k)},disableClickPropagation:function(l){for(var m=f.DomEvent.stopPropagation,k=f.Draggable.START.length-1;k>=0;k--){f.DomEvent.on(l,f.Draggable.START[k],m)}return f.DomEvent.on(l,"click",f.DomEvent._fakeStop).on(l,"dblclick",m)},preventDefault:function(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this},stop:function(i){return f.DomEvent.preventDefault(i).stopPropagation(i)},getMousePosition:function(l,m){if(!m){return new f.Point(l.clientX,l.clientY)}var k=m.getBoundingClientRect();return new f.Point(l.clientX-k.left-m.clientLeft,l.clientY-k.top-m.clientTop)},getWheelDelta:function(i){var k=0;return i.wheelDelta&&(k=i.wheelDelta/120),i.detail&&(k=-i.detail/3),k},_skipEvents:{},_fakeStop:function(i){f.DomEvent._skipEvents[i.type]=!0},_skipped:function(i){var k=this._skipEvents[i.type];return this._skipEvents[i.type]=!1,k},_checkMouse:function(l,m){var k=m.relatedTarget;if(!k){return !0}try{for(;k&&k!==l;){k=k.parentNode}}catch(o){return !1}return k!==l},_getEvent:function(){var l=e.event;if(!l){for(var k=arguments.callee.caller;k&&(l=k.arguments[0],!l||e.Event!==l.constructor);){k=k.caller}}return l},_filterClick:function(l,m){var k=l.timeStamp||l.originalEvent.timeStamp,o=f.DomEvent._lastClick&&k-f.DomEvent._lastClick;return o&&o>100&&1000>o||l.target._simulatedClick&&!l._simulated?(f.DomEvent.stop(l),void 0):(f.DomEvent._lastClick=k,m(l))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(i,k){this._element=i,this._dragStartTarget=k||i},enable:function(){if(!this._enabled){for(var i=f.Draggable.START.length-1;i>=0;i--){f.DomEvent.on(this._dragStartTarget,f.Draggable.START[i],this._onDown,this)}this._enabled=!0}},disable:function(){if(this._enabled){for(var i=f.Draggable.START.length-1;i>=0;i--){f.DomEvent.off(this._dragStartTarget,f.Draggable.START[i],this._onDown,this)}this._enabled=!1,this._moved=!1}},_onDown:function(i){if(this._moved=!1,!(i.shiftKey||1!==i.which&&1!==i.button&&!i.touches||(f.DomEvent.stopPropagation(i),f.Draggable._disabled||(f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection(),this._moving)))){var k=i.touches?i.touches[0]:i;this._startPoint=new f.Point(k.clientX,k.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(d,f.Draggable.MOVE[i.type],this._onMove,this).on(d,f.Draggable.END[i.type],this._onUp,this)}},_onMove:function(i){if(i.touches&&i.touches.length>1){return this._moved=!0,void 0}var k=i.touches&&1===i.touches.length?i.touches[0]:i,m=new f.Point(k.clientX,k.clientY),l=m.subtract(this._startPoint);(l.x||l.y)&&(f.DomEvent.preventDefault(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(l),f.DomUtil.addClass(d.body,"leaflet-dragging"),f.DomUtil.addClass(i.target||i.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(i){f.DomUtil.removeClass(d.body,"leaflet-dragging"),f.DomUtil.removeClass(i.target||i.srcElement,"leaflet-drag-target");for(var k in f.Draggable.MOVE){f.DomEvent.off(d,f.Draggable.MOVE[k],this._onMove).off(d,f.Draggable.END[k],this._onUp)}f.DomUtil.enableImageDrag(),f.DomUtil.enableTextSelection(),this._moved&&this._moving&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(i){this._map=i},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return !!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new f.Draggable(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),i.on("viewreset",this._onViewReset,this),i.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var i=this._map;i._panAnim&&i._panAnim.stop(),i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var i=this._lastTime=+new Date,k=this._lastPos=this._draggable._newPos;this._positions.push(k),this._times.push(i),i-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var i=this._map.getSize()._divideBy(2),k=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=k.subtract(i).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var m=this._worldWidth,q=Math.round(m/2),l=this._initialWorldOffset,u=this._draggable._newPos.x,r=(u-q+l)%m+q-l,p=(u+q+l)%m-q-l,k=Math.abs(r+l)<Math.abs(p+l)?r:p;this._draggable._newPos.x=k},_onDragEnd:function(F){var A=this._map,y=A.options,v=+new Date-this._lastTime,s=!y.inertia||v>y.inertiaThreshold||!this._positions[0];if(A.fire("dragend",F),s){A.fire("moveend")}else{var D=this._lastPos.subtract(this._positions[0]),k=(this._lastTime+v-this._times[0])/1000,x=y.easeLinearity,z=D.multiplyBy(x/k),E=z.distanceTo([0,0]),C=Math.min(y.inertiaMaxSpeed,E),q=z.multiplyBy(C/E),B=C/(y.inertiaDeceleration*x),w=q.multiplyBy(-B/2).round();w.x&&w.y?(w=A._limitOffset(w,A.options.maxBounds),f.Util.requestAnimFrame(function(){A.panBy(w,{duration:B,easeLinearity:x,noMoveStart:!0})})):A.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var m=this._map,k=m.getZoom()+(l.originalEvent.shiftKey?-1:1);"center"===m.options.doubleClickZoom?m.setZoom(k):m.setZoomAround(l.containerPoint,k)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(l){var m=f.DomEvent.getWheelDelta(l);this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var k=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),k),f.DomEvent.preventDefault(l),f.DomEvent.stopPropagation(l)},_performZoom:function(){var l=this._map,m=this._delta,k=l.getZoom();m=m>0?Math.ceil(m):Math.floor(m),m=Math.max(Math.min(m,4),-4),m=l._limitZoom(k+m)-k,this._delta=0,this._startTime=null,m&&("center"===l.options.scrollWheelZoom?l.setZoom(k+m):l.setZoomAround(this._lastMousePos,k+m))}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msPointer?"MSPointerDown":f.Browser.pointer?"pointerdown":"touchstart",_touchend:f.Browser.msPointer?"MSPointerUp":f.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(E,z,s){function q(m){var o;if(f.Browser.pointer?(v.push(m.pointerId),o=v.length):o=m.touches.length,!(o>1)){var l=Date.now(),p=l-(i||l);w=m.touches?m.touches[0]:m,x=p>0&&D>=p,i=l}}function C(p){if(f.Browser.pointer){var m=v.indexOf(p.pointerId);if(-1===m){return}v.splice(m,1)}if(x){if(f.Browser.pointer){var u,r={};for(var l in w){u=w[l],r[l]="function"==typeof u?u.bind(w):u}w=r}w.type="dblclick",z(w),i=null}}var i,w,x=!1,D=250,B="_leaflet_",k=this._touchstart,A=this._touchend,v=[];E[B+k+s]=q,E[B+A+s]=C;var y=f.Browser.pointer?d.documentElement:E;return E.addEventListener(k,q,!1),y.addEventListener(A,C,!1),f.Browser.pointer&&y.addEventListener(f.DomEvent.POINTER_CANCEL,C,!1),this},removeDoubleTapListener:function(i,k){var l="_leaflet_";return i.removeEventListener(this._touchstart,i[l+this._touchstart+k],!1),(f.Browser.pointer?d.documentElement:i).removeEventListener(this._touchend,i[l+this._touchend+k],!1),f.Browser.pointer&&d.documentElement.removeEventListener(f.DomEvent.POINTER_CANCEL,i[l+this._touchend+k],!1),this}}),f.extend(f.DomEvent,{POINTER_DOWN:f.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:f.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:f.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:f.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(l,m,k,o){switch(m){case"touchstart":return this.addPointerListenerStart(l,m,k,o);case"touchend":return this.addPointerListenerEnd(l,m,k,o);case"touchmove":return this.addPointerListenerMove(l,m,k,o);default:throw"Unknown touch event type"}},addPointerListenerStart:function(m,s,v,u){var k="_leaflet_",q=this._pointers,i=function(n){f.DomEvent.preventDefault(n);for(var o=!1,l=0;l<q.length;l++){if(q[l].pointerId===n.pointerId){o=!0;break}}o||q.push(n),n.touches=q.slice(),n.changedTouches=[n],v(n)};if(m[k+"touchstart"+u]=i,m.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var p=function(l){for(var n=0;n<q.length;n++){if(q[n].pointerId===l.pointerId){q.splice(n,1);break}}};d.documentElement.addEventListener(this.POINTER_UP,p,!1),d.documentElement.addEventListener(this.POINTER_CANCEL,p,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(m,q,l,u){function r(i){if(i.pointerType!==i.MSPOINTER_TYPE_MOUSE&&"mouse"!==i.pointerType||0!==i.buttons){for(var n=0;n<k.length;n++){if(k[n].pointerId===i.pointerId){k[n]=i;break}}i.touches=k.slice(),i.changedTouches=[i],l(i)}}var p="_leaflet_",k=this._pointers;return m[p+"touchmove"+u]=r,m.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(m,q,l,u){var r="_leaflet_",p=this._pointers,k=function(i){for(var n=0;n<p.length;n++){if(p[n].pointerId===i.pointerId){p.splice(n,1);break}}i.touches=p.slice(),i.changedTouches=[i],l(i)};return m[r+"touchend"+u]=k,m.addEventListener(this.POINTER_UP,k,!1),m.addEventListener(this.POINTER_CANCEL,k,!1),this},removePointerListener:function(l,m,k){var q="_leaflet_",p=l[q+m+k];switch(m){case"touchstart":l.removeEventListener(this.POINTER_DOWN,p,!1);break;case"touchmove":l.removeEventListener(this.POINTER_MOVE,p,!1);break;case"touchend":l.removeEventListener(this.POINTER_UP,p,!1),l.removeEventListener(this.POINTER_CANCEL,p,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23,bounceAtZoomLimits:!0}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(k){var l=this._map;if(k.touches&&2===k.touches.length&&!l._animatingZoom&&!this._zooming){var p=l.mouseEventToLayerPoint(k.touches[0]),m=l.mouseEventToLayerPoint(k.touches[1]),i=l._getCenterLayerPoint();this._startCenter=p.add(m)._divideBy(2),this._startDist=p.distanceTo(m),this._moved=!1,this._zooming=!0,this._centerOffset=i.subtract(this._startCenter),l._panAnim&&l._panAnim.stop(),f.DomEvent.on(d,"touchmove",this._onTouchMove,this).on(d,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(k)}},_onTouchMove:function(l){var m=this._map;if(l.touches&&2===l.touches.length&&this._zooming){var k=m.mouseEventToLayerPoint(l.touches[0]),o=m.mouseEventToLayerPoint(l.touches[1]);this._scale=k.distanceTo(o)/this._startDist,this._delta=k._add(o)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(m.options.bounceAtZoomLimits||!(m.getZoom()===m.getMinZoom()&&this._scale<1||m.getZoom()===m.getMaxZoom()&&this._scale>1))&&(this._moved||(f.DomUtil.addClass(m._mapPane,"leaflet-touching"),m.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(l))}},_updateOnMove:function(){var l=this._map,m=this._getScaleOrigin(),k=l.layerPointToLatLng(m),o=l.getScaleZoom(this._scale);l._animateZoom(k,o,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming){return this._zooming=!1,void 0}var m=this._map;this._zooming=!1,f.DomUtil.removeClass(m._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(d,"touchmove",this._onTouchMove).off(d,"touchend",this._onTouchEnd);var s=this._getScaleOrigin(),v=m.layerPointToLatLng(s),u=m.getZoom(),k=m.getScaleZoom(this._scale)-u,q=k>0?Math.ceil(k):Math.floor(k),i=m._limitZoom(u+q),p=m.getZoomScale(i)/this._scale;m._animateZoom(v,i,s,p)},_getScaleOrigin:function(){var i=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(i)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(i.touches){if(f.DomEvent.preventDefault(i),this._fireClick=!0,i.touches.length>1){return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0}var k=i.touches[0],l=k.target;this._startPos=this._newPos=new f.Point(k.clientX,k.clientY),l.tagName&&"a"===l.tagName.toLowerCase()&&f.DomUtil.addClass(l,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",k))},this),1000),f.DomEvent.on(d,"touchmove",this._onMove,this).on(d,"touchend",this._onUp,this)}},_onUp:function(i){if(clearTimeout(this._holdTimeout),f.DomEvent.off(d,"touchmove",this._onMove,this).off(d,"touchend",this._onUp,this),this._fireClick&&i&&i.changedTouches){var k=i.changedTouches[0],l=k.target;l&&l.tagName&&"a"===l.tagName.toLowerCase()&&f.DomUtil.removeClass(l,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",k)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(i){var k=i.touches[0];this._newPos=new f.Point(k.clientX,k.clientY)},_simulateEvent:function(i,l){var k=d.createEvent("MouseEvents");k._simulated=!0,l.target._simulatedClick=!0,k.initMouseEvent(i,!0,!0,e,1,l.screenX,l.screenY,l.clientX,l.clientY,!1,!1,!1,!1,0,null),l.target.dispatchEvent(k)}}),f.Browser.touch&&!f.Browser.pointer&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._moved=!1},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(i){return this._moved=!1,!i.shiftKey||1!==i.which&&1!==i.button?!1:(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(i),f.DomEvent.on(d,"mousemove",this._onMouseMove,this).on(d,"mouseup",this._onMouseUp,this).on(d,"keydown",this._onKeyDown,this),void 0)},_onMouseMove:function(m){this._moved||(this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var p=this._startLayerPoint,l=this._box,r=this._map.mouseEventToLayerPoint(m),q=r.subtract(p),k=new f.Point(Math.min(r.x,p.x),Math.min(r.y,p.y));f.DomUtil.setPosition(l,k),this._moved=!0,l.style.width=Math.max(0,Math.abs(q.x)-4)+"px",l.style.height=Math.max(0,Math.abs(q.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(d,"mousemove",this._onMouseMove).off(d,"mouseup",this._onMouseUp).off(d,"keydown",this._onKeyDown)},_onMouseUp:function(l){this._finish();var m=this._map,k=m.mouseEventToLayerPoint(l);if(!this._startLayerPoint.equals(k)){var o=new f.LatLngBounds(m.layerPointToLatLng(this._startLayerPoint),m.layerPointToLatLng(k));m.fitBounds(o),m.fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){27===i.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(i){this._map=i,this._setPanOffset(i.options.keyboardPanOffset),this._setZoomOffset(i.options.keyboardZoomOffset)},addHooks:function(){var i=this._map._container;-1===i.tabIndex&&(i.tabIndex="0"),f.DomEvent.on(i,"focus",this._onFocus,this).on(i,"blur",this._onBlur,this).on(i,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var i=this._map._container;f.DomEvent.off(i,"focus",this._onFocus,this).off(i,"blur",this._onBlur,this).off(i,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var k=d.body,m=d.documentElement,l=k.scrollTop||m.scrollTop,i=k.scrollLeft||m.scrollLeft;this._map._container.focus(),e.scrollTo(i,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(l){var m,k,q=this._panKeys={},p=this.keyCodes;for(m=0,k=p.left.length;k>m;m++){q[p.left[m]]=[-1*l,0]}for(m=0,k=p.right.length;k>m;m++){q[p.right[m]]=[l,0]}for(m=0,k=p.down.length;k>m;m++){q[p.down[m]]=[0,l]}for(m=0,k=p.up.length;k>m;m++){q[p.up[m]]=[0,-1*l]}},_setZoomOffset:function(l){var m,k,q=this._zoomKeys={},p=this.keyCodes;for(m=0,k=p.zoomIn.length;k>m;m++){q[p.zoomIn[m]]=l}for(m=0,k=p.zoomOut.length;k>m;m++){q[p.zoomOut[m]]=-l}},_addHooks:function(){f.DomEvent.on(d,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(d,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){var m=l.keyCode,k=this._map;if(m in this._panKeys){if(k._panAnim&&k._panAnim._inProgress){return}k.panBy(this._panKeys[m]),k.options.maxBounds&&k.panInsideBounds(k.options.maxBounds)}else{if(!(m in this._zoomKeys)){return}k.setZoom(k.getZoom()+this._zoomKeys[m])}f.DomEvent.stop(l)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(i,i)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),f.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),f.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var l=this._marker,m=l._shadow,k=f.DomUtil.getPosition(l._icon),o=l._map.layerPointToLatLng(k);m&&f.DomUtil.setPosition(m,k),l._latlng=o,l.fire("move",{latlng:o}).fire("drag")},_onDragEnd:function(i){this._marker.fire("moveend").fire("dragend",i)}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(i){f.setOptions(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var k=this._map;return k&&k.removeControl(this),this.options.position=i,k&&k.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this._map=l;var m=this._container=this.onAdd(l),k=this.getPosition(),o=l._controlCorners[k];return f.DomUtil.addClass(m,"leaflet-control"),-1!==k.indexOf("bottom")?o.insertBefore(m,o.firstChild):o.appendChild(m),this},removeFrom:function(l){var m=this.getPosition(),k=l._controlCorners[m];return k.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(l),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),f.control=function(i){return new f.Control(i)},f.Map.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.removeFrom(this),this},_initControlPos:function(){function l(n,p){var i=k+n+" "+k+p;m[n+p]=f.DomUtil.create("div",i,o)}var m=this._controlCorners={},k="leaflet-",o=this._controlContainer=f.DomUtil.create("div",k+"control-container",this._container);l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(l){var m="leaflet-control-zoom",k=f.DomUtil.create("div",m+" leaflet-bar");return this._map=l,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,m+"-in",k,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,m+"-out",k,this._zoomOut,this),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(i){this._map.zoomIn(i.shiftKey?3:1)},_zoomOut:function(i){this._map.zoomOut(i.shiftKey?3:1)},_createButton:function(q,u,p,w,v,m){var s=f.DomUtil.create("a",p,w);s.innerHTML=q,s.href="#",s.title=u;var k=f.DomEvent.stopPropagation;return f.DomEvent.on(s,"click",k).on(s,"mousedown",k).on(s,"dblclick",k).on(s,"click",f.DomEvent.preventDefault).on(s,"click",v,m).on(s,"click",this._refocusOnMap,m),s},_updateDisabled:function(){var i=this._map,k="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,k),f.DomUtil.removeClass(this._zoomOutButton,k),i._zoom===i.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,k),i._zoom===i.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,k)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(i){return new f.Control.Zoom(i)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(i){f.setOptions(this,i),this._attributions={}},onAdd:function(i){this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container);for(var k in i._layers){i._layers[k].getAttribution&&this.addAttribution(i._layers[k].getAttribution())}return i.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(i){i.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):void 0},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):void 0},_update:function(){if(this._map){var l=[];for(var m in this._attributions){this._attributions[m]&&l.push(m)}var k=[];this.options.prefix&&k.push(this.options.prefix),l.length&&k.push(l.join(", ")),this._container.innerHTML=k.join(" | ")}},_onLayerAdd:function(i){i.layer.getAttribution&&this.addAttribution(i.layer.getAttribution())},_onLayerRemove:function(i){i.layer.getAttribution&&this.removeAttribution(i.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(i){return new f.Control.Attribution(i)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(l){this._map=l;var m="leaflet-control-scale",k=f.DomUtil.create("div",m),o=this.options;return this._addScales(o,m,k),l.on(o.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),k},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,m,k){l.metric&&(this._mScale=f.DomUtil.create("div",m+"-line",k)),l.imperial&&(this._iScale=f.DomUtil.create("div",m+"-line",k))},_update:function(){var m=this._map.getBounds(),q=m.getCenter().lat,l=6378137*Math.PI*Math.cos(q*Math.PI/180),u=l*(m.getNorthEast().lng-m.getSouthWest().lng)/180,r=this._map.getSize(),p=this.options,k=0;r.x>0&&(k=u*(p.maxWidth/r.x)),this._updateScales(p,k)},_updateScales:function(i,k){i.metric&&k&&this._updateMetric(k),i.imperial&&k&&this._updateImperial(k)},_updateMetric:function(i){var k=this._getRoundNum(i);this._mScale.style.width=this._getScaleWidth(k/i)+"px",this._mScale.innerHTML=1000>k?k+" m":k/1000+" km"},_updateImperial:function(l){var p,k,r,q=3.2808399*l,m=this._iScale;q>5280?(p=q/5280,k=this._getRoundNum(p),m.style.width=this._getScaleWidth(k/p)+"px",m.innerHTML=k+" mi"):(r=this._getRoundNum(q),m.style.width=this._getScaleWidth(r/q)+"px",m.innerHTML=r+" ft")},_getScaleWidth:function(i){return Math.round(this.options.maxWidth*i)-10},_getRoundNum:function(l){var m=Math.pow(10,(Math.floor(l)+"").length-1),k=l/m;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,m*k}}),f.control.scale=function(i){return new f.Control.Scale(i)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(l,m,k){f.setOptions(this,k),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var o in l){this._addLayer(l[o],o)}for(o in m){this._addLayer(m[o],o,!0)}},onAdd:function(i){return this._initLayout(),this._update(),i.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(i){i.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(i,k){return this._addLayer(i,k),this._update(),this},addOverlay:function(i,k){return this._addLayer(i,k,!0),this._update(),this},removeLayer:function(i){var k=f.stamp(i);return delete this._layers[k],this._update(),this},_initLayout:function(){var l="leaflet-control-layers",m=this._container=f.DomUtil.create("div",l);m.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(m,"click",f.DomEvent.stopPropagation):f.DomEvent.disableClickPropagation(m).disableScrollPropagation(m);var k=this._form=f.DomUtil.create("form",l+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(m,"mouseover",this._expand,this).on(m,"mouseout",this._collapse,this);var o=this._layersLink=f.DomUtil.create("a",l+"-toggle",m);o.href="#",o.title="Layers",f.Browser.touch?f.DomEvent.on(o,"click",f.DomEvent.stop).on(o,"click",this._expand,this):f.DomEvent.on(o,"focus",this._expand,this),f.DomEvent.on(k,"click",function(){setTimeout(f.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else{this._expand()}this._baseLayersList=f.DomUtil.create("div",l+"-base",k),this._separator=f.DomUtil.create("div",l+"-separator",k),this._overlaysList=f.DomUtil.create("div",l+"-overlays",k),m.appendChild(k)},_addLayer:function(l,m,k){var o=f.stamp(l);this._layers[o]={layer:l,name:m,overlay:k},this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var l,m,k=!1,o=!1;for(l in this._layers){m=this._layers[l],this._addItem(m),o=o||m.overlay,k=k||!m.overlay}this._separator.style.display=o&&k?"":"none"}},_onLayerChange:function(l){var m=this._layers[f.stamp(l.layer)];if(m){this._handlingClick||this._update();var k=m.overlay?"layeradd"===l.type?"overlayadd":"overlayremove":"layeradd"===l.type?"baselayerchange":null;k&&this._map.fire(k,m)}},_createRadioElement:function(i,k){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"';k&&(m+=' checked="checked"'),m+="/>";var l=d.createElement("div");return l.innerHTML=m,l.firstChild},_addItem:function(k){var m,q=d.createElement("label"),p=this._map.hasLayer(k.layer);k.overlay?(m=d.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=p):m=this._createRadioElement("leaflet-base-layers",p),m.layerId=f.stamp(k.layer),f.DomEvent.on(m,"click",this._onInputClick,this);var i=d.createElement("span");i.innerHTML=" "+k.name,q.appendChild(m),q.appendChild(i);var l=k.overlay?this._overlaysList:this._baseLayersList;return l.appendChild(q),q},_onInputClick:function(){var l,m,k,q=this._form.getElementsByTagName("input"),p=q.length;for(this._handlingClick=!0,l=0;p>l;l++){m=q[l],k=this._layers[m.layerId],m.checked&&!this._map.hasLayer(k.layer)?this._map.addLayer(k.layer):!m.checked&&this._map.hasLayer(k.layer)&&this._map.removeLayer(k.layer)}this._handlingClick=!1,this._refocusOnMap()},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(l,m,k){return new f.Control.Layers(l,m,k)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(l,m,k,o){this.stop(),this._el=l,this._inProgress=!0,this._newPos=m,this.fire("start"),l.style[f.DomUtil.TRANSITION]="all "+(k||0.25)+"s cubic-bezier(0,0,"+(o||0.5)+",1)",f.DomEvent.on(l,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(l,m),f.Util.falseFn(l.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var i=this._getPos();return i?(this._el._leaflet_pos=i,this.fire("step"),void 0):(this._onTransitionEnd(),void 0)},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var m,l,q,p=this._el,k=e.getComputedStyle(p);if(f.Browser.any3d){if(q=k[f.DomUtil.TRANSFORM].match(this._transformRe),!q){return}m=parseFloat(q[1]),l=parseFloat(q[2])}else{m=parseFloat(k.left),l=parseFloat(k.top)}return new f.Point(m,l,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(l,m,k){if(m=m===j?this._zoom:this._limitZoom(m),l=this._limitCenter(f.latLng(l),m,this.options.maxBounds),k=k||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==j&&(k.zoom=f.extend({animate:k.animate},k.zoom),k.pan=f.extend({animate:k.animate},k.pan));var n=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,m,k.zoom):this._tryAnimatedPan(l,k.pan);if(n){return clearTimeout(this._sizeTimer),this}}return this._resetView(l,m),this},panBy:function(l,m){if(l=f.point(l).round(),m=m||{},!l.x&&!l.y){return this}if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(l);this._panAnim.run(this._mapPane,k,m.duration||0.25,m.easeLinearity)}else{this._rawPanBy(l),this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,m){var k=this._getCenterOffset(l)._floor();return(m&&m.animate)===!0||this.getSize().contains(k)?(this.panBy(k,m),!0):!1}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(l,m,k,o){this.stop(),this._el=l,this._inProgress=!0,this._duration=k||0.25,this._easeOutPower=1/Math.max(o||0.5,0.2),this._startPos=f.DomUtil.getPosition(l),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var i=+new Date-this._startTime,k=1000*this._duration;k>i?this._runFrame(this._easeOut(i/k)):(this._runFrame(1),this._complete())},_runFrame:function(i){var k=this._startPos.add(this._offset.multiplyBy(i));f.DomUtil.setPosition(this._el,k),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,p,k){if(this._animatingZoom){return !0}if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold){return !1}var r=this.getZoomScale(p),q=this._getCenterOffset(l)._divideBy(1-1/r),m=this._getCenterLayerPoint()._add(q);return k.animate===!0||this.getSize().contains(q)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(l,p,m,r,null,!0),!0):!1},_animateZoom:function(m,p,l,r,q,k){this._animatingZoom=!0,f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=m,this._animateToZoom=p,f.Draggable&&(f.Draggable._disabled=!0),this.fire("zoomanim",{center:m,zoom:p,origin:l,scale:r,delta:q,backwards:k})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)}}:{}),f.TileLayer.include({_animateZoom:function(l){this._animating||(this._animating=!0,this._prepareBgBuffer());var m=this._bgBuffer,k=f.DomUtil.TRANSFORM,q=l.delta?f.DomUtil.getTranslateString(l.delta):m.style[k],p=f.DomUtil.getScaleString(l.scale,l.origin);m.style[k]=l.backwards?p+" "+q:q+" "+p},_endZoomAnim:function(){var i=this._tileContainer,k=this._bgBuffer;i.style.visibility="",i.parentNode.appendChild(i),f.Util.falseFn(k.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var i=this._map;!i||i._animatingZoom||i.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var l=this._tileContainer,m=this._bgBuffer,k=this._getLoadedTilesPercentage(m),o=this._getLoadedTilesPercentage(l);return m&&k>0.5&&0.5>o?(l.style.visibility="hidden",this._stopLoadingImages(l),void 0):(m.style.visibility="hidden",m.style[f.DomUtil.TRANSFORM]="",this._tileContainer=m,m=this._bgBuffer=l,this._stopLoadingImages(m),clearTimeout(this._clearBgBufferTimer),void 0)},_getLoadedTilesPercentage:function(l){var m,k,q=l.getElementsByTagName("img"),p=0;for(m=0,k=q.length;k>m;m++){q[m].complete&&p++}return p/k},_stopLoadingImages:function(l){var m,k,q,p=Array.prototype.slice.call(l.getElementsByTagName("img"));for(m=0,k=p.length;k>m;m++){q=p[m],q.complete||(q.onload=f.Util.falseFn,q.onerror=f.Util.falseFn,q.src=f.Util.emptyImageUrl,q.parentNode.removeChild(q))}}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:10000,maximumAge:0,enableHighAccuracy:!1},locate:function(l){if(l=this._locateOptions=f.extend(this._defaultLocateOptions,l),!navigator.geolocation){return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this}var m=f.bind(this._handleGeolocationResponse,this),k=f.bind(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,k,l):navigator.geolocation.getCurrentPosition(m,k,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){var m=l.code,k=l.message||(1===m?"permission denied":2===m?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+k+"."})},_handleGeolocationResponse:function(A){var w=A.coords.latitude,s=A.coords.longitude,p=new f.LatLng(w,s),m=180*A.coords.accuracy/40075017,y=m/Math.cos(f.LatLng.DEG_TO_RAD*w),k=f.latLngBounds([w-m,s-y],[w+m,s+y]),q=this._locateOptions;if(q.setView){var v=Math.min(this.getBoundsZoom(k),q.maxZoom);this.setView(p,v)}var z={latlng:p,bounds:k,timestamp:A.timestamp};for(var x in A.coords){"number"==typeof A.coords[x]&&(z[x]=A.coords[x])}this.fire("locationfound",z)}})}(window,document)},{}],7:[function(b,c,a){!function(d,f){if("object"==typeof a&&a){f(a)}else{var g={};f(g),"function"==typeof define&&define.amd?define(g):d.Mustache=g}}(this,function(B){function Q(d,f){return q.call(d,f)}function K(d){return !Q(W,d)}function H(d){return"function"==typeof d}function G(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function C(d){return String(d).replace(/[&<>"'\/]/g,function(e){return j[e]})}function V(d){this.string=d,this.tail=d,this.pos=0}function D(d,f){this.view=null==d?{}:d,this.parent=f,this._cache={".":this.view}}function J(){this.clearCache()}function M(T,E,n,ac){function Z(d){return E.render(d,n)}for(var g,y,ab,Y="",h=0,X=T.length;X>h;++h){switch(g=T[h],y=g[1],g[0]){case"#":if(ab=n.lookup(y),"object"==typeof ab||"string"==typeof ab){if(k(ab)){for(var v=0,P=ab.length;P>v;++v){Y+=M(g[4],E,n.push(ab[v]),ac)}}else{ab&&(Y+=M(g[4],E,n.push(ab),ac))}}else{if(H(ab)){var aa=null==ac?null:ac.slice(g[3],g[5]);ab=ab.call(n.view,aa,Z),null!=ab&&(Y+=ab)}else{ab&&(Y+=M(g[4],E,n,ac))}}break;case"^":ab=n.lookup(y),(!ab||k(ab)&&0===ab.length)&&(Y+=M(g[4],E,n,ac));break;case">":ab=E.getPartial(y),H(ab)&&(Y+=ab(n));break;case"&":ab=n.lookup(y),null!=ab&&(Y+=ab);break;case"name":ab=n.lookup(y),null!=ab&&(Y+=B.escape(ab));break;case"text":Y+=y}}return Y}function z(g){for(var m,f=[],u=f,p=[],h=0,d=g.length;d>h;++h){switch(m=g[h],m[0]){case"#":case"^":p.push(m),u.push(m),u=m[4]=[];break;case"/":var l=p.pop();l[5]=m[2],u=p.length>0?p[p.length-1][4]:f;break;default:u.push(m)}}return f}function S(f){for(var h,d,m=[],l=0,g=f.length;g>l;++l){h=f[l],h&&("text"===h[0]&&d&&"text"===d[0]?(d[1]+=h[1],d[3]=h[3]):(d=h,m.push(h)))}return m}function F(d){return[new RegExp(G(d[0])+"\\s*"),new RegExp("\\s*"+G(d[1]))]}function R(ac,Z){function y(){if(p&&!X){for(;o.length;){delete u[o.pop()]}}else{o=[]}p=!1,X=!1}if(ac=ac||"",Z=Z||B.tags,"string"==typeof Z&&(Z=Z.split(O)),2!==Z.length){throw new Error("Invalid tags: "+Z.join(", "))}for(var Y,aa,ab,ad,af,m,ae=F(Z),g=new V(ac),f=[],u=[],o=[],p=!1,X=!1;!g.eos();){if(Y=g.pos,ab=g.scanUntil(ae[0])){for(var i=0,v=ab.length;v>i;++i){ad=ab.charAt(i),K(ad)?o.push(u.length):X=!0,u.push(["text",ad,Y,Y+1]),Y+=1,"\n"==ad&&y()}}if(!g.scan(ae[0])){break}if(p=!0,aa=g.scan(w)||"name",g.scan(I),"="===aa?(ab=g.scanUntil(N),g.scan(N),g.scanUntil(ae[1])):"{"===aa?(ab=g.scanUntil(new RegExp("\\s*"+G("}"+Z[1]))),g.scan(x),g.scanUntil(ae[1]),aa="&"):ab=g.scanUntil(ae[1]),!g.scan(ae[1])){throw new Error("Unclosed tag at "+g.pos)}if(af=[aa,ab,Y,g.pos],u.push(af),"#"===aa||"^"===aa){f.push(af)}else{if("/"===aa){if(m=f.pop(),!m){throw new Error('Unopened section "'+ab+'" at '+Y)}if(m[1]!==ab){throw new Error('Unclosed section "'+m[1]+'" at '+Y)}}else{if("name"===aa||"{"===aa||"&"===aa){X=!0}else{if("="===aa){if(Z=ab.split(O),2!==Z.length){throw new Error("Invalid tags at "+Y+": "+Z.join(", "))}ae=F(Z)}}}}}if(m=f.pop()){throw new Error('Unclosed section "'+m[1]+'" at '+g.pos)}return z(S(u))}var I=/\s*/,O=/\s+/,W=/\S/,N=/\s*=/,x=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/,q=RegExp.prototype.test,U=Object.prototype.toString,k=Array.isArray||function(d){return"[object Array]"===U.call(d)},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};V.prototype.eos=function(){return""===this.tail},V.prototype.scan=function(f){var g=this.tail.match(f);if(g&&0===g.index){var d=g[0];return this.tail=this.tail.substring(d.length),this.pos+=d.length,d}return""},V.prototype.scanUntil=function(f){var g,d=this.tail.search(f);switch(d){case -1:g=this.tail,this.tail="";break;case 0:g="";break;default:g=this.tail.substring(0,d),this.tail=this.tail.substring(d)}return this.pos+=g.length,g},D.make=function(d){return d instanceof D?d:new D(d)},D.prototype.push=function(d){return new D(d,this)},D.prototype.lookup=function(f){var h;if(f in this._cache){h=this._cache[f]}else{for(var d=this;d;){if(f.indexOf(".")>0){h=d.view;for(var l=f.split("."),g=0;null!=h&&g<l.length;){h=h[l[g++]]}}else{h=d.view[f]}if(null!=h){break}d=d.parent}this._cache[f]=h}return H(h)&&(h=h.call(this.view)),h},J.prototype.clearCache=function(){this._cache={},this._partialCache={}},J.prototype.compile=function(f,d){var h=this._cache[f];if(!h){var g=B.parse(f,d);h=this._cache[f]=this.compileTokens(g,f)}return h},J.prototype.compilePartial=function(f,g,d){var h=this.compile(g,d);return this._partialCache[f]=h,h},J.prototype.getPartial=function(d){return d in this._partialCache||!this._loadPartial||this.compilePartial(d,this._loadPartial(d)),this._partialCache[d]},J.prototype.compileTokens=function(f,g){var d=this;return function(i,h){if(h){if(H(h)){d._loadPartial=h}else{for(var e in h){d.compilePartial(e,h[e])}}}return M(f,d,D.make(i),g)}},J.prototype.render=function(f,g,d){return this.compile(f)(g,d)},B.name="mustache.js",B.version="0.7.3",B.tags=["{{","}}"],B.Scanner=V,B.Context=D,B.Writer=J,B.parse=R,B.escape=C;var A=new J;B.clearCache=function(){return A.clearCache()},B.compile=function(d,f){return A.compile(d,f)},B.compilePartial=function(f,g,d){return A.compilePartial(f,g,d)},B.compileTokens=function(d,f){return A.compileTokens(d,f)},B.render=function(f,g,d){return A.render(f,g,d)},B.to_html=function(h,f,l,g){var d=B.render(h,f,l);return H(g)?(g(d),void 0):d}})},{}],8:[function(b,c){function a(e){return/^https?/.test(e.getScheme())?e.toString():"data"==e.getScheme()&&/^image/.test(e.getPath())?e.toString():void 0}function f(e){return e}var d=b("./sanitizer-bundle.js");c.exports=function(e){return e?d(e,a,f):""}},{"./sanitizer-bundle.js":9}],9:[function(b,d){var a=function(){function G(h){var i=(""+h).match(C);return i?new x(z(i[1]),z(i[2]),z(i[3]),z(i[4]),z(i[5]),z(i[6]),z(i[7])):null}function B(m,I,o,i,p,n,l){var J=new x(v(m,w),v(I,w),y(o),i>0?i.toString():null,v(p,A),null,y(l));return n&&("string"==typeof n?J.setRawQuery(n.replace(/[^?&=0-9A-Za-z_\-~.%]/g,q)):J.setAllParameters(n)),J}function y(e){return"string"==typeof e?encodeURIComponent(e):null}function v(h,i){return"string"==typeof h?encodeURI(h).replace(i,q):null}function q(h){var i=h.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(i>>4&15)+"0123456789ABCDEF".charAt(15&i)}function H(e){return e.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function E(l){if(null===l){return null}for(var m,h=H(l),o=D;(m=h.replace(o,"$1"))!=h;h=m){}return h}function j(p,J){var m=p.clone(),M=J.hasScheme();M?m.setRawScheme(J.getRawScheme()):M=J.hasCredentials(),M?m.setRawCredentials(J.getRawCredentials()):M=J.hasDomain(),M?m.setRawDomain(J.getRawDomain()):M=J.hasPort();var K=J.getRawPath(),u=E(K);if(M){m.setPort(J.getPort()),u=u&&u.replace(k,"")}else{if(M=!!K){if(47!==u.charCodeAt(0)){var I=E(m.getRawPath()||"").replace(k,""),h=I.lastIndexOf("/")+1;u=E((h?I.substring(0,h):"")+E(K)).replace(k,"")}}else{u=u&&u.replace(k,""),u!==K&&m.setRawPath(u)}}return M?m.setRawPath(u):M=J.hasQuery(),M?m.setRawQuery(J.getRawQuery()):M=J.hasFragment(),M&&m.setRawFragment(J.getRawFragment()),m}function x(m,r,l,I,u,p,h){this.scheme_=m,this.credentials_=r,this.domain_=l,this.port_=I,this.path_=u,this.query_=p,this.fragment_=h,this.paramCache_=null}function z(e){return"string"==typeof e&&e.length>0?e:null}var F=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),D=new RegExp(F),k=/^(?:\.\.\/)*(?:\.\.$)?/;x.prototype.toString=function(){var e=[];return null!==this.scheme_&&e.push(this.scheme_,":"),null!==this.domain_&&(e.push("//"),null!==this.credentials_&&e.push(this.credentials_,"@"),e.push(this.domain_),null!==this.port_&&e.push(":",this.port_.toString())),null!==this.path_&&e.push(this.path_),null!==this.query_&&e.push("?",this.query_),null!==this.fragment_&&e.push("#",this.fragment_),e.join("")},x.prototype.clone=function(){return new x(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},x.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},x.prototype.getRawScheme=function(){return this.scheme_},x.prototype.setScheme=function(e){return this.scheme_=v(e,w),this},x.prototype.setRawScheme=function(e){return this.scheme_=e?e:null,this},x.prototype.hasScheme=function(){return null!==this.scheme_},x.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},x.prototype.getRawCredentials=function(){return this.credentials_},x.prototype.setCredentials=function(e){return this.credentials_=v(e,w),this},x.prototype.setRawCredentials=function(e){return this.credentials_=e?e:null,this},x.prototype.hasCredentials=function(){return null!==this.credentials_},x.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},x.prototype.getRawDomain=function(){return this.domain_},x.prototype.setDomain=function(e){return this.setRawDomain(e&&encodeURIComponent(e))},x.prototype.setRawDomain=function(e){return this.domain_=e?e:null,this.setRawPath(this.path_)},x.prototype.hasDomain=function(){return null!==this.domain_},x.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},x.prototype.setPort=function(e){if(e){if(e=Number(e),e!==(65535&e)){throw new Error("Bad port number "+e)}this.port_=""+e}else{this.port_=null}return this},x.prototype.hasPort=function(){return null!==this.port_},x.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},x.prototype.getRawPath=function(){return this.path_},x.prototype.setPath=function(e){return this.setRawPath(v(e,A))},x.prototype.setRawPath=function(e){return e?(e=String(e),this.path_=!this.domain_||/^\//.test(e)?e:"/"+e):this.path_=null,this},x.prototype.hasPath=function(){return null!==this.path_},x.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},x.prototype.getRawQuery=function(){return this.query_},x.prototype.setQuery=function(e){return this.paramCache_=null,this.query_=y(e),this},x.prototype.setRawQuery=function(e){return this.paramCache_=null,this.query_=e?e:null,this},x.prototype.hasQuery=function(){return null!==this.query_},x.prototype.setAllParameters=function(m){if("object"==typeof m&&!(m instanceof Array)&&(m instanceof Object||"[object Array]"!==Object.prototype.toString.call(m))){var I=[],l=-1;for(var K in m){var J=m[K];"string"==typeof J&&(I[++l]=K,I[++l]=J)}m=I}this.paramCache_=null;for(var p=[],h="",u=0;u<m.length;){var K=m[u++],J=m[u++];p.push(h,encodeURIComponent(K.toString())),h="&",J&&p.push("=",encodeURIComponent(J.toString()))}return this.query_=p.join(""),this},x.prototype.checkParameterCache_=function(){if(!this.paramCache_){var l=this.query_;if(l){for(var p=l.split(/[&\?]/),h=[],u=-1,r=0;r<p.length;++r){var m=p[r].match(/^([^=]*)(?:=(.*))?$/);h[++u]=decodeURIComponent(m[1]).replace(/\+/g," "),h[++u]=decodeURIComponent(m[2]||"").replace(/\+/g," ")}this.paramCache_=h}else{this.paramCache_=[]}}},x.prototype.setParameterValues=function(l,p){"string"==typeof p&&(p=[p]),this.checkParameterCache_();for(var h=0,u=this.paramCache_,r=[],m=0;m<u.length;m+=2){l===u[m]?h<p.length&&r.push(l,p[h++]):r.push(u[m],u[m+1])}for(;h<p.length;){r.push(l,p[h++])}return this.setAllParameters(r),this},x.prototype.removeParameter=function(e){return this.setParameterValues(e,[])},x.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},x.prototype.getParameterValues=function(l){this.checkParameterCache_();for(var m=[],h=0;h<this.paramCache_.length;h+=2){l===this.paramCache_[h]&&m.push(this.paramCache_[h+1])}return m},x.prototype.getParameterMap=function(){this.checkParameterCache_();for(var l={},m=0;m<this.paramCache_.length;m+=2){var h=this.paramCache_[m++],o=this.paramCache_[m++];h in l?l[h].push(o):l[h]=[o]}return l},x.prototype.getParameterValue=function(h){this.checkParameterCache_();for(var i=0;i<this.paramCache_.length;i+=2){if(h===this.paramCache_[i]){return this.paramCache_[i+1]}}return null},x.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},x.prototype.getRawFragment=function(){return this.fragment_},x.prototype.setFragment=function(e){return this.fragment_=e?encodeURIComponent(e):null,this},x.prototype.setRawFragment=function(e){return this.fragment_=e?e:null,this},x.prototype.hasFragment=function(){return null!==this.fragment_};var C=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),w=/[#\/\?@]/g,A=/[\#\?]/g;return x.parse=G,x.create=B,x.resolve=j,x.collapse_dots=E,x.utils={mimeTypeOf:function(l){var h=G(l);return/\.html$/.test(h.getPath())?"text/html":"application/javascript"},resolve:function(l,h){return l?j(G(l),G(h)).toString():""+h}},x}(),g={};if(g.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},g.atype=g.atype,g.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},g.ATTRIBS=g.ATTRIBS,g.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},g.eflags=g.eflags,g.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},g.ELEMENTS=g.ELEMENTS,g.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},g.ELEMENT_DOM_INTERFACES=g.ELEMENT_DOM_INTERFACES,g.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},g.ueffects=g.ueffects,g.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},g.URIEFFECTS=g.URIEFFECTS,g.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},g.ltypes=g.ltypes,g.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},g.LOADERTYPES=g.LOADERTYPES,"i"!=="I".toLowerCase()){throw"I/i problem"}var f=function(aB){function aP(j){if(aK.hasOwnProperty(j)){return aK[j]}var k=j.match(at);if(k){return String.fromCharCode(parseInt(k[1],10))}if(k=j.match(aa)){return String.fromCharCode(parseInt(k[1],16))}if(ak&&af.test(j)){ak.innerHTML="&"+j+";";var h=ak.textContent;return aK[j]=h,h}return"&"+j+";"}function aH(h,e){return aP(e)}function aG(e){return e.replace(ad,"")}function aC(e){return e.replace(av,aH)}function aT(e){return(""+e).replace(ag,"&amp;").replace(aL,"&lt;").replace(i,"&gt;").replace(an,"&#34;")}function aD(e){return e.replace(al,"&amp;$1").replace(aL,"&lt;").replace(i,"&gt;")}function aJ(h){var j={cdata:h.cdata||h.cdata,comment:h.comment||h.comment,endDoc:h.endDoc||h.endDoc,endTag:h.endTag||h.endTag,pcdata:h.pcdata||h.pcdata,rcdata:h.rcdata||h.rcdata,startDoc:h.startDoc||h.startDoc,startTag:h.startTag||h.startTag};return function(k,e){return aM(k,j,e)}}function aM(j,k,h){var m=aF(j),l={noMoreGT:!1,noMoreEndComments:!1};aR(k,m,0,l,h)}function aA(j,k,h,m,l){return function(){aR(j,k,h,m,l)}}function aR(A,w,q,m,H){try{A.startDoc&&0==q&&A.startDoc(H);for(var E,j,u,x=q,C=w.length;C>x;){var k=w[x++],G=w[x];switch(k){case"&":ar.test(G)?(A.pcdata&&A.pcdata("&"+G,H,Y,aA(A,w,x,m,H)),x++):A.pcdata&&A.pcdata("&amp;",H,Y,aA(A,w,x,m,H));break;case"</":(E=/^([-\w:]+)[^\'\"]*/.exec(G))?E[0].length===G.length&&">"===w[x+1]?(x+=2,u=E[1].toLowerCase(),A.endTag&&A.endTag(u,H,Y,aA(A,w,x,m,H))):x=aQ(w,x,A,H,Y,m):A.pcdata&&A.pcdata("&lt;/",H,Y,aA(A,w,x,m,H));break;case"<":if(E=/^([-\w:]+)\s*\/?/.exec(G)){if(E[0].length===G.length&&">"===w[x+1]){x+=2,u=E[1].toLowerCase(),A.startTag&&A.startTag(u,[],H,Y,aA(A,w,x,m,H));var z=aB.ELEMENTS[u];if(z&aE){var F={name:u,next:x,eflags:z};x=aO(w,F,A,H,Y,m)}}else{x=aI(w,x,A,H,Y,m)}}else{A.pcdata&&A.pcdata("&lt;",H,Y,aA(A,w,x,m,H))}break;case"<!--":if(!m.noMoreEndComments){for(j=x+1;C>j&&(">"!==w[j]||!/--$/.test(w[j-1]));j++){}if(C>j){if(A.comment){var D=w.slice(x,j).join("");A.comment(D.substr(0,D.length-2),H,Y,aA(A,w,j+1,m,H))}x=j+1}else{m.noMoreEndComments=!0}}m.noMoreEndComments&&A.pcdata&&A.pcdata("&lt;!--",H,Y,aA(A,w,x,m,H));break;case"<!":if(/^\w/.test(G)){if(!m.noMoreGT){for(j=x+1;C>j&&">"!==w[j];j++){}C>j?x=j+1:m.noMoreGT=!0}m.noMoreGT&&A.pcdata&&A.pcdata("&lt;!",H,Y,aA(A,w,x,m,H))}else{A.pcdata&&A.pcdata("&lt;!",H,Y,aA(A,w,x,m,H))}break;case"<?":if(!m.noMoreGT){for(j=x+1;C>j&&">"!==w[j];j++){}C>j?x=j+1:m.noMoreGT=!0}m.noMoreGT&&A.pcdata&&A.pcdata("&lt;?",H,Y,aA(A,w,x,m,H));break;case">":A.pcdata&&A.pcdata("&gt;",H,Y,aA(A,w,x,m,H));break;case"":break;default:A.pcdata&&A.pcdata(k,H,Y,aA(A,w,x,m,H))}}A.endDoc&&A.endDoc(H)}catch(B){if(B!==Y){throw B}}}function aF(j){var k=/(<\/|<\!--|<[!?]|[&<>])/g;if(j+="",am){return j.split(k)}for(var h,m=[],l=0;null!==(h=k.exec(j));){m.push(j.substring(l,h.index)),m.push(h[0]),l=h.index+h[0].length}return m.push(j.substring(l)),m}function aQ(k,m,j,q,p,l){var h=aU(k,m);return h?(j.endTag&&j.endTag(h.name,q,p,aA(j,k,m,l,q)),h.next):k.length}function aI(k,m,j,q,p,l){var h=aU(k,m);return h?(j.startTag&&j.startTag(h.name,h.attrs,q,p,aA(j,k,h.next,l,q)),h.eflags&aE?aO(k,h,j,q,p,l):h.next):k.length}function aO(v,r,m,k,z,y){var q=v.length;aj.hasOwnProperty(r.name)||(aj[r.name]=new RegExp("^"+r.name+"(?:[\\s\\/]|$)","i"));for(var u=aj[r.name],x=r.next,j=r.next+1;q>j&&("</"!==v[j-1]||!u.test(v[j]));j++){}q>j&&(j-=1);var w=v.slice(x,j).join("");if(r.eflags&aB.eflags.CDATA){m.cdata&&m.cdata(w,k,z,aA(m,v,j,y,k))}else{if(!(r.eflags&aB.eflags.RCDATA)){throw new Error("bug")}m.rcdata&&m.rcdata(aD(w),k,z,aA(m,v,j,y,k))}return j}function aU(y,w){var q=/^([-\w:]+)/.exec(y[w]),m={};m.name=q[1].toLowerCase(),m.eflags=aB.ELEMENTS[m.name];for(var D=y[w].substr(q[0].length),B=w+1,j=y.length;j>B&&">"!==y[B];B++){D+=y[B]}if(B>=j){return void 0}for(var v=[];""!==D;){if(q=Q.exec(D)){if(q[4]&&!q[5]||q[6]&&!q[7]){for(var x=q[4]||q[6],C=!1,A=[D,y[B++]];j>B;B++){if(C){if(">"===y[B]){break}}else{0<=y[B].indexOf(x)&&(C=!0)}A.push(y[B])}if(B>=j){break}D=A.join("");continue}var k=q[1].toLowerCase(),z=q[2]?aN(q[3]):"";v.push(k,z),D=D.substr(q[0].length)}else{D=D.replace(/^[\s\S][^a-z\s]*/,"")}}return m.attrs=v,m.next=B+1,m}function aN(h){var j=h.charCodeAt(0);return(34===j||39===j)&&(h=h.substr(1,h.length-2)),aC(aG(h))}function az(j){var h,l,k=function(m,n){l||n.push(m)};return aJ({startDoc:function(){h=[],l=!1},startTag:function(q,D,e){if(!l&&aB.ELEMENTS.hasOwnProperty(q)){var w=aB.ELEMENTS[q];if(!(w&aB.eflags.FOLDABLE)){var x=j(q,D);if(!x){return l=!(w&aB.eflags.EMPTY),void 0}if("object"!=typeof x){throw new Error("tagPolicy did not return object (old API?)")}if(!("attribs" in x)){throw new Error("tagPolicy gave no attribs")}D=x.attribs;var C,A;if("tagName" in x?(A=x.tagName,C=aB.ELEMENTS[A]):(A=q,C=w),w&aB.eflags.OPTIONAL_ENDTAG){var n=h[h.length-1];!n||n.orig!==q||n.rep===A&&q===A||e.push("</",n.rep,">")}w&aB.eflags.EMPTY||h.push({orig:q,rep:A}),e.push("<",A);for(var z=0,v=D.length;v>z;z+=2){var y=D[z],B=D[z+1];null!==B&&void 0!==B&&e.push(" ",y,'="',aT(B),'"')}e.push(">"),w&aB.eflags.EMPTY&&!(C&aB.eflags.EMPTY)&&e.push("</",A,">")}}},endTag:function(v,w){if(l){return l=!1,void 0}if(aB.ELEMENTS.hasOwnProperty(v)){var q=aB.ELEMENTS[v];if(!(q&(aB.eflags.EMPTY|aB.eflags.FOLDABLE))){var n;if(q&aB.eflags.OPTIONAL_ENDTAG){for(n=h.length;--n>=0;){var u=h[n].orig;if(u===v){break}if(!(aB.ELEMENTS[u]&aB.eflags.OPTIONAL_ENDTAG)){return}}}else{for(n=h.length;--n>=0&&h[n].orig!==v;){}}if(0>n){return}for(var m=h.length;--m>n;){var p=h[m].rep;aB.ELEMENTS[p]&aB.eflags.OPTIONAL_ENDTAG||w.push("</",p,">")}n<h.length&&(v=h[n].rep),h.length=n,w.push("</",v,">")}}},pcdata:k,rcdata:k,cdata:k,endDoc:function(e){for(;h.length;h.length--){e.push("</",h[h.length-1].rep,">")}}})}function aw(k,q,v,u,m){if(!m){return null}try{var j=a.parse(""+k);if(j&&(!j.hasScheme()||K.test(j.getScheme()))){var p=m(j,q,v,u);return p?p.toString():null}}catch(h){return null}return null}function ai(j,l,h,p,m){if(h||j(l+" removed",{change:"removed",tagName:l}),p!==m){var k="changed";p&&!m?k="removed":!p&&m&&(k="added"),j(l+"."+h+" "+k,{change:k,tagName:l,attribName:h,oldValue:p,newValue:m})}}function aS(j,k,h){var l;return l=k+"::"+h,j.hasOwnProperty(l)?j[l]:(l="*::"+h,j.hasOwnProperty(l)?j[l]:void 0)}function ae(j,h){return aS(aB.LOADERTYPES,j,h)}function ab(j,h){return aS(aB.URIEFFECTS,j,h)}function ao(y,w,q,m,C){for(var A=0;A<w.length;A+=2){var j,v=w[A],x=w[A+1],B=x,z=null;if(j=y+"::"+v,(aB.ATTRIBS.hasOwnProperty(j)||(j="*::"+v,aB.ATTRIBS.hasOwnProperty(j)))&&(z=aB.ATTRIBS[j]),null!==z){switch(z){case aB.atype.NONE:break;case aB.atype.SCRIPT:x=null,C&&ai(C,y,v,B,x);break;case aB.atype.STYLE:if("undefined"==typeof ah){x=null,C&&ai(C,y,v,B,x);break}var k=[];ah(x,{declaration:function(n,h){var p=n.toLowerCase(),l=ac[p];l&&(ap(p,l,h,q?function(o){return aw(o,aB.ueffects.SAME_DOCUMENT,aB.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:p},q)}:null),k.push(n+": "+h.join(" ")))}}),x=k.length>0?k.join(" ; "):null,C&&ai(C,y,v,B,x);break;case aB.atype.ID:case aB.atype.IDREF:case aB.atype.IDREFS:case aB.atype.GLOBAL_NAME:case aB.atype.LOCAL_NAME:case aB.atype.CLASSES:x=m?m(x):x,C&&ai(C,y,v,B,x);break;case aB.atype.URI:x=aw(x,ab(y,v),ae(y,v),{TYPE:"MARKUP",XML_ATTR:v,XML_TAG:y},q),C&&ai(C,y,v,B,x);break;case aB.atype.URI_FRAGMENT:x&&"#"===x.charAt(0)?(x=x.substring(1),x=m?m(x):x,null!==x&&void 0!==x&&(x="#"+x)):x=null,C&&ai(C,y,v,B,x);break;default:x=null,C&&ai(C,y,v,B,x)}}else{x=null,C&&ai(C,y,v,B,x)}w[A+1]=x}return w}function ax(j,h,k){return function(l,e){return aB.ELEMENTS[l]&aB.eflags.UNSAFE?(k&&ai(k,l,void 0,void 0,void 0),void 0):{attribs:ao(l,e,j,h,k)}}}function ay(j,k){var h=[];return az(k)(j,h),h.join("")}function aq(j,k,h,m){var l=ax(k,h,m);return ay(j,l)}var ah,ap,ac;"undefined"!=typeof window&&(ah=window.parseCssDeclarations,ap=window.sanitizeCssProperty,ac=window.cssSchema);var aK={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:" "},at=/^#(\d+)$/,aa=/^#x([0-9A-Fa-f]+)$/,af=/^[A-Za-z][A-za-z0-9]+$/,ak="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,ad=/\0/g,av=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,ar=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,ag=/&/g,al=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,aL=/[<]/g,i=/>/g,an=/\"/g,Q=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),am=3==="a,b".split(/(,)/).length,aE=aB.eflags.CDATA|aB.eflags.RCDATA,Y={},aj={},K=/^(?:https?|mailto|data)$/i,au={};return au.escapeAttrib=au.escapeAttrib=aT,au.makeHtmlSanitizer=au.makeHtmlSanitizer=az,au.makeSaxParser=au.makeSaxParser=aJ,au.makeTagPolicy=au.makeTagPolicy=ax,au.normalizeRCData=au.normalizeRCData=aD,au.sanitize=au.sanitize=aq,au.sanitizeAttribs=au.sanitizeAttribs=ao,au.sanitizeWithPolicy=au.sanitizeWithPolicy=ay,au.unescapeEntities=au.unescapeEntities=aC,au}(g),c=f.sanitize;g.ATTRIBS["*::style"]=0,g.ELEMENTS.style=0,g.ATTRIBS["a::target"]=0,g.ELEMENTS.video=0,g.ATTRIBS["video::src"]=0,g.ATTRIBS["video::poster"]=0,g.ATTRIBS["video::controls"]=0,g.ELEMENTS.audio=0,g.ATTRIBS["audio::src"]=0,g.ATTRIBS["video::autoplay"]=0,g.ATTRIBS["video::controls"]=0,"undefined"!=typeof d&&(d.exports=c)},{}],10:[function(a,b){b.exports={author:"Mapbox",name:"mapbox.js",description:"mapbox javascript api",version:"1.6.2",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"index.js",dependencies:{leaflet:"0.7.2",mustache:"0.7.3",corslite:"0.0.5",json3:"git://github.com/bestiejs/json3.git#v3.2.6","sanitize-caja":"0.0.0","leaflet-hash":"~0.2.1"},scripts:{test:"jshint src/*.js && mocha-phantomjs test/index.html"},devDependencies:{"leaflet-hash":"git://github.com/mlevans/leaflet-hash.git#b039a3aa4e2492a5c7448075172ac26769e601d6","leaflet-fullscreen":"0.0.0","uglify-js":"2.4.8",mocha:"1.17.0","expect.js":"0.3.1",sinon:"1.8.2","mocha-phantomjs":"3.1.6",happen:"0.1.3",browserify:"3.23.1",jshint:"2.4.4","clean-css":"~2.0.7"},optionalDependencies:{},engines:{node:"*"}}},{}],11:[function(a,b){b.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],12:[function(d,h){var c=d("./util"),k=d("./url"),j=d("./request"),f=d("./marker"),b=d("./simplestyle"),g=L.FeatureGroup.extend({options:{filter:function(){return !0},sanitizer:d("sanitize-caja"),style:b.style},initialize:function(a,i){L.setOptions(this,i),this._layers={},"string"==typeof a?c.idUrl(a,this):a&&"object"==typeof a&&this.setGeoJSON(a)},setGeoJSON:function(a){return this._geojson=a,this.clearLayers(),this._initialize(a),this},getGeoJSON:function(){return this._geojson},loadURL:function(a){return this._request&&"abort" in this._request&&this._request.abort(),a=k.jsonify(a),this._request=j(a,L.bind(function(i,l){this._request=null,i&&"abort"!==i.type?(c.log("could not load features at "+a),this.fire("error",{error:i})):l&&(this.setGeoJSON(l),this.fire("ready"))},this)),this},loadID:function(a){return this.loadURL(k.base()+a+"/markers.geojson")},setFilter:function(a){return this.options.filter=a,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(l){var p,a,s=L.Util.isArray(l)?l:l.features;if(s){for(p=0,a=s.length;a>p;p++){(s[p].geometries||s[p].geometry||s[p].features)&&this._initialize(s[p])}}else{if(this.options.filter(l)){var q=L.GeoJSON.geometryToLayer(l,f.style),m=f.createPopup(l,this.options.sanitizer);"setStyle" in q&&q.setStyle(b.style(l)),q.feature=l,m&&q.bindPopup(m,{closeButton:!1}),this.addLayer(q)}}}});h.exports=function(a,i){return new g(a,i)}},{"./marker":22,"./request":23,"./simplestyle":25,"./url":27,"./util":28,"sanitize-caja":8}],13:[function(b,c){var a=b("./util"),f=b("./url"),d=b("./request");c.exports=function(g){var i,h={};return h.getURL=function(){return i},h.setURL=function(e){return i=f.jsonify(e),h},h.setID=function(e){return a.strict(e,"string"),h.setURL(f.base()+e+"/geocode/{query}.json"),h},h.setTileJSON=function(e){return a.strict(e,"object"),h.setURL(e.geocoder),h},h.queryURL=function(e){if(a.strict(e,"string"),!h.getURL()){throw new Error("Geocoding map ID not set")}return L.Util.template(h.getURL(),{query:encodeURIComponent(e)})},h.query=function(j,k){return a.strict(j,"string"),a.strict(k,"function"),d(h.queryURL(j),function(e,m){if(m&&m.results&&m.results.length){var l={results:m.results,latlng:[m.results[0][0].lat,m.results[0][0].lon]};void 0!==m.results[0][0].bounds&&(l.bounds=m.results[0][0].bounds,l.lbounds=a.lbounds(l.bounds)),k(null,l)}else{k(e||!0)}}),h},h.reverseQuery=function(l,o){function k(e){return void 0!==e.lat&&void 0!==e.lng?e.lng+","+e.lat:void 0!==e.lat&&void 0!==e.lon?e.lon+","+e.lat:e[0]+","+e[1]}var p="";if(l.length&&l[0].length){for(var j=0,m=[];j<l.length;j++){m.push(k(l[j]))}p=m.join(";")}else{p=k(l)}return d(h.queryURL(p),function(n,e){o(n,e)}),h},"string"==typeof g?-1==g.indexOf("/")?h.setID(g):h.setURL(g):"object"==typeof g&&h.setTileJSON(g),h}},{"./request":23,"./url":27,"./util":28}],14:[function(b,c){var a=b("./geocoder"),d=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",pointZoom:16,keepOpen:!1},initialize:function(f,g){L.Util.setOptions(this,g),this.geocoder=a(f)},setURL:function(e){return this.geocoder.setURL(e),this},getURL:function(){return this.geocoder.getURL()},setID:function(e){return this.geocoder.setID(e),this},setTileJSON:function(e){return this.geocoder.setTileJSON(e),this},_toggle:function(e){e&&L.DomEvent.stop(e),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(h){var k=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),g=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",k),m=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",k),l=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",k),j=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",l),f=L.DomUtil.create("input","",j);return g.href="#",g.innerHTML="&nbsp;",f.type="text",f.setAttribute("placeholder","Search"),L.DomEvent.addListener(j,"submit",this._geocode,this),L.DomEvent.disableClickPropagation(k),this._map=h,this._results=m,this._input=f,this._form=j,this.options.keepOpen?L.DomUtil.addClass(k,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(g,"click",this._toggle,this)),k},_geocode:function(g){L.DomEvent.preventDefault(g),L.DomUtil.addClass(this._container,"searching");var h=this._map,f=L.bind(function(p,v){if(L.DomUtil.removeClass(this._container,"searching"),!p&&v&&v.results&&v.results.length){if(this._results.innerHTML="",1===v.results.length){this.fire("autoselect",{data:v}),j(v.results[0][0]),this._closeIfOpen()}else{for(var n=0,w=Math.min(v.results.length,5);w>n;n++){for(var q=[],m=0;m<v.results[n].length;m++){v.results[n][m].name&&q.push(v.results[n][m].name)}if(q.length){var u=L.DomUtil.create("a","",this._results);u.innerHTML=q.join(", "),u.href="#",L.bind(function(e){L.DomEvent.addListener(u,"click",function(i){j(e[0]),L.DomEvent.stop(i),this.fire("select",{data:e})},this)},this)(v.results[n])}}if(v.results.length>5){var k=L.DomUtil.create("span","",this._results);k.innerHTML="Top 5 of "+v.results.length+"  results"}}this.fire("found",v)}else{this.fire("error",{error:p})}},this),j=L.bind(function(k){if(k.bounds){var e=k.bounds;this._map.fitBounds(L.latLngBounds([[e[1],e[0]],[e[3],e[2]]]))}else{void 0!==k.lat&&void 0!==k.lon&&this._map.setView([k.lat,k.lon],void 0===h.getZoom()?this.options.pointZoom:Math.max(h.getZoom(),this.options.pointZoom))}},this);this.geocoder.query(this._input.value,f)}});c.exports=function(f,g){return new d(f,g)}},{"./geocoder":13}],15:[function(b,c){function a(d){return d>=93&&d--,d>=35&&d--,d-32}c.exports=function(d){return function(g,i){if(d){var h=a(d.grid[i].charCodeAt(g)),f=d.keys[h];return d.data[f]}}}},{}],16:[function(b,c){var a=b("./util"),f=b("mustache"),d=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:b("sanitize-caja"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(g,h){L.Util.setOptions(this,h),a.strict_instance(g,L.Class,"L.mapbox.gridLayer"),this._layer=g},setTemplate:function(e){return a.strict(e,"string"),this.options.template=e,this},_template:function(h,j){if(j){var g=this.options.template||this._layer.getTileJSON().template;if(g){var k={};return k["__"+h+"__"]=!0,this.options.sanitizer(f.to_html(g,L.extend(k,j)))}}},_show:function(g,h){g!==this._currentContent&&(this._currentContent=g,this.options.follow?(this._popup.setContent(g).setLatLng(h.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=g))},hide:function(){return this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable"),this},_mouseover:function(g){if(g.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var h=this._template("teaser",g.data);h?this._show(h,g):this.hide()}},_mousemove:function(e){this._pinned||this.options.follow&&this._popup.setLatLng(e.latLng)},_navigateTo:function(e){window.top.location.href=e},_click:function(h){var j=this._template("location",h.data);if(this.options.location&&j&&0===j.search(/^https?:/)){return this._navigateTo(this._template("location",h.data))}if(this.options.pinnable){var g=this._template("full",h.data);!g&&this.options.touchTeaser&&L.Browser.touch&&(g=this._template("teaser",h.data)),g?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(g,h)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this.hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(h,j){var g=L.DomUtil.create("a","close",h);return g.innerHTML="close",g.href="#",g.title="close",L.DomEvent.on(g,"click",L.DomEvent.stopPropagation).on(g,"mousedown",L.DomEvent.stopPropagation).on(g,"dblclick",L.DomEvent.stopPropagation).on(g,"click",L.DomEvent.preventDefault).on(g,"click",j,this),g},onAdd:function(h){this._map=h;var j="leaflet-control-grid map-tooltip",g=L.DomUtil.create("div",j),k=L.DomUtil.create("div","map-tooltip-content");return g.style.display="none",this._createClosebutton(g,this.hide),g.appendChild(k),this._contentWrapper=k,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),h.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(g).addListener(g,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),g},onRemove:function(e){e.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});c.exports=function(g,h){return new d(g,h)}},{"./util":28,mustache:7,"sanitize-caja":8}],17:[function(b,d){var a=b("./util"),g=(b("./url"),b("./request")),f=b("./grid"),c=L.Class.extend({includes:[L.Mixin.Events,b("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(h,i){L.Util.setOptions(this,i),this._loadTileJSON(h)},_setTileJSON:function(e){return a.strict(e,"object"),L.extend(this.options,{grids:e.grids,minZoom:e.minzoom,maxZoom:e.maxzoom,bounds:e.bounds&&a.lbounds(e.bounds)}),this._tilejson=e,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return !!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){this._map=e,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(v,q){if(this.active()){var p=this._map,k=p.project(v.wrap()),j=256,w=4,u=Math.floor(k.x/j),h=Math.floor(k.y/j),m=p.options.crs.scale(p.getZoom())/j;return u=(u+m)%m,h=(h+m)%m,this._getTile(p.getZoom(),u,h,function(o){var n=Math.floor((k.x-u*j)/w),e=Math.floor((k.y-h*j)/w);q(o(n,e))}),this}},_click:function(e){this.getData(e.latlng,L.bind(function(h){this.fire("click",{latLng:e.latlng,data:h})},this))},_move:function(e){this.getData(e.latlng,L.bind(function(h){h!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:e.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:e.latlng,data:h}),this._mouseOn=h):this.fire("mousemove",{latLng:e.latlng,data:h})},this))},_getTileURL:function(j){var k=this.options.grids,h=(j.x+j.y)%k.length,l=k[h];return L.Util.template(l,j)},_update:function(){if(this.active()){var x=this._map.getPixelBounds(),v=this._map.getZoom(),q=256;if(!(v>this.options.maxZoom||v<this.options.minZoom)){for(var m=new L.Point(Math.floor(x.min.x/q),Math.floor(x.min.y/q)),k=new L.Point(Math.floor(x.max.x/q),Math.floor(x.max.y/q)),y=this._map.options.crs.scale(v)/q,w=m.x;w<=k.x;w++){for(var j=m.y;j<=k.y;j++){var p=(w+y)%y,u=(j+y)%y;this._getTile(v,p,u)}}}}},_getTile:function(k,n,j,l){var h=k+"_"+n+"_"+j,m=L.point(n,j);if(m.z=k,this._tileShouldBeLoaded(m)){if(h in this._cache){if(!l){return}return"function"==typeof this._cache[h]?l(this._cache[h]):this._cache[h].push(l),void 0}this._cache[h]=[],l&&this._cache[h].push(l),g(this._getTileURL(m),L.bind(function(p,q){var o=this._cache[h];this._cache[h]=f(q);for(var r=0;r<o.length;++r){o[r](this._cache[h])}},this))}},_tileShouldBeLoaded:function(k){if(k.z>this.options.maxZoom||k.z<this.options.minZoom){return !1}if(this.options.bounds){var m=256,j=k.multiplyBy(m),q=j.add(new L.Point(m,m)),p=this._map.unproject(j),l=this._map.unproject(q),h=new L.LatLngBounds([p,l]);if(!this.options.bounds.intersects(h)){return !1}}return !0}});d.exports=function(h,i){return new c(h,i)}},{"./grid":15,"./load_tilejson":20,"./request":23,"./url":27,"./util":28}],18:[function(b,c){var a=L.Control.extend({options:{position:"bottomright",sanitizer:b("sanitize-caja")},initialize:function(d){L.setOptions(this,d),this._info={}},onAdd:function(f){this._container=L.DomUtil.create("div","mapbox-control-info mapbox-small"),this._content=L.DomUtil.create("div","map-info-container",this._container),("bottomright"===this.options.position||"topright"===this.options.position)&&(this._container.className+=" mapbox-control-info-right");var g=L.DomUtil.create("a","mapbox-info-toggle mapbox-icon mapbox-icon-info",this._container);g.href="#",L.DomEvent.addListener(g,"click",this._showInfo,this),L.DomEvent.disableClickPropagation(this._container);for(var d in f._layers){f._layers[d].getAttribution&&this.addInfo(f._layers[d].getAttribution())}return f.on("moveend",this._editLink,this).on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(d){d.off("moveend",this._editLink,this).off("layeradd",this._onLayerAdd,this).off("layerremove",this._onLayerRemove,this)},addInfo:function(d){return d?(this._info[d]||(this._info[d]=0),this._info[d]=!0,this._update()):this},removeInfo:function(d){return d?(this._info[d]&&(this._info[d]=!1),this._update()):this},_showInfo:function(d){return L.DomEvent.preventDefault(d),this._active===!0?this._hidecontent():(L.DomUtil.addClass(this._container,"active"),this._active=!0,this._update(),void 0)},_hidecontent:function(){this._content.innerHTML="",this._active=!1,L.DomUtil.removeClass(this._container,"active")},_update:function(){if(!this._map){return this}this._content.innerHTML="";var f="none",g=[];for(var d in this._info){this._info.hasOwnProperty(d)&&this._info[d]&&(g.push(this.options.sanitizer(d)),f="block")}return this._content.innerHTML+=g.join(" | "),this._editLink(),this._container.style.display=f,this},_editLink:function(){if(this._content.getElementsByClassName){var f=this._content.getElementsByClassName("mapbox-improve-map");if(f.length&&this._map._loaded){for(var g=this._map.getCenter().wrap(),d=this._tilejson||this._map._tilejson||{},j=d.id||"",h=0;h<f.length;h++){f[h].href=f[h].href.split("#")[0]+"#"+j+"/"+g.lng.toFixed(3)+"/"+g.lat.toFixed(3)+"/"+this._map.getZoom()}}}},_onLayerAdd:function(d){d.layer.getAttribution&&d.layer.getAttribution()?this.addInfo(d.layer.getAttribution()):"on" in d.layer&&d.layer.getAttribution&&d.layer.on("ready",L.bind(function(){this.addInfo(d.layer.getAttribution())},this))},_onLayerRemove:function(d){d.layer.getAttribution&&this.removeInfo(d.layer.getAttribution())}});c.exports=function(d){return new a(d)}},{"sanitize-caja":8}],19:[function(b,c){var a=L.Control.extend({options:{position:"bottomright",sanitizer:b("sanitize-caja")},initialize:function(d){L.setOptions(this,d),this._legends={}},onAdd:function(){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(d){return d?(this._legends[d]||(this._legends[d]=0),this._legends[d]++,this._update()):this},removeLegend:function(d){return d?(this._legends[d]&&this._legends[d]--,this._update()):this},_update:function(){if(!this._map){return this}this._container.innerHTML="";var f="none";for(var g in this._legends){if(this._legends.hasOwnProperty(g)&&this._legends[g]){var d=L.DomUtil.create("div","map-legend wax-legend",this._container);d.innerHTML=this.options.sanitizer(g),f="block"}}return this._container.style.display=f,this}});c.exports=function(d){return new a(d)}},{"sanitize-caja":8}],20:[function(b,c){var a=b("./request"),f=b("./url"),d=b("./util");c.exports={_loadTileJSON:function(e){"string"==typeof e?(-1==e.indexOf("/")&&(e=f.base()+e+".json"),a(f.secureFlag(e),L.bind(function(h,g){h?(d.log("could not load TileJSON at "+e),this.fire("error",{error:h})):g&&(this._setTileJSON(g),this.fire("ready"))},this))):e&&"object"==typeof e&&this._setTileJSON(e)}}},{"./request":23,"./url":27,"./util":28}],21:[function(p,k){var g=(p("./util"),p("./tile_layer")),d=p("./feature_layer"),c=p("./grid_layer"),q=p("./grid_control"),m=p("./info_control"),b=p("./share_control"),f=p("./legend_control"),j=L.Map.extend({includes:[p("./load_tilejson")],options:{tileLayer:{},featureLayer:{},gridLayer:{},legendControl:{},gridControl:{},infoControl:{},attributionControl:!1,shareControl:!1},_tilejson:{},initialize:function(a,l,i){L.Map.prototype.initialize.call(this,a,i),this.attributionControl&&this.attributionControl.setPrefix(""),this.options.tileLayer&&(this.tileLayer=g(void 0,this.options.tileLayer),this.addLayer(this.tileLayer)),this.options.featureLayer===!1||this.options.markerLayer===!1?this.options.featureLayer=this.options.markerLayer=!1:this.options.markerLayer&&(this.options.featureLayer=this.options.markerLayer),this.options.featureLayer&&(this.featureLayer=this.markerLayer=d(void 0,this.options.featureLayer),this.addLayer(this.featureLayer)),this.options.gridLayer&&(this.gridLayer=c(void 0,this.options.gridLayer),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=q(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.infoControl&&(this.infoControl=m(this.options.infoControl),this.addControl(this.infoControl)),this.options.legendControl&&(this.legendControl=f(this.options.legendControl),this.addControl(this.legendControl)),this.options.shareControl&&(this.shareControl=b(void 0,this.options.shareControl),this.addControl(this.shareControl)),this._loadTileJSON(l)},addLayer:function(a){return"on" in a&&a.on("ready",L.bind(function(){this._updateLayer(a)},this)),L.Map.prototype.addLayer.call(this,a)},_setTileJSON:function(a){return this._tilejson=a,this._initialize(a),this},getTileJSON:function(){return this._tilejson},_initialize:function(h){if(this.tileLayer&&(this.tileLayer._setTileJSON(h),this._updateLayer(this.tileLayer)),this.featureLayer&&!this.featureLayer.getGeoJSON()&&h.data&&h.data[0]&&this.featureLayer.loadURL(h.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(h),this._updateLayer(this.gridLayer)),this.infoControl&&h.attribution&&this.infoControl.addInfo(h.attribution),this.legendControl&&h.legend&&this.legendControl.addLegend(h.legend),this.shareControl&&this.shareControl._setTileJSON(h),!this._loaded&&h.center){var l=h.center[2],a=L.latLng(h.center[1],h.center[0]);this.setView(a,l)}},_updateLayer:function(a){a.options&&(this.infoControl&&this._loaded&&this.infoControl.addInfo(a.options.infoControl),this.attributionControl&&this._loaded&&a.getAttribution&&this.attributionControl.addAttribution(a.getAttribution()),L.stamp(a) in this._zoomBoundLayers||!a.options.maxZoom&&!a.options.minZoom||(this._zoomBoundLayers[L.stamp(a)]=a),this._updateZoomLevels())}});k.exports=function(h,l,a){return new j(h,l,a)}},{"./feature_layer":12,"./grid_control":16,"./grid_layer":17,"./info_control":18,"./legend_control":19,"./load_tilejson":20,"./share_control":24,"./tile_layer":26,"./util":28}],22:[function(d,h){function c(l){l=l||{};var m={small:[20,50],medium:[30,70],large:[35,90]},a=l["marker-size"]||"medium",q=l["marker-symbol"]?"-"+l["marker-symbol"]:"",p=(l["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:f.base()+"marker/pin-"+a.charAt(0)+q+"+"+p+(L.Browser.retina?"@2x":"")+".png",iconSize:m[a],iconAnchor:[m[a][0]/2,m[a][1]/2],popupAnchor:[0,-m[a][1]/2]})}function k(a,i){return L.marker(i,{icon:c(a.properties),title:b.strip_tags(g(a.properties&&a.properties.title||""))})}function j(l,m){if(!l||!l.properties){return""}var a="";return l.properties.title&&(a+='<div class="marker-title">'+l.properties.title+"</div>"),l.properties.description&&(a+='<div class="marker-description">'+l.properties.description+"</div>"),(m||g)(a)}var f=d("./url"),b=d("./util"),g=d("sanitize-caja");h.exports={icon:c,style:k,createPopup:j}},{"./url":27,"./util":28,"sanitize-caja":8}],23:[function(b,c){var a=b("corslite"),f=b("json3"),d=b("./util").strict;c.exports=function(g,i){function h(j,e){!j&&e&&(e="g"==e.responseText[0]?f.parse(e.responseText.substring(5,e.responseText.length-2)):f.parse(e.responseText)),i(j,e)}return d(g,"string"),d(i,"function"),a(g,h)}},{"./util":28,corslite:4,json3:5}],24:[function(b,c){var a=b("./url"),d=L.Control.extend({includes:[b("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(f,g){L.setOptions(this,g),this._loadTileJSON(f)},_setTileJSON:function(e){this._tilejson=e},onAdd:function(f){this._map=f,this._url=a;var g=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),h=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",g);return h.href="#",this._modal=f._createPane("mapbox-modal",this._map._container),this._mask=f._createPane("mapbox-modal-mask",this._modal),this._content=f._createPane("mapbox-modal-content",this._modal),L.DomEvent.addListener(h,"click",this._shareClick,this),L.DomEvent.disableClickPropagation(g),this._map.on("mousedown",this._clickOut,this),g},_clickOut:function(e){return this._sharing?(L.DomEvent.preventDefault(e),L.DomUtil.removeClass(this._modal,"active"),this._content.innerHTML="",this._sharing=null,void 0):void 0},_shareClick:function(B){if(L.DomEvent.stop(B),this._sharing){return this._clickOut(B)}var w=this._tilejson||this._map._tilejson||{},q=encodeURIComponent(this.options.url||w.webpage||window.location),k=encodeURIComponent(w.name),j=this._url.base()+w.id+"/"+this._map.getCenter().lng+","+this._map.getCenter().lat+","+this._map.getZoom()+"/600x600.png",C="//twitter.com/intent/tweet?status="+k+" "+q,z="//www.facebook.com/sharer.php?u="+q+"&t="+encodeURIComponent(w.name),f="//www.pinterest.com/pin/create/button/?url="+q+"&media="+j+"&description="+w.name,m="<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-button mapbox-button-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-button mapbox-button-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a><a class='mapbox-button mapbox-button-icon mapbox-icon-pinterest' target='_blank' href='{{pinterest}}'>Pinterest</a></div>".replace("{{twitter}}",C).replace("{{facebook}}",z).replace("{{pinterest}}",f),v='<iframe width="100%" height="500px" frameBorder="0" src="{{embed}}"></iframe>'.replace("{{embed}}",w.embed||window.location),A="Copy and paste this <strong>HTML code</strong> into documents to embed this map on web pages.";L.DomUtil.addClass(this._modal,"active"),this._sharing=this._map._createPane("mapbox-modal-body",this._content),this._sharing.innerHTML=m;var y=L.DomUtil.create("input","mapbox-embed",this._sharing);y.type="text",y.value=v;var g=L.DomUtil.create("label","mapbox-embed-description",this._sharing);g.innerHTML=A;var x=L.DomUtil.create("a","leaflet-popup-close-button",this._sharing);x.href="#",L.DomEvent.disableClickPropagation(this._sharing),L.DomEvent.addListener(x,"click",this._clickOut,this),L.DomEvent.addListener(y,"click",function(e){e.target.focus(),e.target.select()})}});c.exports=function(f,g){return new d(f,g)}},{"./load_tilejson":20,"./url":27}],25:[function(d,g){function c(k,l){var a={};for(var m in l){a[m]=void 0===k[m]?l[m]:k[m]}return a}function j(k){for(var l={},a=0;a<b.length;a++){l[b[a][1]]=k[b[a][0]]}return l}function h(a){return j(c(a.properties||{},f))}var f={stroke:"#555555","stroke-width":2,"stroke-opacity":1,fill:"#555555","fill-opacity":0.5},b=[["stroke","color"],["stroke-width","weight"],["stroke-opacity","opacity"],["fill","fillColor"],["fill-opacity","fillOpacity"]];g.exports={style:h,defaults:f}},{}],26:[function(b,c){var a=b("./util"),d=(b("./url"),L.TileLayer.extend({includes:[b("./load_tilejson")],options:{format:"png"},formats:["png","png32","png64","png128","png256","jpg70","jpg80","jpg90"],scalePrefix:"@2x.",initialize:function(f,g){L.TileLayer.prototype.initialize.call(this,void 0,g),this._tilejson={},g&&g.detectRetina&&L.Browser.retina&&g.retinaVersion&&(f=g.retinaVersion),g&&g.format&&a.strict_oneof(g.format,this.formats),this._loadTileJSON(f)},setFormat:function(e){return a.strict(e,"string"),this.options.format=e,this.redraw(),this},_autoScale:function(){return this.options&&L.Browser.retina&&this.options.detectRetina&&!this.options.retinaVersion&&this.options.autoscale},setUrl:null,_setTileJSON:function(e){return a.strict(e,"object"),L.extend(this.options,{tiles:e.tiles,attribution:e.attribution,minZoom:e.minzoom,maxZoom:e.maxzoom,autoscale:e.autoscale||!1,tms:"tms"===e.scheme,bounds:e.bounds&&a.lbounds(e.bounds)}),this._tilejson=e,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(g){var h=this.options.tiles,f=Math.floor(Math.abs(g.x+g.y)%h.length),k=h[f],j=L.Util.template(k,g);return j?j.replace(".png",(this._autoScale()?this.scalePrefix:".")+this.options.format):j},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}}));c.exports=function(f,g){return new d(f,g)}},{"./load_tilejson":20,"./url":27,"./util":28}],27:[function(b,c){var a=b("./config");c.exports={isSSL:function(){return"https:"===document.location.protocol||a.FORCE_HTTPS},base:function(d){var f=this.isSSL()?a.HTTPS_URLS:a.HTTP_URLS;return void 0===d||"number"!=typeof d?f[0]:f[d%f.length]},secureFlag:function(d){return this.isSSL()?d.match(/(\?|&)secure/)?d:-1!==d.indexOf("?")?d+"&secure":d+"?secure":d},jsonify:function(d){return d.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":11}],28:[function(b,c){function a(f,g){if(!g||!g.length){return !1}for(var d=0;d<g.length;d++){if(g[d]==f){return !0}}return !1}c.exports={idUrl:function(d,f){-1==d.indexOf("/")?f.loadID(d):f.loadURL(d)},log:function(d){console&&"function"==typeof console.error&&console.error(d)},strict:function(d,f){if(typeof d!==f){throw new Error("Invalid argument: "+f+" expected")}},strict_instance:function(f,g,d){if(!(f instanceof g)){throw new Error("Invalid argument: "+d+" expected")}},strict_oneof:function(d,f){if(!a(d,f)){throw new Error("Invalid argument: "+d+" given, valid values are "+f.join(", "))}},strip_tags:function(d){return d.replace(/<[^<]+>/g,"")},lbounds:function(d){return new L.LatLngBounds([[d[1],d[0]],[d[3],d[2]]])}}},{}]},{},[1]);