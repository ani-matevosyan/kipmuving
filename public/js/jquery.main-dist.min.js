function initCustomForms(){jcf.setOptions("Select",{wrapNative:!1,wrapNativeOnMobile:!1,maxVisibleItems:5}),jcf.replaceAll()}function initAccordion(){jQuery("ul.accordion").slideAccordion({opener:"a.opener",slider:"div.slide",animSpeed:300})}function initMobileNav(){jQuery("body").mobileNav({menuActiveClass:"nav-active",menuOpener:".nav-opener"})}function initSameHeight(){jQuery(".two-columns, .packages").sameHeight({elements:".box",flexible:!0,multiLine:!0})}jQuery(window).load(function(){initCustomForms(),initAccordion(),initMobileNav(),initSameHeight(),jQuery("input, textarea").placeholder()}),function(c){c.fn.slideAccordion=function(d){var e=c.extend({addClassBeforeAnimation:!1,allowClickWhenExpanded:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:300,collapsible:!0,event:"click"},d);return this.each(function(){var f=c(this),g=f.find(":has("+e.slider+")");g.each(function(){var j=c(this),k=j.find(e.opener),h=j.find(e.slider);k.bind(e.event,function(l){if(!h.is(":animated")){if(j.hasClass(e.activeClass)){if(e.allowClickWhenExpanded){return}e.collapsible&&h.slideUp(e.animSpeed,function(){b(h),j.removeClass(e.activeClass)})}else{var m=j.siblings("."+e.activeClass),i=m.find(e.slider);j.addClass(e.activeClass),a(h).hide().slideDown(e.animSpeed),i.slideUp(e.animSpeed,function(){m.removeClass(e.activeClass),b(i)})}}l.preventDefault()}),j.hasClass(e.activeClass)?a(h):b(h)})})};var a=function(d){return d.css({position:"",top:"",left:"",width:""})},b=function(d){return d.show().css({position:"absolute",top:-9999,left:-9999,width:d.width()})}}(jQuery),function(c){function a(d){this.options=c.extend({container:null,hideOnClickOutside:!1,menuActiveClass:"nav-active",menuOpener:".nav-opener",menuDrop:".nav-drop",toggleEvent:"click",outsideClickEvent:"click touchstart pointerdown MSPointerDown"},d),this.initStructure(),this.attachEvents()}a.prototype={initStructure:function(){this.page=c("html"),this.container=c(this.options.container),this.opener=this.container.find(this.options.menuOpener),this.drop=this.container.find(this.options.menuDrop)},attachEvents:function(){var d=this;b&&(b(),b=null),this.outsideClickHandler=function(f){if(d.isOpened()){var e=c(f.target);e.closest(d.opener).length||e.closest(d.drop).length||d.hide()}},this.openerClickHandler=function(f){f.preventDefault(),d.toggle()},this.opener.on(this.options.toggleEvent,this.openerClickHandler)},isOpened:function(){return this.container.hasClass(this.options.menuActiveClass)},show:function(){this.container.addClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.on(this.options.outsideClickEvent,this.outsideClickHandler)},hide:function(){this.container.removeClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)},toggle:function(){this.isOpened()?this.hide():this.show()},destroy:function(){this.container.removeClass(this.options.menuActiveClass),this.opener.off(this.options.toggleEvent,this.clickHandler),this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)}};var b=function(){var g,h,f=c(window),k=c("html"),j="resize-active",e=function(){g=!1,k.removeClass(j)},d=function(){g||(g=!0,k.addClass(j)),clearTimeout(h),h=setTimeout(e,500)};f.on("resize orientationchange",d)};c.fn.mobileNav=function(d){return this.each(function(){var e=c.extend({},d,{container:this}),f=new a(e);c.data(this,"MobileNav",f)})}}(jQuery),function(d){function b(i,m){var g,e=d(),k=0,j=i.eq(0).offset().top;i.each(function(){var h=d(this);h.offset().top===j?e=e.add(this):(g=c(e),k=Math.max(k,a(e,g,m)),e=h,j=h.offset().top)}),e.length&&(g=c(e),k=Math.max(k,a(e,g,m))),m.biggestHeight&&i.css(m.useMinHeight&&f?"minHeight":"height",k)}function c(e){var g=0;return e.each(function(){g=Math.max(g,d(this).outerHeight())}),g}function a(h,j,g){var k,e="number"==typeof j?j:j.height();return h.removeClass(g.leftEdgeClass).removeClass(g.rightEdgeClass).each(function(){var l=d(this),i=0,m="border-box"===l.css("boxSizing")||"border-box"===l.css("-moz-box-sizing")||"border-box"===l.css("-webkit-box-sizing");"number"!=typeof j&&l.parents().each(function(){var n=d(this);return j.is(this)?!1:void (i+=n.outerHeight()-n.height())}),k=e-i,k-=m?0:l.outerHeight()-l.height(),k>0&&l.css(g.useMinHeight&&f?"minHeight":"height",k)}),h.filter(":first").addClass(g.leftEdgeClass),h.filter(":last").addClass(g.rightEdgeClass),k}d.fn.sameHeight=function(e){var g=d.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",elements:">*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},e);return this.each(function(){function m(){k.css(g.useMinHeight&&f?"minHeight":"height",""),g.multiLine?b(k,g):a(k,n,g)}var j,i,n=d(this),k=n.find(g.elements).not("."+g.skipClass);if(k.length){m();var o=function(){i||(i=!0,m(),clearTimeout(j),j=setTimeout(function(){m(),setTimeout(function(){i=!1},10)},100))};g.flexible&&d(window).bind("resize orientationchange fontresize",o),d(window).bind("load",o)}})};var f="undefined"!=typeof document.documentElement.style.maxHeight}(jQuery),jQuery.onFontResize=function(a){return a(function(){var c="font-resize-frame-"+Math.floor(1000*Math.random()),d=a("<iframe>").attr("id",c).addClass("font-resize-helper");if(d.css({width:"100em",height:"10px",position:"absolute",borderWidth:0,top:"-9999px",left:"-9999px"}).appendTo("body"),window.attachEvent&&!window.addEventListener){d.bind("resize",function(){a.onFontResize.trigger(d[0].offsetWidth/100)})}else{var b=d[0].contentWindow.document;b.open(),b.write('<script>window.onload = function(){var em = parent.jQuery("#'+c+'")[0];window.onresize = function(){if(parent.jQuery.onFontResize){parent.jQuery.onFontResize.trigger(em.offsetWidth / 100);}}};<\/script>'),b.close()}jQuery.onFontResize.initialSize=d[0].offsetWidth/100}),{trigger:function(b){a(window).trigger("fontresize",[b])}}}(jQuery),function(x,C,D){function q(d){var c={},a=/^jQuery\d+$/;return D.each(d.attributes,function(h,f){f.specified&&!a.test(f.name)&&(c[f.name]=f.value)}),c}function k(d,c){var a=this,f=D(a);if(a.value==f.attr("placeholder")&&f.hasClass("placeholder")){if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),d===!0){return f[0].value=c}f.focus()}else{a.value="",f.removeClass("placeholder"),a==m()&&a.select()}}}function j(){var h,f=this,i=D(f),d=this.id;if(""==f.value){if("password"==f.type){if(!i.data("placeholder-textinput")){try{h=i.clone().attr({type:"text"})}catch(c){h=D("<input>").attr(D.extend(q(this),{type:"text"}))}h.removeAttr("name").data({"placeholder-password":i,"placeholder-id":d}).bind("focus.placeholder",k),i.data({"placeholder-textinput":h,"placeholder-id":d}).before(h)}i=i.removeAttr("id").hide().prev().attr("id",d).show()}i.addClass("placeholder"),i[0].value=i.attr("placeholder")}else{i.removeClass("placeholder")}}function m(){try{return C.activeElement}catch(a){}}var A,b,v="[object OperaMini]"==Object.prototype.toString.call(x.operamini),z="placeholder" in C.createElement("input")&&!v,g="placeholder" in C.createElement("textarea")&&!v,y=D.fn,B=D.valHooks,w=D.propHooks;z&&g?(b=y.placeholder=function(){return this},b.input=b.textarea=!0):(b=y.placeholder=function(){var a=this;return a.filter((z?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":k,"blur.placeholder":j}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},b.input=z,b.textarea=g,A={get:function(d){var c=D(d),a=c.data("placeholder-password");return a?a[0].value:c.data("placeholder-enabled")&&c.hasClass("placeholder")?"":d.value},set:function(h,f){var d=D(h),c=d.data("placeholder-password");return c?c[0].value=f:d.data("placeholder-enabled")?(""==f?(h.value=f,h!=m()&&j.call(h)):d.hasClass("placeholder")?k.call(h,!0,f)||(h.value=f):h.value=f,d):h.value=f}},z||(B.input=A,w.value=A),g||(B.textarea=A,w.value=A),D(function(){D(C).delegate("form","submit.placeholder",function(){var a=D(".placeholder",this).each(k);setTimeout(function(){a.each(j)},10)})}),D(x).bind("beforeunload.placeholder",function(){D(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(b,a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):b.jcf=a(jQuery)}(this,function(h){var k="1.1.3",m=[],g={optionsKey:"jcf",dataKey:"jcf-instance",rtlClass:"jcf-rtl",focusClass:"jcf-focus",pressedClass:"jcf-pressed",disabledClass:"jcf-disabled",hiddenClass:"jcf-hidden",resetAppearanceClass:"jcf-reset-appearance",unselectableClass:"jcf-unselectable"},d="ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch,c=/Windows Phone/.test(navigator.userAgent);g.isMobileDevice=!(!d&&!c);var f=function(){var e=h("<style>").appendTo("head"),i=e.prop("sheet")||e.prop("styleSheet"),q=function(o,n,l){i.insertRule?i.insertRule(o+"{"+n+"}",l):i.addRule(o,n,l)};q("."+g.hiddenClass,"position:absolute !important;left:-9999px !important;height:1px !important;width:1px !important;margin:0 !important;border-width:0 !important;-webkit-appearance:none;-moz-appearance:none;appearance:none"),q("."+g.rtlClass+" ."+g.hiddenClass,"right:-9999px !important; left: auto !important"),q("."+g.unselectableClass,"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0);"),q("."+g.resetAppearanceClass,"background: none; border: none; -webkit-appearance: none; appearance: none; opacity: 0; filter: alpha(opacity=0);");var p=h("html"),a=h("body");("rtl"===p.css("direction")||"rtl"===a.css("direction"))&&p.addClass(g.rtlClass),p.on("reset",function(){setTimeout(function(){b.refreshAll()},0)}),g.styleSheetCreated=!0};!function(){var u,v=navigator.pointerEnabled||navigator.msPointerEnabled,q="ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch,y={},x="jcf-";u=v?{pointerover:navigator.pointerEnabled?"pointerover":"MSPointerOver",pointerdown:navigator.pointerEnabled?"pointerdown":"MSPointerDown",pointermove:navigator.pointerEnabled?"pointermove":"MSPointerMove",pointerup:navigator.pointerEnabled?"pointerup":"MSPointerUp"}:{pointerover:"mouseover",pointerdown:"mousedown"+(q?" touchstart":""),pointermove:"mousemove"+(q?" touchmove":""),pointerup:"mouseup"+(q?" touchend":"")},h.each(u,function(a,i){h.each(i.split(" "),function(n,l){y[l]=a})}),h.each(u,function(a,i){i=i.split(" "),h.event.special[x+a]={setup:function(){var l=this;h.each(i,function(o,n){l.addEventListener?l.addEventListener(n,w,!1):l["on"+n]=w})},teardown:function(){var l=this;h.each(i,function(o,n){l.addEventListener?l.removeEventListener(n,w,!1):l["on"+n]=null})}}});var p=null,e=function(o){var l=Math.abs(o.pageX-p.x),n=Math.abs(o.pageY-p.y),a=25;return a>=l&&a>=n?!0:void 0},w=function(l){var n=l||window.event,a=null,o=y[n.type];if(l=h.event.fix(n),l.type=x+o,n.pointerType){switch(n.pointerType){case 2:l.pointerType="touch";break;case 3:l.pointerType="pen";break;case 4:l.pointerType="mouse";break;default:l.pointerType=n.pointerType}}else{l.pointerType=n.type.substr(0,5)}return l.pageX||l.pageY||(a=n.changedTouches?n.changedTouches[0]:n,l.pageX=a.pageX,l.pageY=a.pageY),"touchend"===n.type&&(p={x:l.pageX,y:l.pageY}),"mouse"===l.pointerType&&p&&e(l)?void 0:(h.event.dispatch||h.event.handle).call(this,l)}}(),function(){var e=("onwheel" in document||document.documentMode>=9?"wheel":"mousewheel DOMMouseScroll").split(" "),l="jcf-mousewheel";h.event.special[l]={setup:function(){var i=this;h.each(e,function(o,n){i.addEventListener?i.addEventListener(n,a,!1):i["on"+n]=a})},teardown:function(){var i=this;h.each(e,function(o,n){i.addEventListener?i.removeEventListener(n,a,!1):i["on"+n]=null})}};var a=function(p){var o=p||window.event;if(p=h.event.fix(o),p.type=l,"detail" in o&&(p.deltaY=-o.detail),"wheelDelta" in o&&(p.deltaY=-o.wheelDelta),"wheelDeltaY" in o&&(p.deltaY=-o.wheelDeltaY),"wheelDeltaX" in o&&(p.deltaX=-o.wheelDeltaX),"deltaY" in o&&(p.deltaY=o.deltaY),"deltaX" in o&&(p.deltaX=o.deltaX),p.delta=p.deltaY||p.deltaX,1===o.deltaMode){var q=16;p.delta*=q,p.deltaY*=q,p.deltaX*=q}return(h.event.dispatch||h.event.handle).call(this,p)}}();var j={fireNativeEvent:function(a,e){h(a).each(function(){var l,i=this;i.dispatchEvent?(l=document.createEvent("HTMLEvents"),l.initEvent(e,!0,!0),i.dispatchEvent(l)):document.createEventObject&&(l=document.createEventObject(),l.target=i,i.fireEvent("on"+e,l))})},bindHandlers:function(){var a=this;h.each(a,function(l,e){0===l.indexOf("on")&&h.isFunction(e)&&(a[l]=function(){return e.apply(a,arguments)})})}},b={version:k,modules:{},getOptions:function(){return h.extend({},g)},setOptions:function(a,e){arguments.length>1?this.modules[a]&&h.extend(this.modules[a].prototype.options,e):h.extend(g,a)},addModule:function(e){var p=function(l){l.element.data(g.dataKey)||l.element.data(g.dataKey,this),m.push(this),this.options=h.extend({},g,this.options,i(l.element),l),this.bindHandlers(),this.init.apply(this,arguments)},i=function(l){var q=l.data(g.optionsKey),u=l.attr(g.optionsKey);if(q){return q}if(u){try{return h.parseJSON(u)}catch(r){}}};p.prototype=e,h.extend(e,j),e.plugins&&h.each(e.plugins,function(l,n){h.extend(n.prototype,j)});var a=p.prototype.destroy;p.prototype.destroy=function(){this.options.element.removeData(this.options.dataKey);for(var l=m.length-1;l>=0;l--){if(m[l]===this){m.splice(l,1);break}}a&&a.apply(this,arguments)},this.modules[e.name]=p},getInstance:function(a){return h(a).data(g.dataKey)},replace:function(i,l,q){var p,e=this;return g.styleSheetCreated||f(),h(i).each(function(){var n,a=h(this);p=a.data(g.dataKey),p?p.refresh():(l||h.each(e.modules,function(r,o){return o.prototype.matchElement.call(o.prototype,a)?(l=r,!1):void 0}),l&&(n=h.extend({element:a},q),p=new e.modules[l](n)))}),p},refresh:function(a){h(a).each(function(){var e=h(this).data(g.dataKey);e&&e.refresh()})},destroy:function(a){h(a).each(function(){var e=h(this).data(g.dataKey);e&&e.destroy()})},replaceAll:function(a){var e=this;h.each(this.modules,function(l,o){h(o.prototype.selector,a).each(function(){this.className.indexOf("jcf-ignore")<0&&e.replace(this,l)})})},refreshAll:function(a){if(a){h.each(this.modules,function(i,l){h(l.prototype.selector,a).each(function(){var n=h(this).data(g.dataKey);n&&n.refresh()})})}else{for(var e=m.length-1;e>=0;e--){m[e].refresh()}}},destroyAll:function(a){if(a){h.each(this.modules,function(e,i){h(i.prototype.selector,a).each(function(l,o){var p=h(o).data(g.dataKey);p&&p.destroy()})})}else{for(;m.length;){m[0].destroy()}}}};return window.jcf=b,b}),function(f,c){function d(e){this.options=f.extend({wrapNative:!0,wrapNativeOnMobile:!0,fakeDropInBody:!0,useCustomScroll:!0,flipDropToFit:!0,maxVisibleItems:10,fakeAreaStructure:'<span class="jcf-select"><span class="jcf-select-text"></span><span class="jcf-select-opener"></span></span>',fakeDropStructure:'<div class="jcf-select-drop"><div class="jcf-select-drop-content"></div></div>',optionClassPrefix:"jcf-option-",selectClassPrefix:"jcf-select-",dropContentSelector:".jcf-select-drop-content",selectTextSelector:".jcf-select-text",dropActiveClass:"jcf-drop-active",flipDropClass:"jcf-drop-flipped"},e),this.init()}function b(e){this.options=f.extend({wrapNative:!0,useCustomScroll:!0,fakeStructure:'<span class="jcf-list-box"><span class="jcf-list-wrapper"></span></span>',selectClassPrefix:"jcf-select-",listHolder:".jcf-list-wrapper"},e),this.init()}function h(e){this.options=f.extend({holder:null,maxVisibleItems:10,selectOnClick:!0,useHoverClass:!1,useCustomScroll:!1,handleResize:!0,multipleSelectWithoutKey:!1,alwaysPreventMouseWheel:!1,indexAttribute:"data-index",cloneClassPrefix:"jcf-option-",containerStructure:'<span class="jcf-list"><span class="jcf-list-content"></span></span>',containerSelector:".jcf-list-content",captionClass:"jcf-optgroup-caption",disabledClass:"jcf-disabled",optionClass:"jcf-option",groupClass:"jcf-optgroup",hoverClass:"jcf-hover",selectedClass:"jcf-selected",scrollClass:"jcf-scroll-active"},e),this.init()}jcf.addModule({name:"Select",selector:"select",options:{element:null,multipleCompactStyle:!1},plugins:{ListBox:b,ComboBox:d,SelectList:h},matchElement:function(i){return i.is("select")},init:function(){this.element=f(this.options.element),this.createInstance()},isListBox:function(){return this.element.is("[size]:not([jcf-size]), [multiple]")},createInstance:function(){this.instance&&this.instance.destroy(),this.isListBox()&&!this.options.multipleCompactStyle?this.instance=new b(this.options):this.instance=new d(this.options)},refresh:function(){var i=this.isListBox()&&this.instance instanceof d||!this.isListBox()&&this.instance instanceof b;i?this.createInstance():this.instance.refresh()},destroy:function(){this.instance.destroy()}}),f.extend(d.prototype,{init:function(){this.initStructure(),this.bindHandlers(),this.attachEvents(),this.refresh()},initStructure:function(){this.win=f(c),this.doc=f(document),this.realElement=f(this.options.element),this.fakeElement=f(this.options.fakeAreaStructure).insertAfter(this.realElement),this.selectTextContainer=this.fakeElement.find(this.options.selectTextSelector),this.selectText=f("<span></span>").appendTo(this.selectTextContainer),a(this.fakeElement),this.fakeElement.addClass(g(this.realElement.prop("className"),this.options.selectClassPrefix)),this.realElement.prop("multiple")&&this.fakeElement.addClass("jcf-compact-multiple"),this.options.isMobileDevice&&this.options.wrapNativeOnMobile&&!this.options.wrapNative&&(this.options.wrapNative=!0),this.options.wrapNative?this.realElement.prependTo(this.fakeElement).css({position:"absolute",height:"100%",width:"100%"}).addClass(this.options.resetAppearanceClass):(this.realElement.addClass(this.options.hiddenClass),this.fakeElement.attr("title",this.realElement.attr("title")),this.fakeDropTarget=this.options.fakeDropInBody?f("body"):this.fakeElement)},attachEvents:function(){var i=this;this.delayedRefresh=function(){setTimeout(function(){i.refresh(),i.list&&(i.list.refresh(),i.list.scrollToActiveOption())},1)},this.options.wrapNative?this.realElement.on({focus:this.onFocus,change:this.onChange,click:this.onChange,keydown:this.onChange}):(this.realElement.on({focus:this.onFocus,change:this.onChange,keydown:this.onKeyDown}),this.fakeElement.on({"jcf-pointerdown":this.onSelectAreaPress}))},onKeyDown:function(i){13===i.which?this.toggleDropdown():this.dropActive&&this.delayedRefresh()},onChange:function(){this.refresh()},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur),this.toggleListMode(!0),this.focusedFlag=!0)},onBlur:function(){this.pressedFlag||(this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur),this.toggleListMode(!1),this.focusedFlag=!1)},onResize:function(){this.dropActive&&this.hideDropdown()},onSelectDropPress:function(){this.pressedFlag=!0},onSelectDropRelease:function(j,i){this.pressedFlag=!1,"mouse"===i.pointerType&&this.realElement.focus()},onSelectAreaPress:function(e){var i=!this.options.fakeDropInBody&&f(e.target).closest(this.dropdown).length;i||e.button>1||this.realElement.is(":disabled")||(this.selectOpenedByEvent=e.pointerType,this.toggleDropdown(),this.focusedFlag||("mouse"===e.pointerType?this.realElement.focus():this.onFocus(e)),this.pressedFlag=!0,this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onSelectAreaRelease))},onSelectAreaRelease:function(i){this.focusedFlag&&"mouse"===i.pointerType&&this.realElement.focus(),this.pressedFlag=!1,this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onSelectAreaRelease)},onOutsideClick:function(j){var k=f(j.target),e=k.closest(this.fakeElement).length||k.closest(this.dropdown).length;e||this.hideDropdown()},onSelect:function(){this.refresh(),this.realElement.prop("multiple")?this.repositionDropdown():this.hideDropdown(),this.fireNativeEvent(this.realElement,"change")},toggleListMode:function(i){this.options.wrapNative||(i?this.realElement.attr({size:4,"jcf-size":""}):this.options.wrapNative||this.realElement.removeAttr("size jcf-size"))},createDropdown:function(){this.dropdown&&(this.list.destroy(),this.dropdown.remove()),this.dropdown=f(this.options.fakeDropStructure).appendTo(this.fakeDropTarget),this.dropdown.addClass(g(this.realElement.prop("className"),this.options.selectClassPrefix)),a(this.dropdown),this.realElement.prop("multiple")&&this.dropdown.addClass("jcf-compact-multiple"),this.options.fakeDropInBody&&this.dropdown.css({position:"absolute",top:-9999}),this.list=new h({useHoverClass:!0,handleResize:!1,alwaysPreventMouseWheel:!0,maxVisibleItems:this.options.maxVisibleItems,useCustomScroll:this.options.useCustomScroll,holder:this.dropdown.find(this.options.dropContentSelector),multipleSelectWithoutKey:this.realElement.prop("multiple"),element:this.realElement}),f(this.list).on({select:this.onSelect,press:this.onSelectDropPress,release:this.onSelectDropRelease})},repositionDropdown:function(){var v,x,y,q=this.fakeElement.offset(),m=this.fakeElement.outerWidth(),k=this.fakeElement.outerHeight(),p=this.dropdown.css("width",m).outerHeight(),w=this.win.scrollTop(),j=this.win.height(),u=!1;q.top+k+p>w+j&&q.top-p>w&&(u=!0),this.options.fakeDropInBody&&(y="static"!==this.fakeDropTarget.css("position")?this.fakeDropTarget.offset().top:0,this.options.flipDropToFit&&u?(x=q.left,v=q.top-p-y):(x=q.left,v=q.top+k-y),this.dropdown.css({width:m,left:x,top:v})),this.dropdown.add(this.fakeElement).toggleClass(this.options.flipDropClass,this.options.flipDropToFit&&u)},showDropdown:function(){this.realElement.prop("options").length&&(this.dropdown||this.createDropdown(),this.dropActive=!0,this.dropdown.appendTo(this.fakeDropTarget),this.fakeElement.addClass(this.options.dropActiveClass),this.refreshSelectedText(),this.repositionDropdown(),this.list.setScrollTop(this.savedScrollTop),this.list.refresh(),this.win.on("resize",this.onResize),this.doc.on("jcf-pointerdown",this.onOutsideClick))},hideDropdown:function(){this.dropdown&&(this.savedScrollTop=this.list.getScrollTop(),this.fakeElement.removeClass(this.options.dropActiveClass+" "+this.options.flipDropClass),this.dropdown.removeClass(this.options.flipDropClass).detach(),this.doc.off("jcf-pointerdown",this.onOutsideClick),this.win.off("resize",this.onResize),this.dropActive=!1,"touch"===this.selectOpenedByEvent&&this.onBlur())},toggleDropdown:function(){this.dropActive?this.hideDropdown():this.showDropdown()},refreshSelectedText:function(){var m,o=this.realElement.prop("selectedIndex"),k=this.realElement.prop("options")[o],p=k?k.getAttribute("data-image"):null,j="",e=this;this.realElement.prop("multiple")?(f.each(this.realElement.prop("options"),function(l,i){i.selected&&(j+=(j?", ":"")+i.innerHTML)}),j||(j=e.realElement.attr("placeholder")||""),this.selectText.removeAttr("class").html(j)):k?(this.currentSelectedText!==k.innerHTML||this.currentSelectedImage!==p)&&(m=g(k.className,this.options.optionClassPrefix),this.selectText.attr("class",m).html(k.innerHTML),p?(this.selectImage||(this.selectImage=f("<img>").prependTo(this.selectTextContainer).hide()),this.selectImage.attr("src",p).show()):this.selectImage&&this.selectImage.hide(),this.currentSelectedText=k.innerHTML,this.currentSelectedImage=p):(this.selectImage&&this.selectImage.hide(),this.selectText.removeAttr("class").empty())},refresh:function(){"none"===this.realElement.prop("style").display?this.fakeElement.hide():this.fakeElement.show(),this.refreshSelectedText(),this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(":disabled"))},destroy:function(){this.options.wrapNative?this.realElement.insertBefore(this.fakeElement).css({position:"",height:"",width:""}).removeClass(this.options.resetAppearanceClass):(this.realElement.removeClass(this.options.hiddenClass),this.realElement.is("[jcf-size]")&&this.realElement.removeAttr("size jcf-size")),this.fakeElement.remove(),this.doc.off("jcf-pointerup",this.onSelectAreaRelease),this.realElement.off({focus:this.onFocus})}}),f.extend(b.prototype,{init:function(){this.bindHandlers(),this.initStructure(),this.attachEvents()},initStructure:function(){this.realElement=f(this.options.element),this.fakeElement=f(this.options.fakeStructure).insertAfter(this.realElement),this.listHolder=this.fakeElement.find(this.options.listHolder),a(this.fakeElement),this.fakeElement.addClass(g(this.realElement.prop("className"),this.options.selectClassPrefix)),this.realElement.addClass(this.options.hiddenClass),this.list=new h({useCustomScroll:this.options.useCustomScroll,holder:this.listHolder,selectOnClick:!1,element:this.realElement})},attachEvents:function(){var e=this;this.delayedRefresh=function(i){i&&16===i.which||(clearTimeout(e.refreshTimer),e.refreshTimer=setTimeout(function(){e.refresh(),e.list.scrollToActiveOption()},1))},this.realElement.on({focus:this.onFocus,click:this.delayedRefresh,keydown:this.delayedRefresh}),f(this.list).on({select:this.onSelect,press:this.onFakeOptionsPress,release:this.onFakeOptionsRelease})},onFakeOptionsPress:function(j,i){this.pressedFlag=!0,"mouse"===i.pointerType&&this.realElement.focus()},onFakeOptionsRelease:function(j,i){this.pressedFlag=!1,"mouse"===i.pointerType&&this.realElement.focus()},onSelect:function(){this.fireNativeEvent(this.realElement,"change"),this.fireNativeEvent(this.realElement,"click")},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur),this.focusedFlag=!0)},onBlur:function(){this.pressedFlag||(this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur),this.focusedFlag=!1)},refresh:function(){this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(":disabled")),this.list.refresh()},destroy:function(){this.list.destroy(),this.realElement.insertBefore(this.fakeElement).removeClass(this.options.hiddenClass),this.fakeElement.remove()}}),f.extend(h.prototype,{init:function(){this.initStructure(),this.refreshSelectedClass(),this.attachEvents()},initStructure:function(){this.element=f(this.options.element),this.indexSelector="["+this.options.indexAttribute+"]",this.container=f(this.options.containerStructure).appendTo(this.options.holder),this.listHolder=this.container.find(this.options.containerSelector),this.lastClickedIndex=this.element.prop("selectedIndex"),this.rebuildList()},attachEvents:function(){this.bindHandlers(),this.listHolder.on("jcf-pointerdown",this.indexSelector,this.onItemPress),this.listHolder.on("jcf-pointerdown",this.onPress),this.options.useHoverClass&&this.listHolder.on("jcf-pointerover",this.indexSelector,this.onHoverItem)},onPress:function(e){f(this).trigger("press",e),this.listHolder.on("jcf-pointerup",this.onRelease)},onRelease:function(e){f(this).trigger("release",e),this.listHolder.off("jcf-pointerup",this.onRelease)},onHoverItem:function(j){var i=parseFloat(j.currentTarget.getAttribute(this.options.indexAttribute));this.fakeOptions.removeClass(this.options.hoverClass).eq(i).addClass(this.options.hoverClass)},onItemPress:function(i){"touch"===i.pointerType||this.options.selectOnClick?(this.tmpListOffsetTop=this.list.offset().top,this.listHolder.on("jcf-pointerup",this.indexSelector,this.onItemRelease)):this.onSelectItem(i)},onItemRelease:function(i){this.listHolder.off("jcf-pointerup",this.indexSelector,this.onItemRelease),this.tmpListOffsetTop===this.list.offset().top&&this.listHolder.on("click",this.indexSelector,{savedPointerType:i.pointerType},this.onSelectItem),delete this.tmpListOffsetTop},onSelectItem:function(j){var k,e=parseFloat(j.currentTarget.getAttribute(this.options.indexAttribute)),l=j.data&&j.data.savedPointerType||j.pointerType||"mouse";this.listHolder.off("click",this.indexSelector,this.onSelectItem),j.button>1||this.realOptions[e].disabled||(this.element.prop("multiple")?j.metaKey||j.ctrlKey||"touch"===l||this.options.multipleSelectWithoutKey?this.realOptions[e].selected=!this.realOptions[e].selected:j.shiftKey?(k=[this.lastClickedIndex,e].sort(function(m,i){return m-i}),this.realOptions.each(function(m,i){i.selected=m>=k[0]&&m<=k[1]})):this.element.prop("selectedIndex",e):this.element.prop("selectedIndex",e),j.shiftKey||(this.lastClickedIndex=e),this.refreshSelectedClass(),"mouse"===l&&this.scrollToActiveOption(),f(this).trigger("select"))},rebuildList:function(){var j=this,k=this.element[0];this.storedSelectHTML=k.innerHTML,this.optionIndex=0,this.list=f(this.createOptionsList(k)),this.listHolder.empty().append(this.list),this.realOptions=this.element.find("option"),this.fakeOptions=this.list.find(this.indexSelector),this.fakeListItems=this.list.find("."+this.options.captionClass+","+this.indexSelector),delete this.optionIndex;var e=this.options.maxVisibleItems,m=this.element.prop("size");m>1&&!this.element.is("[jcf-size]")&&(e=m);var l=this.fakeOptions.length>e;return this.container.toggleClass(this.options.scrollClass,l),l&&(this.listHolder.css({maxHeight:this.getOverflowHeight(e),overflow:"auto"}),this.options.useCustomScroll&&jcf.modules.Scrollable)?void jcf.replace(this.listHolder,"Scrollable",{handleResize:this.options.handleResize,alwaysPreventMouseWheel:this.options.alwaysPreventMouseWheel}):void (this.options.alwaysPreventMouseWheel&&(this.preventWheelHandler=function(p){var o=j.listHolder.scrollTop(),n=j.listHolder.prop("scrollHeight")-j.listHolder.innerHeight();(0>=o&&p.deltaY<0||o>=n&&p.deltaY>0)&&p.preventDefault()},this.listHolder.on("jcf-mousewheel",this.preventWheelHandler)))},refreshSelectedClass:function(){var m,k=this,l=this.element.prop("multiple"),j=this.element.prop("selectedIndex");l?this.realOptions.each(function(n,i){k.fakeOptions.eq(n).toggleClass(k.options.selectedClass,!!i.selected)}):(this.fakeOptions.removeClass(this.options.selectedClass+" "+this.options.hoverClass),m=this.fakeOptions.eq(j).addClass(this.options.selectedClass),this.options.useHoverClass&&m.addClass(this.options.hoverClass))},scrollToActiveOption:function(){var i=this.getActiveOptionOffset();"number"==typeof i&&this.listHolder.prop("scrollTop",i)},getSelectedIndexRange:function(){var j=-1,i=-1;return this.realOptions.each(function(k,e){e.selected&&(0>j&&(j=k),i=k)}),[j,i]},getChangedSelectedIndex:function(){var j,i=this.element.prop("selectedIndex");return this.element.prop("multiple")?(this.previousRange||(this.previousRange=[i,i]),this.currentRange=this.getSelectedIndexRange(),j=this.currentRange[this.currentRange[0]!==this.previousRange[0]?0:1],this.previousRange=this.currentRange,j):i},getActiveOptionOffset:function(){var m=this.listHolder.height(),k=this.listHolder.prop("scrollTop"),l=this.getChangedSelectedIndex(),j=this.fakeOptions.eq(l),q=j.offset().top-this.list.offset().top,p=j.innerHeight();return q+p>=k+m?q-m+p:k>q?q:void 0},getOverflowHeight:function(m){var k=this.fakeListItems.eq(m-1),l=this.list.offset().top,j=k.offset().top,o=k.innerHeight();return j+o-l},getScrollTop:function(){return this.listHolder.scrollTop()},setScrollTop:function(i){this.listHolder.scrollTop(i)},createOption:function(m){var k=document.createElement("span");k.className=this.options.optionClass,k.innerHTML=m.innerHTML,k.setAttribute(this.options.indexAttribute,this.optionIndex++);var l,j=m.getAttribute("data-image");return j&&(l=document.createElement("img"),l.src=j,k.insertBefore(l,k.childNodes[0])),m.disabled&&(k.className+=" "+this.options.disabledClass),m.className&&(k.className+=" "+g(m.className,this.options.cloneClassPrefix)),k},createOptGroup:function(m){var k,l,j=document.createElement("span"),o=m.getAttribute("label");return k=document.createElement("span"),k.className=this.options.captionClass,k.innerHTML=o,j.appendChild(k),m.children.length&&(l=this.createOptionsList(m),j.appendChild(l)),j.className=this.options.groupClass,j},createOptionContainer:function(){var i=document.createElement("li");return i},createOptionsList:function(j){var k=this,e=document.createElement("ul");return f.each(j.children,function(l,i){var p,m=k.createOptionContainer(i);switch(i.tagName.toLowerCase()){case"option":p=k.createOption(i);break;case"optgroup":p=k.createOptGroup(i)}e.appendChild(m).appendChild(p)}),e},refresh:function(){this.storedSelectHTML!==this.element.prop("innerHTML")&&this.rebuildList();var i=jcf.getInstance(this.listHolder);i&&i.refresh(),this.refreshSelectedClass()},destroy:function(){this.listHolder.off("jcf-mousewheel",this.preventWheelHandler),this.listHolder.off("jcf-pointerdown",this.indexSelector,this.onSelectItem),this.listHolder.off("jcf-pointerover",this.indexSelector,this.onHoverItem),this.listHolder.off("jcf-pointerdown",this.onPress)}});var g=function(j,i){return j?j.replace(/[\s]*([\S]+)+[\s]*/gi,i+"$1 "):""},a=function(){function j(k){k.preventDefault()}var i=jcf.getOptions().unselectableClass;return function(e){e.addClass(i).on("selectstart",j)}}()}(jQuery,this),function(a){jcf.addModule({name:"Checkbox",selector:'input[type="checkbox"]',options:{wrapNative:!0,checkedClass:"jcf-checked",uncheckedClass:"jcf-unchecked",labelActiveClass:"jcf-label-active",fakeStructure:'<span class="jcf-checkbox"><span></span></span>'},matchElement:function(b){return b.is(":checkbox")},init:function(){this.initStructure(),this.attachEvents(),this.refresh()},initStructure:function(){this.doc=a(document),this.realElement=a(this.options.element),this.fakeElement=a(this.options.fakeStructure).insertAfter(this.realElement),this.labelElement=this.getLabelFor(),this.options.wrapNative?this.realElement.appendTo(this.fakeElement).css({position:"absolute",height:"100%",width:"100%",opacity:0,margin:0}):this.realElement.addClass(this.options.hiddenClass)},attachEvents:function(){this.realElement.on({focus:this.onFocus,click:this.onRealClick}),this.fakeElement.on("click",this.onFakeClick),this.fakeElement.on("jcf-pointerdown",this.onPress)},onRealClick:function(c){var b=this;this.savedEventObject=c,setTimeout(function(){b.refresh()},0)},onFakeClick:function(b){this.options.wrapNative&&this.realElement.is(b.target)||this.realElement.is(":disabled")||(delete this.savedEventObject,this.stateChecked=this.realElement.prop("checked"),this.realElement.prop("checked",!this.stateChecked),this.fireNativeEvent(this.realElement,"click"),this.savedEventObject&&this.savedEventObject.isDefaultPrevented()?this.realElement.prop("checked",this.stateChecked):this.fireNativeEvent(this.realElement,"change"),delete this.savedEventObject)},onFocus:function(){this.pressedFlag&&this.focusedFlag||(this.focusedFlag=!0,this.fakeElement.addClass(this.options.focusClass),this.realElement.on("blur",this.onBlur))},onBlur:function(){this.pressedFlag||(this.focusedFlag=!1,this.fakeElement.removeClass(this.options.focusClass),this.realElement.off("blur",this.onBlur))},onPress:function(b){this.focusedFlag||"mouse"!==b.pointerType||this.realElement.focus(),this.pressedFlag=!0,this.fakeElement.addClass(this.options.pressedClass),this.doc.on("jcf-pointerup",this.onRelease)},onRelease:function(b){this.focusedFlag&&"mouse"===b.pointerType&&this.realElement.focus(),this.pressedFlag=!1,this.fakeElement.removeClass(this.options.pressedClass),this.doc.off("jcf-pointerup",this.onRelease)},getLabelFor:function(){var b=this.realElement.closest("label"),c=this.realElement.prop("id");return !b.length&&c&&(b=a('label[for="'+c+'"]')),b.length?b:null},refresh:function(){var c=this.realElement.is(":checked"),b=this.realElement.is(":disabled");this.fakeElement.toggleClass(this.options.checkedClass,c).toggleClass(this.options.uncheckedClass,!c).toggleClass(this.options.disabledClass,b),this.labelElement&&this.labelElement.toggleClass(this.options.labelActiveClass,c)},destroy:function(){this.options.wrapNative?this.realElement.insertBefore(this.fakeElement).css({position:"",width:"",height:"",opacity:"",margin:""}):this.realElement.removeClass(this.options.hiddenClass),this.fakeElement.off("jcf-pointerdown",this.onPress),this.fakeElement.remove(),this.doc.off("jcf-pointerup",this.onRelease),this.realElement.off({focus:this.onFocus,click:this.onRealClick})}})}(jQuery);