$(document).ready(function(){if($("#calendar").length){var b=$("#calendar").attr("data-date");var a=$("#calendar").attr("data-lang");var d,c=$(window).width();if(c>=992){d=5}else{if(c<991&&c>600){d=3}else{d=2}}if(a==="es_ES"){a="es"}jQuery("#calendar").fullCalendar({lang:a,header:{left:"prev,next today",center:"title",right:""},defaultView:"agendaFourDay",views:{agendaFourDay:{type:"agenda",duration:{days:d},buttonText:"5 days",columnFormat:"ddd D/M"}},allDaySlot:false,defaultDate:b,editable:false,eventLimit:true,events:"/calendar/data",eventOverlap:true,eventRender:function(g,f){f.data("duplicate",g.duplicate);f.append("<br>");f.append('<a href="#" class="move prev" data-oid="'+g.id+'"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>');f.append('<a href="#" class="move next" data-oid="'+g.id+'"><span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span></a>');f.append("<br>");if(g.agency_name!=undefined){f.append('<div class="agency-name">'+g.agency_name+"</div>")}else{f.append("<br>")}f.append('<div class="hours"><i class="glyphicon glyphicon-time"></i> '+g.hours+" hrs ("+g.start_time+" a "+g.end_time+")</div>");if(g.persons!=undefined){f.append('<div class="persona"><i class="glyphicon glyphicon-user"></i> '+g.persons+" persona</div>")}f.append("<br>");f.append('<a href="#" class="delete" data-oid="'+g.id+'"><span class="glyphicon glyphicon-remove pull-right" aria-hidden="true"></span></a>')},eventAfterAllRender:function(f){jQuery(".btn-reservar").attr("href","/reserve");jQuery(".alert-overlap").hide();$.each($(".fc-event"),function(g,h){if($(h).data("duplicate")){$(".alert-overlap").show();$(".btn-reservar").removeAttr("href")}})}})}jQuery(document).on("click",".fc-event.cal-offer .move",function(h){h.preventDefault();var g=jQuery(this).data("oid");var f=jQuery(this).hasClass("prev")?"prev":jQuery(this).hasClass("next")?"next":"";$.ajax({type:"POST",url:"/calendar/process",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:g,dir:f},success:function(j){jQuery("#calendar").fullCalendar("refetchEvents")}})});jQuery(document).on("click",".fc-event.cal-offer .delete",function(g){g.preventDefault();var f=jQuery(this).data("oid");$("#delete-modal .btn-confirm").data("oid",f);$("#delete-modal").modal("show")});jQuery("#delete-modal .btn-confirm").on("click",function(g){g.preventDefault();var f=jQuery(this).data("oid");$("#delete-modal").modal("hide");$.ajax({type:"POST",url:"/offer/remove",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:f},success:function(){jQuery("#calendar").fullCalendar("refetchEvents");getsuprogram();$(".offers-list li").each(function(h){if(h===f){$(this).remove()}});calendarCalc()}})});function e(f){var g=$("#calendar").fullCalendar("clientEvents");for(i in g){if(g[i].id!=f.id){if(!(Date(g[i].start)>=Date(f.end)||Date(g[i].end)<=Date(f.start))){return true}}}return false}$("#generate-link").click(function(f){f.preventDefault();$.ajax({type:"POST",url:"/proposal/save",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(g){console.log(g)}})})});