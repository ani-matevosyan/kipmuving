$(document).ready(function(){if($("#calendar").length){var b=$("#calendar").attr("data-date");var a=$("#calendar").attr("data-lang");var e,d=$(window).width();if(d>=992){e=5}else{if(d<991&&d>600){e=3}else{e=2}}if(a==="es_ES"){a="es"}jQuery("#calendar").fullCalendar({lang:a,header:{left:"prev,next today",center:"title",right:""},defaultView:"agendaFourDay",views:{agendaFourDay:{type:"agenda",duration:{days:e},buttonText:"5 days",columnFormat:"ddd D/M"}},allDaySlot:false,defaultDate:b,editable:false,eventLimit:true,events:"/calendar/data",eventOverlap:true,eventRender:function(h,g){g.data("duplicate",h.duplicate);g.append("<br>");g.append('<a href="#" class="move prev" data-oid="'+h.id+'"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>');g.append('<a href="#" class="move next" data-oid="'+h.id+'"><span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span></a>');g.append("<br>");if(h.agency_name!=undefined){g.append('<div class="agency-name">'+h.agency_name+"</div>")}else{g.append("<br>")}g.append('<div class="hours"><i class="glyphicon glyphicon-time"></i> '+h.hours+" hrs ("+h.start_time+" a "+h.end_time+")</div>");if(h.persons!=undefined){g.append('<div class="persona"><i class="glyphicon glyphicon-user"></i> '+h.persons+" persona</div>")}g.append("<br>");g.append('<a href="#" class="delete" data-oid="'+h.id+'"><span class="glyphicon glyphicon-remove pull-right" aria-hidden="true"></span></a>')},eventAfterAllRender:function(g){jQuery(".btn-reservar").attr("href","/reserve");jQuery(".alert-overlap").hide();$.each($(".fc-event"),function(h,j){if($(j).data("duplicate")){$(".alert-overlap").show();$(".btn-reservar").removeAttr("href")}})}})}jQuery(document).on("click",".fc-event.cal-offer .move",function(j){j.preventDefault();var h=jQuery(this).data("oid");var g=jQuery(this).hasClass("prev")?"prev":jQuery(this).hasClass("next")?"next":"";$.ajax({type:"POST",url:"/calendar/process",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:h,dir:g},success:function(k){jQuery("#calendar").fullCalendar("refetchEvents")}})});jQuery(document).on("click",".fc-event.cal-offer .delete",function(h){h.preventDefault();var g=jQuery(this).data("oid");$("#delete-modal .btn-confirm").data("oid",g);$("#delete-modal").modal("show")});jQuery("#delete-modal .btn-confirm").on("click",function(h){h.preventDefault();var g=jQuery(this).data("oid");$("#delete-modal").modal("hide");$.ajax({type:"POST",url:"/offer/remove",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:g},success:function(){jQuery("#calendar").fullCalendar("refetchEvents");getsuprogram();$(".offers-list li").each(function(j){if(j===g){$(this).remove()}});calendarCalc()}})});function f(g){var h=$("#calendar").fullCalendar("clientEvents");for(i in h){if(h[i].id!=g.id){if(!(Date(h[i].start)>=Date(g.end)||Date(h[i].end)<=Date(g.start))){return true}}}return false}var c=false;$("#generate-link").click(function(j){j.preventDefault();var h=$(this).parent().find("input"),g=$(this);if(c){h.select();document.execCommand("copy")}else{$.ajax({type:"POST",url:"/proposals/save",data:{_token:$('meta[name="csrf-token"]').attr("content")},success:function(k){h.val(k).slideDown();c=true;g.text("Copy")}})}})});