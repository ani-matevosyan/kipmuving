$(document).ready(function(){if($("#calendar").length){var b=$("#calendar").attr("data-date");var a=$("#calendar").attr("data-lang");var d,c=$(window).width();if(c>=992){d=5}else{if(c<991&&c>600){d=3}else{d=2}}if(a==="es_ES"){a="es"}jQuery("#calendar").fullCalendar({lang:a,header:{left:"prev,next today",center:"title",right:""},defaultView:"agendaFourDay",views:{agendaFourDay:{type:"agenda",duration:{days:d},buttonText:"5 days",columnFormat:"ddd D/M"}},allDaySlot:false,defaultDate:b,editable:false,eventLimit:true,events:"/calendar/data",eventOverlap:true,eventRender:function(j,h){h.data("duplicate",j.duplicate);h.append("<br>");h.append('<a href="#" class="move prev" data-oid="'+j.id+'"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>');h.append('<a href="#" class="move next" data-oid="'+j.id+'"><span class="glyphicon glyphicon-chevron-right pull-right" aria-hidden="true"></span></a>');h.append("<br>");if(j.agency_name!=undefined){h.append('<div class="agency-name">'+j.agency_name+"</div>")}else{h.append("<br>")}h.append('<div class="hours"><i class="glyphicon glyphicon-time"></i> '+j.hours+" hrs ("+j.start_time+" a "+j.end_time+")</div>");if(j.persons!=undefined){h.append('<div class="persona"><i class="glyphicon glyphicon-user"></i> '+j.persons+" persona</div>")}h.append("<br>");h.append('<a href="#" class="delete" data-oid="'+j.id+'"><span class="glyphicon glyphicon-remove pull-right" aria-hidden="true"></span></a>')},eventAfterAllRender:function(h){jQuery(".btn-reservar").attr("href","/reserve");jQuery(".alert-overlap").hide();$.each($(".fc-event"),function(j,k){if($(k).data("duplicate")){$(".alert-overlap").show();$(".btn-reservar").removeAttr("href")}})}})}jQuery(document).on("click",".fc-event.cal-offer .move",function(k){k.preventDefault();var j=jQuery(this).data("oid");var h=jQuery(this).hasClass("prev")?"prev":jQuery(this).hasClass("next")?"next":"";$.ajax({type:"POST",url:"/calendar/process",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:j,dir:h},success:function(l){jQuery("#calendar").fullCalendar("refetchEvents")}})});jQuery(document).on("click",".fc-event.cal-offer .delete",function(j){j.preventDefault();var h=jQuery(this).data("oid");$("#delete-modal .btn-confirm").data("oid",h);$("#delete-modal").modal("show")});jQuery("#delete-modal .btn-confirm").on("click",function(j){j.preventDefault();var h=jQuery(this).data("oid");$("#delete-modal").modal("hide");$.ajax({type:"POST",url:"/offer/remove",data:{_token:$('meta[name="csrf-token"]').attr("content"),oid:h},success:function(){jQuery("#calendar").fullCalendar("refetchEvents");getsuprogram();$(".offers-list li").each(function(k){if(k===h){$(this).remove()}});calendarCalc()}})});function f(h){var j=$("#calendar").fullCalendar("clientEvents");for(i in j){if(j[i].id!=h.id){if(!(Date(j[i].start)>=Date(h.end)||Date(j[i].end)<=Date(h.start))){return true}}}return false}if($(window).width()>991){var g=$(".s_suprogram"),e=g.outerWidth();$(window).scroll(function(){var h=$(window).scrollTop();if(h>=300){g.css("width",e+"px").addClass("fixed")}else{g.removeClass("fixed")}})}});