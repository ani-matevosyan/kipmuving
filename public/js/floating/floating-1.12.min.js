var floatingMenu={hasInner:typeof(window.innerWidth)=="number",hasElement:typeof(document.documentElement)=="object"&&typeof(document.documentElement.clientWidth)=="number"};var floatingArray=[];floatingMenu.add=function(c,b){var a;var d;if(typeof(c)==="string"){a=c}else{d=c}if(b==undefined){floatingArray.push({id:a,menu:d,targetLeft:0,targetTop:0,distance:0.07,snap:true,updateParentHeight:false})}else{floatingArray.push({id:a,menu:d,targetLeft:b.targetLeft,targetRight:b.targetRight,targetTop:b.targetTop,targetBottom:b.targetBottom,centerX:b.centerX,centerY:b.centerY,prohibitXMovement:b.prohibitXMovement,prohibitYMovement:b.prohibitYMovement,distance:b.distance!=undefined?b.distance:0.07,snap:b.snap,ignoreParentDimensions:b.ignoreParentDimensions,updateParentHeight:b.updateParentHeight==undefined?false:b.updateParentHeight,scrollContainer:b.scrollContainer,scrollContainerId:b.scrollContainerId,confinementArea:b.confinementArea,confinementAreaId:b.confinementArea!=undefined&&b.confinementArea.substring(0,1)=="#"?b.confinementArea.substring(1):undefined,confinementAreaClassRegexp:b.confinementArea!=undefined&&b.confinementArea.substring(0,1)=="."?new RegExp("(^|\\s)"+b.confinementArea.substring(1)+"(\\s|$)"):undefined})}};floatingMenu.findSingle=function(a){if(a.id){a.menu=document.getElementById(a.id)}if(a.scrollContainerId){a.scrollContainer=document.getElementById(a.scrollContainerId)}};floatingMenu.move=function(a){if(!a.prohibitXMovement){a.menu.style.left=a.nextX+"px";a.menu.style.right=""}if(!a.prohibitYMovement){a.menu.style.top=a.nextY+"px";a.menu.style.bottom=""}};floatingMenu.scrollLeft=function(b){if(b.scrollContainer){return b.scrollContainer.scrollLeft}var a=window.top;return this.hasInner?a.pageXOffset:this.hasElement?a.document.documentElement.scrollLeft:a.document.body.scrollLeft};floatingMenu.scrollTop=function(b){if(b.scrollContainer){return b.scrollContainer.scrollTop}var a=window.top;return this.hasInner?a.pageYOffset:this.hasElement?a.document.documentElement.scrollTop:a.document.body.scrollTop};floatingMenu.windowWidth=function(){return this.hasElement?document.documentElement.clientWidth:document.body.clientWidth};floatingMenu.windowHeight=function(){if(floatingMenu.hasElement&&floatingMenu.hasInner){return document.documentElement.clientHeight>window.innerHeight?window.innerHeight:document.documentElement.clientHeight}else{return floatingMenu.hasElement?document.documentElement.clientHeight:document.body.clientHeight}};floatingMenu.documentHeight=function(){var c=this.hasInner?window.innerHeight:0;var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight,c)};floatingMenu.documentWidth=function(){var b=this.hasInner?window.innerWidth:0;var a=document.body,c=document.documentElement;return Math.max(a.scrollWidth,a.offsetWidth,c.clientWidth,c.scrollWidth,c.offsetWidth,b)};floatingMenu.calculateCornerX=function(c){var b=c.menu.offsetWidth;var a=this.scrollLeft(c)-c.parentLeft;if(c.centerX){a+=(this.windowWidth()-b)/2}else{if(c.targetLeft==undefined){a+=this.windowWidth()-c.targetRight-b}else{a+=c.targetLeft}}if(document.body!=c.menu.parentNode&&a+b>=c.confinedWidthReserve){a=c.confinedWidthReserve-b}if(a<0){a=0}return a};floatingMenu.calculateCornerY=function(c){var b=c.menu.offsetHeight;var a=this.scrollTop(c)-c.parentTop;if(c.centerY){a+=(this.windowHeight()-b)/2}else{if(c.targetTop===undefined){a+=this.windowHeight()-c.targetBottom-b}else{a+=c.targetTop}}if(document.body!=c.menu.parentNode&&a+b>=c.confinedHeightReserve){a=c.confinedHeightReserve-b}if(a<0){a=0}return a};floatingMenu.isConfinementArea=function(b,a){return b.confinementAreaId!=undefined&&a.id==b.confinementAreaId||b.confinementAreaClassRegexp!=undefined&&a.className&&b.confinementAreaClassRegexp.test(a.className)};floatingMenu.computeParent=function(c){if(c.ignoreParentDimensions){c.confinedHeightReserve=this.documentHeight();c.confinedWidthReserver=this.documentWidth();c.parentLeft=0;c.parentTop=0;return}var a=c.menu.parentNode;var b=this.offsets(a,c);c.parentLeft=b.left;c.parentTop=b.top;c.confinedWidthReserve=a.clientWidth;var d=a;var e=this.offsets(d,c);if(c.confinementArea==undefined){while(d.clientHeight+e.top<c.menu.scrollHeight+b.top||c.menu.parentNode==d&&c.updateParentHeight&&d.clientHeight+e.top==c.menu.scrollHeight+b.top){d=d.parentNode;e=this.offsets(d,c)}}else{while(d.parentNode!=undefined&&!this.isConfinementArea(c,d)){d=d.parentNode;e=this.offsets(d,c)}}c.confinedHeightReserve=d.clientHeight-(b.top-e.top)};floatingMenu.offsets=function(e,c){var a={left:0,top:0};if(e===c.scrollContainer){return}while(e.offsetParent&&e.offsetParent!=c.scrollContainer){a.left+=e.offsetLeft;a.top+=e.offsetTop;e=e.offsetParent}if(window==window.top){return a}var d=window.top.document.body.getElementsByTagName("IFRAME");for(var b=0;b<d.length;b++){if(d[b].contentWindow!=window){continue}e=d[b];while(e.offsetParent){a.left+=e.offsetLeft;a.top+=e.offsetTop;e=e.offsetParent}}return a};floatingMenu.doFloatSingle=function(c){this.findSingle(c);if(c.updateParentHeight){c.menu.parentNode.style.minHeight=c.menu.scrollHeight+"px"}var e,b;this.computeParent(c);var d=this.calculateCornerX(c);var e=(d-c.nextX)*c.distance;if(Math.abs(e)<0.5&&c.snap||Math.abs(d-c.nextX)<=1){e=d-c.nextX}var a=this.calculateCornerY(c);var b=(a-c.nextY)*c.distance;if(Math.abs(b)<0.5&&c.snap||Math.abs(a-c.nextY)<=1){b=a-c.nextY}if(Math.abs(e)>0||Math.abs(b)>0){c.nextX+=e;c.nextY+=b;this.move(c)}};floatingMenu.fixTargets=function(){};floatingMenu.fixTarget=function(a){};floatingMenu.doFloat=function(){this.fixTargets();for(var a=0;a<floatingArray.length;a++){this.fixTarget(floatingArray[a]);this.doFloatSingle(floatingArray[a])}setTimeout("floatingMenu.doFloat()",20)};floatingMenu.insertEvent=function(b,d,c){if(b.addEventListener!=undefined){b.addEventListener(d,c,false);return}var e="on"+d;if(b.attachEvent!=undefined){b.attachEvent(e,c);return}var a=b[e];b[e]=function(g){g=(g)?g:window.event;var f=c(g);return(a!=undefined)&&(a(g)==true)&&(f==true)}};floatingMenu.init=function(){floatingMenu.fixTargets();for(var a=0;a<floatingArray.length;a++){floatingMenu.initSingleMenu(floatingArray[a])}setTimeout("floatingMenu.doFloat()",100)};floatingMenu.initSingleMenu=function(a){this.findSingle(a);this.computeParent(a);this.fixTarget(a);a.nextX=this.calculateCornerX(a);a.nextY=this.calculateCornerY(a);this.move(a)};floatingMenu.insertEvent(window,"load",floatingMenu.init);if(typeof(jQuery)!=="undefined"){(function(a){a.fn.addFloating=function(b){return this.each(function(){floatingMenu.add(this,b)})}})(jQuery)};